"use strict";(self.webpackChunkspritacular_frontend=self.webpackChunkspritacular_frontend||[]).push([[5019],{75019:function(e,n,t){t.r(n),t.d(n,{default:function(){return m}});var a=t(74165),i=t(15861),l=t(1413),o=t(70885),r=(t(22201),t(33151)),c=t(72791),s=t(62711),u=t(6442),d=t(7788),p=t(80184),m=function(e){var n=e.setData,t=(e.uploadProgress,e.error,e.update,e.thumb),m=(0,c.useState)(),f=(0,o.Z)(m,2),h=f[0],v=f[1],g=(0,c.useState)(),x=(0,o.Z)(g,2),b=x[0],j=x[1],w=(0,c.useState)(!1),k=(0,o.Z)(w,2),N=k[0],Z=k[1],_=(0,c.useState)(!0),y=(0,o.Z)(_,2),U=(y[0],y[1]);(0,c.useLayoutEffect)((function(){h&&!N&&function(){var e=new FileReader;e.onloadend=function(){var n=e.result.replace("data:","").replace(/^.+,/,""),t="data:image/png;base64,".concat(n);j(t)},e.readAsDataURL(h)}()}),[h,b]),(0,c.useEffect)((function(){N||n((function(e){return(0,l.Z)((0,l.Z)({},e),{},{thumbnail_image:h})}))}),[h]);var F=function(e){return new Promise((function(n,t){var a=new FileReader;a.readAsDataURL(e),a.onload=function(){return n(a.result)},a.onerror=function(e){return t(e)}}))};return(0,c.useEffect)((function(){if(t)return fetch(t).then(function(){var e=(0,i.Z)((0,a.Z)().mark((function e(i){var o,r,c,s,u;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=i.headers.get("content-type"),e.next=3,i.blob().catch((function(e){return console.log("blob error",e)}));case 3:return r=e.sent,c=t.split(/[#?]/)[0].split("/").pop().trim(),s=new File([r],c,{contentType:o}),e.next=8,F(s).catch((function(e){return console.log("base64 Error",e)}));case 8:return u=e.sent,setTimeout((function(){n((function(e){return(0,l.Z)((0,l.Z)({},e),{},{thumbnail_image:s})})),v(s),j(u)}),500),e.abrupt("return",s);case 11:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()).catch((function(e){return console.log("File converting delayed")}))}),[t]),(0,p.jsxs)(d.cw,{children:[(0,p.jsx)(d.__,{for:"title",children:"Upload Thumbnail"}),(0,p.jsxs)("div",{className:"position-relative overflow-hidden",children:[(0,p.jsx)(r.Z,{blogUpload:!0,handleUploadImage:function(e){Z(!1),j(null),v(e.target.files[0])}}),b&&(0,p.jsxs)("div",{className:"img_wrapper position-absolute w-100 left-0 right-0 top-0 bottom-0",children:[(0,p.jsx)("button",{className:"remove-btn",onClick:function(e){return function(e){Z(!0),e.preventDefault(),j(null),v(null),n((function(e){return(0,l.Z)((0,l.Z)({},e),{},{thumbnail_image:null})}))}(e)},children:(0,p.jsx)(s.JO,{icon:"clarity:window-close-line",width:20,height:20})}),(0,p.jsx)("div",{className:"img-preview_wrapper",children:(0,p.jsx)(u.default,{loaderLoading:function(e){U(e)},image:b,preview:b})})]})]})]})}},33151:function(e,n,t){t(22201);var a=t(7788),i=t(62711),l=t(80184);n.Z=function(e){var n=e.maxLimit,t=e.imageFormat,o=e.multiple,r=e.handleUploadImage,c=e.error,s=e.small,u=e.handleObvAdd,d=e.defaultUploadBox,p=e.blogUpload;return(0,l.jsxs)("div",{className:"position-relative",children:[(0,l.jsxs)("div",{className:"upload-image_wrapper ".concat(s?"small-upload_box mb-5":""," ").concat(p?"blog-upload-box":""),children:[(0,l.jsx)("div",{className:"upload-ob-inner",children:(0,l.jsxs)(a.cw,{children:[(0,l.jsx)(a.__,{htmlFor:"UploadFile",children:(0,l.jsxs)("div",{className:"upload-info",children:[(0,l.jsx)(i.JO,{icon:"bx:image-alt",color:"#737e96",width:"42",height:"42"}),(0,l.jsx)("p",{children:d?"Upload your first observation":"Drag and drop images or click to upload"}),n&&(0,l.jsx)("span",{className:"text-black",children:"Max. Image Size: 5MB"}),t&&(0,l.jsx)("ul",{children:(0,l.jsx)("li",{children:"Common Image File Formats (JPEG or JPG, PNG)"})})]})}),(0,l.jsx)(a.II,{type:"file",name:"file",id:"UploadFile",accept:"image/jpg, image/jpeg, image/png",multiple:o,onChange:function(e){return r(e)}})]})}),(null===c||void 0===c?void 0:c.count)&&(0,l.jsxs)("span",{className:"text-danger d-block small my-1 d-inline-block",children:[null===c||void 0===c?void 0:c.count," "]}),(null===c||void 0===c?void 0:c.size)&&(0,l.jsx)("span",{className:"text-danger d-block small my-1 d-inline-block",children:null===c||void 0===c?void 0:c.size}),(null===c||void 0===c?void 0:c.duplicate)&&(0,l.jsx)("span",{className:"text-info d-block small my-1 d-inline-block",children:null===c||void 0===c?void 0:c.duplicate})]}),d&&(0,l.jsx)("div",{className:"".concat(d?"mark-center":""),children:(0,l.jsxs)("button",{onClick:function(e){return u(e)},className:"btn btn-secondary",children:[(0,l.jsx)(i.JO,{icon:"heroicons-outline:upload",width:"25",height:"22"}),"Upload Observation"]})})]})}},22201:function(){}}]);
//# sourceMappingURL=5019.c5b42124.chunk.js.map