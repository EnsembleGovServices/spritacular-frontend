"use strict";(self.webpackChunkspritacular_frontend=self.webpackChunkspritacular_frontend||[]).push([[5019],{75019:function(e,n,t){t.r(n),t.d(n,{default:function(){return f}});var a=t(15861),i=t(1413),l=t(70885),r=t(87757),o=t.n(r),c=(t(22201),t(33151)),s=t(72791),u=t(62711),d=t(6442),m=t(7788),p=t(80184),f=function(e){var n=e.setData,t=(e.uploadProgress,e.error,e.update,e.thumb),r=(0,s.useState)(),f=(0,l.Z)(r,2),h=f[0],g=f[1],v=(0,s.useState)(),x=(0,l.Z)(v,2),b=x[0],j=x[1],w=(0,s.useState)(!1),k=(0,l.Z)(w,2),N=k[0],Z=k[1];(0,s.useLayoutEffect)((function(){h&&!N&&function(){var e=new FileReader;e.onloadend=function(){var n=e.result.replace("data:","").replace(/^.+,/,""),t="data:image/png;base64,".concat(n);j(t)},e.readAsDataURL(h)}()}),[h,b]),(0,s.useEffect)((function(){N||n((function(e){return(0,i.Z)((0,i.Z)({},e),{},{thumbnail_image:h})}))}),[h]);var y=function(e){return new Promise((function(n,t){var a=new FileReader;a.readAsDataURL(e),a.onload=function(){return n(a.result)},a.onerror=function(e){return t(e)}}))};return(0,s.useEffect)((function(){if(t)return fetch(t).then(function(){var e=(0,a.Z)(o().mark((function e(a){var l,r,c,s,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=a.headers.get("content-type"),e.next=3,a.blob().catch((function(e){return console.log("blob error",e)}));case 3:return r=e.sent,c=t.split(/[#?]/)[0].split("/").pop().trim(),s=new File([r],c,{contentType:l}),e.next=8,y(s).catch((function(e){return console.log("base64 Error",e)}));case 8:return u=e.sent,setTimeout((function(){n((function(e){return(0,i.Z)((0,i.Z)({},e),{},{thumbnail_image:s})})),g(s),j(u)}),500),e.abrupt("return",s);case 11:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()).catch((function(e){return console.log("File converting delayed")}))}),[t]),(0,p.jsxs)(m.cw,{children:[(0,p.jsx)(m.__,{for:"title",children:"Upload Thumbnail"}),(0,p.jsxs)("div",{className:"position-relative overflow-hidden",children:[(0,p.jsx)(c.Z,{blogUpload:!0,handleUploadImage:function(e){Z(!1),j(null),g(e.target.files[0])}}),b&&(0,p.jsxs)("div",{className:"img_wrapper position-absolute w-100 left-0 right-0 top-0 bottom-0",children:[(0,p.jsx)("button",{className:"remove-btn",onClick:function(e){return function(e){Z(!0),e.preventDefault(),j(null),g(null),n((function(e){return(0,i.Z)((0,i.Z)({},e),{},{thumbnail_image:null})}))}(e)},children:(0,p.jsx)(u.JO,{icon:"clarity:window-close-line",width:20,height:20})}),(0,p.jsx)("div",{className:"img-preview_wrapper",children:(0,p.jsx)(d.Z,{image:b,preview:b})})]})]})]})}},6442:function(e,n,t){var a=t(70885),i=t(72791),l=t(80184);n.Z=function(e){var n=e.preview,t=e.image,r=e.alt,o=e.bgColor,c=void 0===o?"transparent":o,s=e.handleClick,u=e.homepage,d=(0,i.useState)(n),m=(0,a.Z)(d,2),p=m[0],f=m[1],h=(0,i.useState)(!0),g=(0,a.Z)(h,2),v=g[0],x=g[1];return(0,i.useEffect)((function(){!function(e){var n=new Image;n.src=e,n.onload=function(){f(n.src),x(!1)}}(t)}),[]),(0,l.jsx)("div",{className:"shadow-sm drop-shadow-lg",style:{overflow:"hidden"},children:(0,l.jsx)("img",{style:{filter:"".concat(v?"blur(10px)":""),transition:"0.4s filter linear",width:"100%",background:c},src:p,alt:r,className:"".concat(u?"img-fluid card-img no-cursor":"img-fluid card-img"),onClick:s})})}},33151:function(e,n,t){t(22201);var a=t(7788),i=t(62711),l=t(80184);n.Z=function(e){var n=e.maxLimit,t=e.imageFormat,r=e.multiple,o=e.handleUploadImage,c=e.error,s=e.small,u=e.handleObvAdd,d=e.defaultUploadBox,m=e.blogUpload;return(0,l.jsxs)("div",{className:"position-relative",children:[(0,l.jsxs)("div",{className:"upload-image_wrapper ".concat(s?"small-upload_box mb-5":""," ").concat(m?"blog-upload-box":""),children:[(0,l.jsx)("div",{className:"upload-ob-inner",children:(0,l.jsxs)(a.cw,{children:[(0,l.jsx)(a.__,{htmlFor:"UploadFile",children:(0,l.jsxs)("div",{className:"upload-info",children:[(0,l.jsx)(i.JO,{icon:"bx:image-alt",color:"#737e96",width:"42",height:"42"}),(0,l.jsx)("p",{children:d?"Upload your first observation":"Drag and drop images or click to upload"}),n&&(0,l.jsx)("span",{className:"text-black",children:"Max. Image Size: 5MB"}),t&&(0,l.jsx)("ul",{children:(0,l.jsx)("li",{children:"Common Image File Formats (JPEG or JPG, PNG)"})})]})}),(0,l.jsx)(a.II,{type:"file",name:"file",id:"UploadFile",accept:"image/jpg, image/jpeg, image/png",multiple:r,onChange:function(e){return o(e)}})]})}),(null===c||void 0===c?void 0:c.count)&&(0,l.jsxs)("span",{className:"text-danger d-block small my-1 d-inline-block",children:[null===c||void 0===c?void 0:c.count," "]}),(null===c||void 0===c?void 0:c.size)&&(0,l.jsx)("span",{className:"text-danger d-block small my-1 d-inline-block",children:null===c||void 0===c?void 0:c.size}),(null===c||void 0===c?void 0:c.duplicate)&&(0,l.jsx)("span",{className:"text-info d-block small my-1 d-inline-block",children:null===c||void 0===c?void 0:c.duplicate})]}),d&&(0,l.jsx)("div",{className:"".concat(d?"mark-center":""),children:(0,l.jsxs)("button",{onClick:function(e){return u(e)},className:"btn btn-secondary",children:[(0,l.jsx)(i.JO,{icon:"heroicons-outline:upload",width:"25",height:"22"}),"Upload Observation"]})})]})}},22201:function(){}}]);
//# sourceMappingURL=5019.4d9599cc.chunk.js.map