"use strict";(self.webpackChunkspritacular_frontend=self.webpackChunkspritacular_frontend||[]).push([[7355,3417],{74600:function(e,a,t){var n=t(7788),i=t(80184);a.Z=function(e){var a,t,l,o,d,s,r,c=e.handleInput1,u=e.updateSetting,m=e.error;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.JX,{md:"12",children:[(0,i.jsxs)(n.cw,{children:[(0,i.jsxs)("label",{children:["Camera Type",(0,i.jsx)("span",{className:"required",children:"Required"})]}),(0,i.jsx)(n.II,{type:"text",name:"camera_type",placeholder:"Canon",value:null===u||void 0===u?void 0:u.camera_type,onChange:function(e){return c(e)}}),(0,i.jsxs)("span",{className:"d-block mt-1 opacity-75 ex-text",children:[(0,i.jsx)("b",{className:"me-1",children:"Example:"}),"Canon"]}),(null===m||void 0===m||null===(a=m.data)||void 0===a?void 0:a.camera_type)&&(0,i.jsx)("span",{className:"text-danger small",children:null===m||void 0===m||null===(t=m.data)||void 0===t?void 0:t.camera_type})]}),(0,i.jsx)("div",{className:"border-line"})]}),(0,i.jsx)(n.JX,{md:"12",children:(0,i.jsx)(n.cw,{children:(0,i.jsx)("h6",{children:"Lens Information"})})}),(0,i.jsx)(n.JX,{md:"6",children:(0,i.jsxs)(n.cw,{children:[(0,i.jsxs)("label",{children:["Focal Length",(0,i.jsx)("span",{className:"required",children:"Required"})]}),(0,i.jsx)(n.II,{type:"number",maxLength:10,name:"focal_length",value:null===u||void 0===u?void 0:u.focal_length,placeholder:"35 mm",onChange:function(e){return c(e)}}),(0,i.jsxs)("span",{className:"d-block mt-1 opacity-75 ex-text",children:[(0,i.jsx)("b",{className:"me-1",children:"Example:"}),"35 mm"]}),(null===m||void 0===m||null===(l=m.data)||void 0===l?void 0:l.focal_length)&&(0,i.jsx)("span",{className:"text-danger small",children:null===m||void 0===m||null===(o=m.data)||void 0===o?void 0:o.focal_length})]})}),(0,i.jsx)(n.JX,{md:"6",children:(0,i.jsxs)(n.cw,{children:[(0,i.jsxs)("label",{children:["Aperture",(0,i.jsx)("span",{className:"required",children:"Required"})]}),(0,i.jsx)(n.II,{type:"number",name:"aperture",value:null!==u&&void 0!==u&&u.aperture?null===u||void 0===u?void 0:u.aperture:null!==(d=null===(null===u||void 0===u?void 0:u.aperture))&&void 0!==d?d:"",placeholder:"1.4",onChange:function(e){return c(e)}}),(0,i.jsxs)("span",{className:"d-block mt-1 opacity-75 ex-text",children:[(0,i.jsx)("b",{className:"me-1",children:"Example:"}),"1.4"]}),(null===m||void 0===m||null===(s=m.data)||void 0===s?void 0:s.aperture)&&(0,i.jsx)("span",{className:"text-danger small",children:null===m||void 0===m||null===(r=m.data)||void 0===r?void 0:r.aperture})]})}),(0,i.jsxs)(n.JX,{md:"12",children:[(0,i.jsx)("div",{className:"border-line"}),(0,i.jsx)(n.cw,{children:(0,i.jsx)("h6",{children:"Camera Settings"})})]}),(0,i.jsx)(n.JX,{md:"6",children:(0,i.jsxs)(n.cw,{children:[(0,i.jsx)("label",{children:"ISO"}),(0,i.jsx)(n.II,{type:"number",name:"iso",value:null===u||void 0===u?void 0:u.iso,placeholder:"100",onChange:function(e){return c(e)}}),(0,i.jsxs)("span",{className:"d-block mt-1 opacity-75 ex-text",children:[(0,i.jsx)("b",{className:"me-1",children:"Example:"}),"100"]})]})}),(0,i.jsx)(n.JX,{md:"6",children:(0,i.jsxs)(n.cw,{children:[(0,i.jsx)("label",{children:"Shutter Speed (exposure time)"}),(0,i.jsx)(n.II,{type:"text",name:"shutter_speed",value:null===u||void 0===u?void 0:u.shutter_speed,placeholder:"1/15",maxLength:10,onChange:function(e){return c(e)}}),(0,i.jsxs)("span",{className:"d-block mt-1 opacity-75 ex-text",children:[(0,i.jsx)("b",{className:"me-1",children:"Example:"}),"1/15"]})]})}),(0,i.jsx)(n.JX,{md:"6",children:(0,i.jsxs)(n.cw,{children:[(0,i.jsx)("label",{children:"Frame Rate (frames per second)"}),(0,i.jsx)(n.II,{type:"number",name:"fps",value:null===u||void 0===u?void 0:u.fps,placeholder:"24",onChange:function(e){return c(e)}})]})}),(0,i.jsxs)(n.JX,{md:"12",children:[(0,i.jsx)("div",{className:"border-line"}),(0,i.jsxs)(n.cw,{children:[(0,i.jsx)("h6",{children:"How do you generally keep track of time?"}),(0,i.jsx)(n.II,{type:"text",name:"question_field_one",value:null===u||void 0===u?void 0:u.question_field_one,placeholder:"Camera Time",onChange:function(e){return c(e)}}),(0,i.jsxs)("span",{className:"d-block mt-1 opacity-75 ex-text",children:[(0,i.jsx)("b",{className:"me-1",children:"Example:"}),"Camera Time"]})]})]}),(0,i.jsxs)(n.JX,{md:"12",children:[(0,i.jsx)("div",{className:"border-line"}),(0,i.jsxs)(n.cw,{children:[(0,i.jsx)("h6",{children:"Do you use any special equipment attached to your camera (such as a filter)?"}),(0,i.jsx)(n.II,{type:"text",name:"question_field_two",value:null===u||void 0===u?void 0:u.question_field_two,placeholder:"Polarizing Filter",onChange:function(e){return c(e)}}),(0,i.jsxs)("span",{className:"d-block mt-1 opacity-75 ex-text",children:[(0,i.jsx)("b",{className:"me-1",children:"Example:"}),"Polarizing Filter"]})]})]})]})}},33151:function(e,a,t){t(22201);var n=t(7788),i=t(62711),l=t(80184);a.Z=function(e){var a=e.maxLimit,t=e.imageFormat,o=e.multiple,d=e.handleUploadImage,s=e.error,r=e.small,c=e.handleObvAdd,u=e.defaultUploadBox,m=e.blogUpload;return(0,l.jsxs)("div",{className:"position-relative",children:[(0,l.jsxs)("div",{className:"upload-image_wrapper ".concat(r?"small-upload_box mb-5":""," ").concat(m?"blog-upload-box":""),children:[(0,l.jsx)("div",{className:"upload-ob-inner",children:(0,l.jsxs)(n.cw,{children:[(0,l.jsx)(n.__,{htmlFor:"UploadFile",children:(0,l.jsxs)("div",{className:"upload-info",children:[(0,l.jsx)(i.JO,{icon:"bx:image-alt",color:"#737e96",width:"42",height:"42"}),(0,l.jsx)("p",{children:u?"Upload your first observation":"Drag and drop images or click to upload"}),a&&(0,l.jsx)("span",{className:"text-black",children:"Max. Image Size: 5MB"}),t&&(0,l.jsx)("ul",{children:(0,l.jsx)("li",{children:"Common Image File Formats (JPEG or JPG, PNG)"})})]})}),(0,l.jsx)(n.II,{type:"file",name:"file",id:"UploadFile",accept:"image/jpg, image/jpeg, image/png",multiple:o,onChange:function(e){return d(e)}})]})}),(null===s||void 0===s?void 0:s.count)&&(0,l.jsxs)("span",{className:"text-danger d-block small my-1 d-inline-block",children:[null===s||void 0===s?void 0:s.count," "]}),(null===s||void 0===s?void 0:s.size)&&(0,l.jsx)("span",{className:"text-danger d-block small my-1 d-inline-block",children:null===s||void 0===s?void 0:s.size}),(null===s||void 0===s?void 0:s.duplicate)&&(0,l.jsx)("span",{className:"text-info d-block small my-1 d-inline-block",children:null===s||void 0===s?void 0:s.duplicate})]}),u&&(0,l.jsx)("div",{className:"".concat(u?"mark-center":""),children:(0,l.jsxs)("button",{onClick:function(e){return c(e)},className:"btn btn-secondary",children:[(0,l.jsx)(i.JO,{icon:"heroicons-outline:upload",width:"25",height:"22"}),"Upload Observation"]})})]})}},57574:function(e,a,t){var n=t(70885),i=t(72791),l=t(80184);a.Z=function(e){var a=e.src,t=e.alt,o=e.imageClass,d=e.converted,s=(0,i.useState)(null),r=(0,n.Z)(s,2),c=r[0],u=r[1],m=(0,i.useState)(""),v=(0,n.Z)(m,2),h=v[0],x=v[1];return(0,i.useEffect)((function(){var e,t=!1;return h&&c!==a&&(IntersectionObserver?(e=new IntersectionObserver((function(n){n.forEach((function(n){!t&&(n.intersectionRatio>0||n.isIntersecting)&&(u(a),e.unobserve(h))}))}),{threshold:.01,rootMargin:"75%"})).observe(h):u(a)),function(){t=!0,e&&e.unobserve&&e.unobserve(h)}}),[a,c,h,d]),(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("img",{className:o?o+" img-fluid":"img-fluid",ref:x,src:c,alt:t,onLoad:function(e){e.target.classList.add("loaded")},onError:function(e){e.target.classList.add("has-error")}})})}},77849:function(e,a,t){var n=t(72791),i=t(63417);a.Z=function(){var e=(0,n.useContext)(i.ObservationContext).observationImages;return(0,n.useDebugValue)(e,(function(e){return null!==e&&void 0!==e&&e.data?"Images set":"Images not set"})),(0,n.useContext)(i.ObservationContext)}},17355:function(e,a,t){t.r(a),t.d(a,{default:function(){return K}});var n=t(74165),i=t(15861),l=t(4942),o=t(1413),d=t(70885),s=t(7788),r=t(72791),c=t(16871),u=t(77849),m=t(17834),v=t(94677),h=t(74551),x=t(74405),g=t(15671),p=t(43144),f=t(60136),_=t(29388),j=t(4224),b=t(83883),y=t(95568),N="AIzaSyCw7WvN7ql0sPh-9HhfJdzXhEiy2AgDGCQ",Z=t(80184);b.Z.setApiKey(N);var w=function(e){(0,f.Z)(t,e);var a=(0,_.Z)(t);function t(e){var n;return(0,g.Z)(this,t),(n=a.call(this,e)).getCity=function(e){for(var a=0;a<e.length;a++)if(e[a].types[0]&&"administrative_area_level_2"===e[a].types[0])return e[a].long_name},n.getCountry=function(e){var a=[];a.long_name="",a.short_name="";for(var t=0;t<e.length;t++)for(var n=0;n<e.length;n++)if(e[n].types[0]&&"country"===e[n].types[0])return a.long_name=e[n].long_name,a.short_name=e[n].short_name?e[n].short_name:"",a},n.getArea=function(e){for(var a=0;a<e.length;a++)if(e[a].types[0])for(var t=0;t<e[a].types.length;t++)if("sublocality_level_1"===e[a].types[t]||"locality"===e[a].types[t])return e[a].long_name},n.getState=function(e){for(var a=0;a<e.length;a++)for(var t=0;t<e.length;t++)if(e[t].types[0]&&"administrative_area_level_1"===e[t].types[0])return e[t].long_name},n.onChange=function(e){n.setState((0,l.Z)({},e.target.name,e.target.value))},n.onInfoWindowClose=function(e){},n.onMarkerDragEnd=function(e){var a=e.latLng.lat(),t=e.latLng.lng();b.Z.fromLatLng(a,t).then((function(e){var i=e.results[0].formatted_address,l=e.results[0].address_components,o=n.getCity(l),d=n.getArea(l),s=n.getState(l),r=n.getCountry(l).short_name,c=[o,s,n.getCountry(l).long_name].filter((function(e){return void 0!==e&&null!==e})).toString();n.setState({address:i||"",area:d||"",city:o||"",state:s||"",country:r||"",short_address:c||"",markerPosition:{lat:a,lng:t},mapPosition:{lat:a,lng:t}}),n.props.handleState(!0,n.state)}),(function(e){console.error(e)}))},n.onPlaceSelected=function(e){var a=e.formatted_address,t=e.address_components,i=n.getCity(t),l=n.getArea(t),o=n.getState(t),d=n.getCountry(t).short_name,s=[i,o,n.getCountry(t).long_name].filter((function(e){return void 0!==e&&null!==e})).toString(),r=e.geometry.location.lat(),c=e.geometry.location.lng();n.setState({address:a||"",area:l||"",city:i||"",state:o||"",country:d||"",short_address:s||"",markerPosition:{lat:r,lng:c},mapPosition:{lat:r,lng:c}}),n.props.handleState(!0,n.state)},n.country=null,n.address=null,n.state={address:"",city:"",area:"",state:"",countryCode:"",short_address:"",mapPosition:{lat:n.props.center.lat,lng:n.props.center.lng},markerPosition:{lat:n.props.center.lat,lng:n.props.center.lng}},n}return(0,p.Z)(t,[{key:"componentDidMount",value:function(){var e=this;b.Z.fromLatLng(this.state.mapPosition.lat,this.state.mapPosition.lng).then((function(a){var t=a.results[0].formatted_address,n=a.results[0].address_components,i=e.getCity(n),l=e.getArea(n),o=e.getState(n),d=e.getCountry(n).short_name,s=[i,o,e.getCountry(n).long_name].filter((function(e){return void 0!==e&&null!==e})).toString();console.log(s,"ffdf"),e.setState({address:t||"",area:l||"",city:i||"",state:o||"",country:d||"",short_address:s||"",markerPosition:{lat:e.state.mapPosition.lat,lng:e.state.mapPosition.lng},mapPosition:{lat:e.state.mapPosition.lat,lng:e.state.mapPosition.lng}}),e.country=d,e.address=s,a&&e.props.handleState(!1,[e.country,e.address])}),(function(e){console.error(e)}))}},{key:"handleChangeLatLng",value:function(e,a){var t=this;e=Number(e),a=Number(a),b.Z.fromLatLng(e,a).then((function(n){var i=n.results[0].formatted_address,l=n.results[0].address_components,o=t.getCity(l),d=t.getArea(l),s=t.getState(l),r=t.getCountry(l).short_name,c=[o,s,t.getCountry(l).long_name].filter((function(e){return void 0!==e&&null!==e})).toString();t.setState({address:i||"",area:d||"",city:o||"",state:s||"",country:r||"",short_address:c||"",markerPosition:{lat:e,lng:a},mapPosition:{lat:e,lng:a}}),t.props.handleState(!0,t.state)}),(function(e){console.error(e)}))}},{key:"shouldComponentUpdate",value:function(e,a){return this.state.markerPosition.lat!==this.props.center.lat||this.state.address!==a.address||this.state.city!==a.city||this.state.area!==a.area||this.state.state!==a.state||this.props.center.lat!==e.center.lat}},{key:"render",value:function(){var e=this,a=(0,j.OI)((function(a){return(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsxs)(j.b6,{google:e.props.google,defaultZoom:e.props.zoom,defaultCenter:{lat:e.state.mapPosition.lat,lng:e.state.mapPosition.lng},defaultOptions:{disableDefaultUI:!0},children:[(0,Z.jsx)(j.Jx,{google:e.props.google,name:"Dolores park",draggable:!0,onDragEnd:e.onMarkerDragEnd,position:{lat:e.state.markerPosition.lat,lng:e.state.markerPosition.lng}}),(0,Z.jsx)(j.Jx,{}),(0,Z.jsxs)("div",{className:"search-input-container",children:[(0,Z.jsx)(y.default,{style:{width:"100%"},className:"form-control bg-white ".concat(e.props.searchInputClass),onPlaceSelected:e.onPlaceSelected,types:["(regions)"],placeholder:"Type address"}),(0,Z.jsx)(j.nx,{onClose:e.onInfoWindowClose,position:{lat:e.state.markerPosition.lat+.0018,lng:e.state.markerPosition.lng},children:(0,Z.jsx)("div",{children:(0,Z.jsx)("span",{style:{padding:0,margin:0},children:e.state.short_address})})})]})]})})}));return void 0!==this.props.center.lat?(0,Z.jsx)("div",{children:(0,Z.jsx)(a,{googleMapURL:"https://maps.googleapis.com/maps/api/js?key=".concat(N,"&libraries=places"),loadingElement:(0,Z.jsx)("div",{style:{height:"100%"}}),containerElement:(0,Z.jsx)("div",{style:{height:this.props.height,position:this.props.containerPosition}}),mapElement:(0,Z.jsx)("div",{className:this.props.mapContainer,style:{height:"100%",borderRadius:this.props.mapRadius}})})}):(0,Z.jsx)("div",{style:{height:this.props.height}})}}]),t}(r.Component),k=t(61416),I=t(47604),C=t(9136),S=t(42982),J=t(62711),L=t(52815),O=t(1281),X=t(36652),P=function(e){var a=e.error,t=e.obvType,n=(0,m.Z)().auth,i=(0,u.Z)(),c=i.observationImages,v=i.setObservationImages,h=i.observationSteps,x=i.observationCategory,g=i.setObservationCategory,p=(0,r.useState)([]),f=(0,d.Z)(p,2),_=(f[0],f[1]),j=(0,r.useState)([]),b=(0,d.Z)(j,2),y=b[0],N=b[1],w=(0,r.useState)({}),k=(0,d.Z)(w,2),C=k[0],P=k[1],D=(0,r.useState)([]),z=(0,d.Z)(D,2),T=z[0],E=z[1],F=(0,o.Z)({},c),A=a?Object.values(null===a||void 0===a?void 0:a.data):{},q=(0,r.useState)(!1),M=(0,d.Z)(q,2),Q=M[0],U=M[1],R=(0,r.useRef)(),Y=function(e){var a=e.className,t=[{src:I.Z.card1},{src:I.Z.card2},{src:I.Z.card3}].map((function(e,a){return(0,Z.jsx)(L.o5,{children:(0,Z.jsx)("img",{src:e.src,alt:"carousel"})},a)}));return(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsx)(L.tq,{navigation:!0,modules:[O.W_],className:"className ".concat(a||""),children:t})})},B=function(){return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(s.Yt,{className:"bg-white",children:"What is sprite?"}),(0,Z.jsxs)(s.b,{className:"bg-white",children:[(0,Z.jsx)("p",{style:{"--line-clamb":!0===Q?"unset":"2"},children:"Sprites or red sprites are large-scale electric discharges that occur high above thunderstorm clouds, they appear as luminous reddish-orange flashes."}),(0,Z.jsx)(s.UO,{isOpen:Q,children:(0,Z.jsx)(Y,{className:"popover-carousel"})}),(0,Z.jsx)(s.zx,{className:"bg-transparent p-0 border-0 text-secondary shadow-none d-block",onClick:function(){return U(!Q)},children:!0===Q?"Show less":"Show more"})]})]})};return(0,r.useEffect)((function(){N(null===n||void 0===n?void 0:n.categoryList)}),[]),(0,r.useEffect)((function(){!function(){var e=[];null===y||void 0===y||y.map((function(a,t){var n="/assets/images/category/".concat(null===a||void 0===a?void 0:a.name.toLowerCase().replaceAll(" ",""),".png");return a.image=n,e.push(a),!0})),_(e),g((function(a){return(0,o.Z)((0,o.Z)({},a),{},{data:e})}))}()}),[y]),(0,r.useEffect)((function(){var e,a,t=(null===(e=F.data[null===c||void 0===c?void 0:c.selected_image_index])||void 0===e||null===(a=e.category_map)||void 0===a?void 0:a.category)||[];E(t)}),[F.data,null===c||void 0===c?void 0:c.selected_image_index]),(0,r.useEffect)((function(){(null===c||void 0===c?void 0:c.selected_image_index)===[]&&E([])}),[null===c||void 0===c?void 0:c.selected_image_index]),(0,r.useEffect)((function(){var e;3===(null===t||void 0===t?void 0:t.image_type)?null===c||void 0===c||null===(e=c.data)||void 0===e||e.map((function(e,a){return e.category_map.category=T})):F.data[null===c||void 0===c?void 0:c.selected_image_index].category_map.category=T}),[T]),(0,Z.jsxs)(Z.Fragment,{children:[a&&(null===A||void 0===A?void 0:A.map((function(e,a){return(null===h||void 0===h?void 0:h.selected_image_index)!==a||(0,Z.jsx)("span",{className:"text-danger small",children:null===e||void 0===e?void 0:e.category},a)}))),(0,Z.jsx)(s.cw,{className:"mb-1",children:(0,Z.jsxs)("p",{className:"fw-bold",children:["Please choose the appropriate category",(0,Z.jsx)("span",{className:"required",children:"Required"})]})}),(0,Z.jsx)(s.X2,{children:function(){var e;return null===c||void 0===c||null===(e=c.data)||void 0===e?void 0:e.filter((function(e){return e.id===(null===c||void 0===c?void 0:c.selected_image_id)})).map((function(e,a){var t;return null===x||void 0===x||null===(t=x.data)||void 0===t?void 0:t.map((function(a,t){var n,i;return(0,Z.jsx)(s.JX,{sm:6,children:(0,Z.jsx)(s.cw,{children:(0,Z.jsx)("div",{className:"checkbox-wrapper",children:(0,Z.jsxs)("div",{className:"inputGroup",children:[(0,Z.jsx)("input",{value:a.name||"",name:a.id,id:a.id,type:"checkbox",checked:(null===e||void 0===e||null===(n=e.category_map)||void 0===n||null===(i=n.category)||void 0===i?void 0:i.find((function(e){return e===(null===a||void 0===a?void 0:a.id)})))===(null===a||void 0===a?void 0:a.id)?"checked":"",hidden:!0,onChange:function(e){return function(e){var a=parseFloat(e.target.id);if(P((0,o.Z)((0,o.Z)({},C),{},(0,l.Z)({},e.target.name,e.target.checked))),T.includes(a)){var t=T.filter((function(e){return e!==a}));E(t)}else E([].concat((0,S.Z)(T),[a]));v(F)}(e)}}),(0,Z.jsxs)("label",{htmlFor:a.id,children:[(0,Z.jsx)("img",{src:"".concat(a.image),alt:a.name}),a.name,(0,Z.jsx)("div",{className:"ms-2 text-dark ",children:(0,Z.jsx)(X.ZP,{content:(0,Z.jsx)(B,{}),interactive:!0,appendTo:document.body,animation:"perspective",theme:"light-border",reference:R,children:(0,Z.jsx)("span",{ref:R,children:(0,Z.jsx)(J.JO,{icon:"charm:info",color:"#adb4c2",width:"15",height:"15"})})})})]})]})})})},t)}))}))}()})]})},D=t(72426),z=t.n(D),T=function(e){var a,t,n,i,c,m,v,h,g,p,f,_,j,b,y,N,S,L,O,X,D,T,E,F,A,q,M,Q,U,R,Y,B,W,G,H,K,V=e.toggleTab,$=e.handleImageInput,ee=e.error,ae=e.step,te=e.obvType,ne=e.disableNext,ie=(0,r.useRef)(),le=(0,r.useState)({address:"",city:"",area:"",state:"",country:"IN",short_address:"Pune Maharastra Indias",mapPosition:{lat:null,lng:null},markerPosition:{lat:null,lng:null}}),oe=(0,d.Z)(le,2),de=oe[0],se=oe[1],re=(0,r.useState)({country:"",short_address:"",lat:null,lng:null}),ce=(0,d.Z)(re,2),ue=ce[0],me=ce[1],ve=(0,r.useState)(!1),he=(0,d.Z)(ve,2),xe=he[0],ge=he[1],pe=(0,u.Z)(),fe=pe.observationImages,_e=pe.setObservationImages,je=pe.observationData,be=(0,r.useState)(null),ye=(0,d.Z)(be,2),Ne=ye[0],Ze=ye[1],we=(0,r.useState)(!1),ke=(0,d.Z)(we,2),Ie=ke[0],Ce=ke[1],Se=(0,r.useState)(!1),Je=(0,d.Z)(Se,2),Le=Je[0],Oe=Je[1],Xe=(0,r.useState)(""),Pe=(0,d.Z)(Xe,2),De=Pe[0],ze=Pe[1],Te=(0,r.useState)(!1),Ee=(0,d.Z)(Te,2),Fe=(Ee[0],Ee[1]),Ae=(0,r.useState)(!1),qe=(0,d.Z)(Ae,2),Me=qe[0],Qe=qe[1];(0,r.useEffect)((function(){var e,a,t;null!==fe&&void 0!==fe&&fe.data&&!1===(null===fe||void 0===fe||null===(e=fe.data[null===fe||void 0===fe?void 0:fe.selected_image_index])||void 0===e?void 0:e.sameAsFirstMap)&&ie.current.handleChangeLatLng(null===fe||void 0===fe||null===(a=fe.data[null===fe||void 0===fe?void 0:fe.selected_image_index])||void 0===a?void 0:a.latitude,null===fe||void 0===fe||null===(t=fe.data[null===fe||void 0===fe?void 0:fe.selected_image_index])||void 0===t?void 0:t.longitude)}),[null===fe||void 0===fe||null===(a=fe.data)||void 0===a?void 0:a[null===fe||void 0===fe?void 0:fe.selected_image_index],null===fe||void 0===fe?void 0:fe.selected_image_index]),(0,r.useEffect)((function(){var e,a;null!==fe&&void 0!==fe&&fe.data&&0!==(null===fe||void 0===fe?void 0:fe.selected_image_index)&&(Re(null===fe||void 0===fe||null===(e=fe.data[null===fe||void 0===fe?void 0:fe.selected_image_index])||void 0===e?void 0:e.sameAsFirstMap,["latitude","longitude","location","country_code"]),Re(null===fe||void 0===fe||null===(a=fe.data[null===fe||void 0===fe?void 0:fe.selected_image_index])||void 0===a?void 0:a.sameAsFirstDate,["obs_date","obs_time","timezone"]))}),[null===fe||void 0===fe?void 0:fe.selected_image_index]);var Ue=(0,o.Z)({},fe);(0,r.useEffect)((function(){var e=(0,o.Z)({},fe);if(null!==e&&void 0!==e&&e.data){(0,o.Z)({},de);e.data[e.selected_image_index].location=null===de||void 0===de?void 0:de.short_address,e.data[e.selected_image_index].country_code=null===de||void 0===de?void 0:de.country,3===(null===je||void 0===je?void 0:je.image_type)&&(e.data[1]&&(e.data[1].location=null===de||void 0===de?void 0:de.short_address,e.data[1].country_code=null===de||void 0===de?void 0:de.country),e.data[2]&&(e.data[2].location=null===de||void 0===de?void 0:de.short_address,e.data[2].country_code=null===de||void 0===de?void 0:de.country)),_e(e)}}),[de]),(0,r.useEffect)((function(){var e=(0,o.Z)({},fe);null!==e&&void 0!==e&&e.data&&(3===(null===je||void 0===je?void 0:je.image_type)&&(e.data[1]&&(e.data[1].location=e.data[0].location,e.data[1].country_code=e.data[0].country_code),e.data[2]&&(e.data[2].location=e.data[0].location,e.data[2].country_code=e.data[0].country_code)),_e(e))}),[null===je||void 0===je?void 0:je.image_type]);var Re=function(e,a){if(fe){var t=(0,o.Z)({},fe);a.includes("location","latitude","longitude","country_code")&&(Fe(e),t.data[null===fe||void 0===fe?void 0:fe.selected_image_index].sameAsFirstMap=e),a.includes("obs_time","obs_date","timezone")&&(Qe(e),t.data[null===fe||void 0===fe?void 0:fe.selected_image_index].sameAsFirstDate=e),_e(t);var n=(0,o.Z)({},fe);a.map((function(t){return e?n.data[null===n||void 0===n?void 0:n.selected_image_index][t]=n.data[0][t]:3!==(null===je||void 0===je?void 0:je.image_type)&&(n.data[null===n||void 0===n?void 0:n.selected_image_index][t]="obs_time"===t||"obs_date"===t?null:"",a.includes("location","latitude","longitude")&&(n.data[null===n||void 0===n?void 0:n.selected_image_index].latitude=ue.lat,n.data[null===n||void 0===n?void 0:n.selected_image_index].longitude=ue.lng,n.data[null===n||void 0===n?void 0:n.selected_image_index].location=ue.short_address,n.data[null===n||void 0===n?void 0:n.selected_image_index].country_code=ue.country)),!1})),_e(n)}};(0,r.useEffect)((function(){!1===Le&&ze("")}),[Le]);var Ye=ee?Object.values(null===ee||void 0===ee?void 0:ee.data):{};return(0,r.useEffect)((function(){var e,a=null===fe||void 0===fe||null===(e=fe.data)||void 0===e?void 0:e[0].id;3===(null===te||void 0===te?void 0:te.image_type)&&2===ae.active&&_e((function(e){return(0,o.Z)((0,o.Z)({},e),{},{selected_image_id:a,selected_image_index:0})}))}),[null===fe||void 0===fe?void 0:fe.data,null===te||void 0===te?void 0:te.image_type,_e,ae.active]),(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(s.JX,{md:"12",children:(0,Z.jsxs)(s.cw,{children:[(0,Z.jsxs)(s.X2,{children:[(0,Z.jsx)(s.JX,{xxl:7,className:"order-2 order-xxl-1",children:(0,Z.jsxs)("h6",{children:["Where did you make the observation? ",(0,Z.jsx)("span",{className:"required",children:"Required"})]})}),0!==(null===fe||void 0===fe?void 0:fe.selected_image_index)&&2===(null===je||void 0===je?void 0:je.image_type)&&(0,Z.jsx)(s.JX,{xxl:5,className:"order-1 order-xxl-2 mb-2 mb-xxl-0",children:(0,Z.jsx)(s.cw,{children:(0,Z.jsxs)(s.__,{check:!0,className:"mb-0 justify-content-end",children:[(0,Z.jsx)(s.II,{type:"checkbox",name:"Same as the first image",checked:null===fe||void 0===fe||null===(t=fe.data[null===fe||void 0===fe?void 0:fe.selected_image_index])||void 0===t?void 0:t.sameAsFirstMap,onChange:function(e){return Re(e.target.checked,["latitude","longitude","location","country_code"])},className:"me-2 mt-0"}),"Same as the first image"]})})})]}),null!==fe&&void 0!==fe&&fe.data&&!1===(null===fe||void 0===fe||null===(n=fe.data[null===fe||void 0===fe?void 0:fe.selected_image_index])||void 0===n?void 0:n.sameAsFirstMap)||0===(null===fe||void 0===fe?void 0:fe.selected_image_index)?(0,Z.jsx)("div",{className:"location_map",children:(0,Z.jsx)(w,{google:e.google,center:{lat:Number(null!==fe&&void 0!==fe&&fe.data?null===fe||void 0===fe||null===(i=fe.data[null===fe||void 0===fe?void 0:fe.selected_image_index])||void 0===i?void 0:i.latitude:null===de||void 0===de||null===(c=de.markerPosition)||void 0===c?void 0:c.lat),lng:Number(null!==fe&&void 0!==fe&&fe.data?null===fe||void 0===fe||null===(m=fe.data[null===fe||void 0===fe?void 0:fe.selected_image_index])||void 0===m?void 0:m.longitude:null===de||void 0===de||null===(v=de.markerPosition)||void 0===v?void 0:v.lng)},height:"100%",containerPosition:"relative",mapRadius:"10px",zoom:15,handleState:function(e,a){if(e){if(se(a),null!==fe&&void 0!==fe&&fe.data){var t=(0,o.Z)({},fe);null!==t&&void 0!==t&&t.data&&(t.data[t.selected_image_index].latitude=a.markerPosition.lat,t.data[t.selected_image_index].longitude=a.markerPosition.lng,t.data[t.selected_image_index].location=a.short_address,t.data[t.selected_image_index].country_code=a.country,3===(null===je||void 0===je?void 0:je.image_type)&&(t.data[1]&&(t.data[1].latitude=a.markerPosition.lat,t.data[1].longitude=a.markerPosition.lng,t.data[1].location=a.short_address,t.data[1].country_code=a.country),t.data[2]&&(t.data[2].latitude=a.markerPosition.lat,t.data[2].longitude=a.markerPosition.lng,t.data[2].location=a.short_address,t.data[2].country_code=a.country)),_e(t))}}else{var n,i,l=(0,o.Z)({},de);if(l.country_code=a[0],l.short_address=a[1],me({country:a[0],address:a[1],lat:Number(null!==fe&&void 0!==fe&&fe.data?null===fe||void 0===fe||null===(n=fe.data[null===fe||void 0===fe?void 0:fe.selected_image_index])||void 0===n?void 0:n.latitude:null),lng:Number(null!==fe&&void 0!==fe&&fe.data?null===fe||void 0===fe||null===(i=fe.data[null===fe||void 0===fe?void 0:fe.selected_image_index])||void 0===i?void 0:i.longitude:null)}),se(l),null!==fe&&void 0!==fe&&fe.data){var d=(0,o.Z)({},fe);null!==d&&void 0!==d&&d.data&&(d.data[d.selected_image_index].location=a[1],d.data[d.selected_image_index].country_code=a[0],3===(null===je||void 0===je?void 0:je.image_type)&&(d.data[1]&&(d.data[1].location=a[1],d.data[1].country_code=a[0]),d.data[2]&&(d.data[2].location=a[1],d.data[2].country_code=a[0])),_e(d))}}},isLoaded:xe,mapContainer:"map-search-container",searchInputClass:"search-input-class",ref:ie})}):(0,Z.jsx)("div",{className:"border same-data_row",children:(0,Z.jsxs)(s.X2,{children:[(0,Z.jsx)(s.JX,{lg:6,children:(0,Z.jsxs)(s.X2,{className:"flex-nowrap",children:[(0,Z.jsx)("div",{className:"border-end w-auto",children:(0,Z.jsxs)(s.cw,{className:"form-group d-flex align-items-center",children:[(0,Z.jsx)(s.__,{className:"form-label text-uppercase mb-0 me-2",htmlFor:"LAT",children:"LAT"}),(0,Z.jsx)("span",{className:"fw-bold text-truncate data-value",children:null!==fe&&void 0!==fe&&fe.data?null===fe||void 0===fe||null===(h=fe.data[null===fe||void 0===fe?void 0:fe.selected_image_index])||void 0===h?void 0:h.latitude:null===de||void 0===de||null===(g=de.markerPosition)||void 0===g?void 0:g.lat})]})}),(0,Z.jsx)("div",{className:"w-auto",children:(0,Z.jsxs)(s.cw,{className:"form-group d-flex align-items-center",children:[(0,Z.jsx)(s.__,{className:"form-label text-uppercase mb-0 me-2",htmlFor:"LON",children:"LON"}),(0,Z.jsx)("span",{className:"fw-bold text-truncate data-value",children:null!==fe&&void 0!==fe&&fe.data?null===fe||void 0===fe||null===(p=fe.data[null===fe||void 0===fe?void 0:fe.selected_image_index])||void 0===p?void 0:p.longitude:null===de||void 0===de||null===(f=de.markerPosition)||void 0===f?void 0:f.lng})]})})]})}),(0,Z.jsx)(s.JX,{lg:6,children:(0,Z.jsxs)("div",{className:"selected-address d-block d-lg-flex align-items-center justify-content-start justify-content-lg-end mt-2 mt-lg-0",children:[(0,Z.jsx)(k.Z,{country:null!==fe&&void 0!==fe&&fe.data?null===fe||void 0===fe||null===(_=fe.data[null===fe||void 0===fe?void 0:fe.selected_image_index])||void 0===_?void 0:_.country_code:null===de||void 0===de?void 0:de.country_code}),(0,Z.jsx)("span",{children:null!==fe&&void 0!==fe&&fe.data?null===fe||void 0===fe||null===(j=fe.data[null===fe||void 0===fe?void 0:fe.selected_image_index])||void 0===j?void 0:j.location:""})]})})]})})]})}),((null===fe||void 0===fe?void 0:fe.data)&&!1===(null===fe||void 0===fe||null===(b=fe.data[null===fe||void 0===fe?void 0:fe.selected_image_index])||void 0===b?void 0:b.sameAsFirstMap)||0===(null===fe||void 0===fe?void 0:fe.selected_image_index))&&(0,Z.jsxs)(s.JX,{md:12,className:"mb-5",children:[(0,Z.jsx)("h6",{children:"If you know the precise coordinates of your observation location, please enter below"}),(0,Z.jsxs)(s.X2,{children:[(0,Z.jsx)(s.JX,{md:6,lg:4,children:(0,Z.jsxs)(s.cw,{className:"d-flex",children:[(0,Z.jsx)(s.__,{className:"form-label text-uppercase me-1",htmlFor:"LAT",sm:2,children:"LAT"}),(0,Z.jsx)(s.JX,{sm:10,children:(0,Z.jsx)(s.II,{value:null!==fe&&void 0!==fe&&fe.data?null===fe||void 0===fe||null===(y=fe.data[null===fe||void 0===fe?void 0:fe.selected_image_index])||void 0===y?void 0:y.latitude:null===de||void 0===de||null===(N=de.markerPosition)||void 0===N?void 0:N.lat,id:"LAT",type:"number",name:"latitude",placeholder:"Edmon, OK, USA",onChange:function(e){$(e),function(e){$(e),e.target.name;var a=Number(e.target.value),t=(0,o.Z)({},de);t.mapPosition.lat=a,t.markerPosition.lat=a,se(t),ge(!0),ie.current.handleChangeLatLng(e.target.value,de.markerPosition.lng)}(e)}})})]})}),(0,Z.jsx)(s.JX,{md:6,lg:4,children:(0,Z.jsxs)(s.cw,{className:"d-flex",children:[(0,Z.jsx)(s.__,{className:"form-label text-uppercase me-1",htmlFor:"LON",sm:2,children:"LON"}),(0,Z.jsx)(s.JX,{sm:10,children:(0,Z.jsx)(s.II,{value:null!==fe&&void 0!==fe&&fe.data?null===fe||void 0===fe||null===(S=fe.data[null===fe||void 0===fe?void 0:fe.selected_image_index])||void 0===S?void 0:S.longitude:null===de||void 0===de||null===(L=de.markerPosition)||void 0===L?void 0:L.lng,id:"LON",type:"number",name:"longitude",placeholder:"Edmon, OK, USA",onChange:function(e){$(e),function(e){$(e),e.target.name;var a=Number(e.target.value),t=(0,o.Z)({},de);t.mapPosition.lng=a,t.markerPosition.lng=a,se(t),ge(!0),ie.current.handleChangeLatLng(de.markerPosition.lat,e.target.value)}(e)}})})]})}),(0,Z.jsx)(s.JX,{md:6,lg:4,children:(0,Z.jsxs)("div",{className:"selected-address pb-0 pb-lg-3 d-flex align-items-center justify-content-start justify-content-lg-end",children:[(0,Z.jsx)(k.Z,{country:null!==fe&&void 0!==fe&&fe.data?null===fe||void 0===fe||null===(O=fe.data[null===fe||void 0===fe?void 0:fe.selected_image_index])||void 0===O?void 0:O.country_code:null}),(0,Z.jsx)("span",{children:null!==fe&&void 0!==fe&&fe.data?null===fe||void 0===fe||null===(X=fe.data[null===fe||void 0===fe?void 0:fe.selected_image_index])||void 0===X?void 0:X.location:""})]})})]})]}),3===(null===je||void 0===je?void 0:je.image_type)&&(0,Z.jsx)(s.X2,{className:"mb-4",children:(0,Z.jsx)(P,{obvType:te,error:ee})}),(0,Z.jsxs)(s.JX,{md:12,className:"mb-5",children:[(0,Z.jsxs)(s.X2,{children:[(0,Z.jsx)(s.JX,{xxl:7,className:"order-2 order-xxl-1",children:(0,Z.jsxs)("h6",{children:["Please enter date and time for your observation ",(0,Z.jsx)("span",{className:"required",children:"Required"})]})}),0!==(null===fe||void 0===fe?void 0:fe.selected_image_index)&&2===(null===je||void 0===je?void 0:je.image_type)&&(0,Z.jsx)(s.JX,{xxl:5,className:"order-1 order-xxl-2 mb-2 mb-xxl-0",children:(0,Z.jsx)(s.cw,{children:(0,Z.jsxs)(s.__,{check:!0,className:"mb-0 justify-content-end",children:[(0,Z.jsx)(s.II,{type:"checkbox",name:"Same as the first image",checked:Me,onChange:function(e){return Re(e.target.checked,["obs_date","obs_time","timezone"])},className:"me-2 mt-0"}),"Same as the first image"]})})})]}),null!==fe&&void 0!==fe&&fe.data&&!1===(null===fe||void 0===fe||null===(D=fe.data[null===fe||void 0===fe?void 0:fe.selected_image_index])||void 0===D?void 0:D.sameAsFirstDate)||0===(null===fe||void 0===fe?void 0:fe.selected_image_index)?(0,Z.jsxs)(s.X2,{children:[(0,Z.jsx)(s.JX,{md:6,lg:4,children:(0,Z.jsxs)(s.cw,{children:[(0,Z.jsx)(s.__,{className:"text-uppercase",htmlFor:"Date",children:"Date"}),(0,Z.jsx)("div",{className:"position-relative",children:(0,Z.jsx)(s.II,(F={id:"Date",type:"date",max:z()(new Date).format("Y-MM-DD"),name:"obs_date"},(0,l.Z)(F,"max",z()(new Date).format("Y-MM-DD")),(0,l.Z)(F,"value",null!==fe&&void 0!==fe&&fe.data?null===(null===fe||void 0===fe||null===(T=fe.data[null===fe||void 0===fe?void 0:fe.selected_image_index])||void 0===T?void 0:T.obs_date)?"dd/mm/yyyy":null===fe||void 0===fe||null===(E=fe.data[null===fe||void 0===fe?void 0:fe.selected_image_index])||void 0===E?void 0:E.obs_date:"dd/mm/yyyy"),(0,l.Z)(F,"className","w-100"),(0,l.Z)(F,"placeholder","12/20/2021"),(0,l.Z)(F,"onChange",(function(e){return $(e)})),F))}),ee&&(null===Ye||void 0===Ye?void 0:Ye.map((function(e,a){return(null===ae||void 0===ae?void 0:ae.selected_image_index)!==a||(0,Z.jsx)("span",{className:"text-danger small",children:null===e||void 0===e?void 0:e.obs_date},a)})))]})}),(0,Z.jsx)(s.JX,{md:6,lg:4,children:(0,Z.jsxs)(s.cw,{children:[(0,Z.jsx)(s.__,{className:"text-uppercase",htmlFor:"Time",children:"Time"}),(0,Z.jsx)("div",{className:"position-relative",children:(0,Z.jsx)(s.II,{id:"Time",type:"time",name:"obs_time",value:null!==fe&&void 0!==fe&&fe.data?null===(null===fe||void 0===fe||null===(A=fe.data[null===fe||void 0===fe?void 0:fe.selected_image_index])||void 0===A?void 0:A.obs_time)?"--:--":null===fe||void 0===fe||null===(q=fe.data[null===fe||void 0===fe?void 0:fe.selected_image_index])||void 0===q?void 0:q.obs_time:"",className:"w-100",placeholder:"10:21:00 am",onChange:function(e){return $(e)}})}),ee&&(null===Ye||void 0===Ye?void 0:Ye.map((function(e,a){return(null===ae||void 0===ae?void 0:ae.selected_image_index)!==a||(0,Z.jsx)("span",{className:"text-danger small",children:null===e||void 0===e?void 0:e.obs_time},a)})))]})}),(0,Z.jsx)(s.JX,{md:6,lg:4,children:(0,Z.jsxs)(s.cw,{children:[(0,Z.jsx)(s.__,{className:"text-uppercase",htmlFor:"TIME ZONE",children:"TIME ZONE"}),(0,Z.jsxs)(s.Lt,{className:"dropdown-with-search",toggle:function(){return Oe(!Le)},isOpen:Le,children:[(0,Z.jsxs)(s.Z_,{className:"px-3 shadow-none border-0 text-black fw-normal text-start d-flex justify-content-between align-items-center w-100",children:[(0,Z.jsx)("span",{className:"text-truncate",children:null!==fe&&void 0!==fe&&fe.data?"".concat(null===fe||void 0===fe||null===(M=fe.data[null===fe||void 0===fe?void 0:fe.selected_image_index])||void 0===M?void 0:M.timezone):""}),(0,Z.jsx)(J.JO,{icon:"fe:arrow-down",className:"down-arrow ms-1"})]}),(0,Z.jsxs)(s.h_,{className:"py-0 shadow",children:[(0,Z.jsx)(s.hP,{header:!0,className:"mb-0 position-sticky start-0 top-0 end-0 p-2 bg-white",children:(0,Z.jsx)(s.II,{type:"text",className:"p-2",onChange:function(e){return function(e){var a=e.target.value.toLowerCase();ze(a)}(e)},placeholder:"Search Timezone"})}),null===C.Dg||void 0===C.Dg?void 0:C.Dg.filter((function(e){return-1!==e.toLowerCase().indexOf(De.toLowerCase())})).map((function(e,a){return(0,Z.jsx)(s.hP,{name:"timezone",className:"px-2 fw-normal",value:e,onClick:function(e){return $(e)},children:e},a)}))]})]}),ee&&(null===Ye||void 0===Ye?void 0:Ye.map((function(e,a){return(null===ae||void 0===ae?void 0:ae.selected_image_index)!==a||(0,Z.jsx)("span",{className:"text-danger small",children:null===e||void 0===e?void 0:e.timezone},a)})))]})})]}):(0,Z.jsx)("div",{className:"border same-data_row",children:(0,Z.jsxs)(s.X2,{children:[(0,Z.jsx)(s.JX,{lg:6,children:(0,Z.jsxs)(s.X2,{className:"flex-nowrap",children:[(0,Z.jsx)("div",{className:"border-end w-auto",children:(0,Z.jsxs)(s.cw,{className:"form-group d-flex align-items-center",children:[(0,Z.jsx)(s.__,{className:"form-label text-uppercase mb-0 me-2",htmlFor:"Date",children:"Date"}),(0,Z.jsx)("span",{className:"fw-bold text-truncate data-value",children:null!==fe&&void 0!==fe&&fe.data?null===(null===fe||void 0===fe||null===(Q=fe.data[null===fe||void 0===fe?void 0:fe.selected_image_index])||void 0===Q?void 0:Q.obs_date)?"dd/mm/yyyy":null===fe||void 0===fe||null===(U=fe.data[null===fe||void 0===fe?void 0:fe.selected_image_index])||void 0===U?void 0:U.obs_date:"dd/mm/yyyy"})]})}),(0,Z.jsx)("div",{className:"w-auto",children:(0,Z.jsxs)(s.cw,{className:"form-group d-flex align-items-center",children:[(0,Z.jsx)(s.__,{className:"form-label text-uppercase mb-0 me-2",htmlFor:"Time",children:"Time"}),(0,Z.jsx)("span",{className:"fw-bold text-truncate data-value",children:null!==fe&&void 0!==fe&&fe.data?null===(null===fe||void 0===fe||null===(R=fe.data[null===fe||void 0===fe?void 0:fe.selected_image_index])||void 0===R?void 0:R.obs_time)?"--:--":null===fe||void 0===fe||null===(Y=fe.data[null===fe||void 0===fe?void 0:fe.selected_image_index])||void 0===Y?void 0:Y.obs_time:""})]})})]})}),(0,Z.jsx)(s.JX,{lg:6,children:(0,Z.jsx)("div",{className:"selected-address mt-2 mt-lg-0 text-end d-block",children:(0,Z.jsx)("span",{className:"opacity-75",children:null!==fe&&void 0!==fe&&fe.data?"".concat(null===fe||void 0===fe||null===(B=fe.data[null===fe||void 0===fe?void 0:fe.selected_image_index])||void 0===B?void 0:B.timezone):""})})})]})})]}),(0,Z.jsxs)(s.JX,{md:12,className:"mb-5",children:[(0,Z.jsx)("h6",{children:"How accurate is your timing?"}),(0,Z.jsxs)(s.cw,{children:[(0,Z.jsx)(s.__,{className:"text-uppercase",htmlFor:"Date",children:"Uncertainty in Time"}),(0,Z.jsx)(s.II,{id:"Date",type:"text",name:"time_accuracy",value:null!==fe&&void 0!==fe&&fe.data?null===fe||void 0===fe||null===(W=fe.data[null===fe||void 0===fe?void 0:fe.selected_image_index])||void 0===W?void 0:W.time_accuracy:"",placeholder:"e.g. +/- 3 sec  or  +/- 1 min",className:"w-100",onChange:function(e){return $(e)}}),(0,Z.jsxs)("span",{className:"d-block mt-1 opacity-75 ex-text",children:[(0,Z.jsx)("b",{className:"me-1",children:"Example:"})," +/- 3 sec  or  +/- 1 min"]})]})]}),(0,Z.jsxs)(s.JX,{md:12,className:"mb-5",children:[ee&&(null===Ye||void 0===Ye?void 0:Ye.map((function(e,a){return(null===ae||void 0===ae?void 0:ae.selected_image_index)!==a||(0,Z.jsx)("span",{className:"text-danger small",children:null===e||void 0===e?void 0:e.azimuth},a)}))),(0,Z.jsx)(s.cw,{className:"d-flex align-items-center position-relative mb-4 pb-3",children:(0,Z.jsxs)("div",{className:"custom-switch",children:[(0,Z.jsx)("input",{id:"checkbox2",type:"checkbox",name:"is_precise_azimuth",checked:Ie,className:"hidden",onChange:function(e){return $(e)},onClick:function(){return Ce(!Ie)}}),(0,Z.jsx)("label",{className:"switchbox",htmlFor:"checkbox2"}),(0,Z.jsx)("span",{children:"I know the precise azimuth angle in degrees"})]})}),!1===Ie&&(null!==fe&&void 0!==fe&&fe.data&&0===(null===fe||void 0===fe||null===(G=fe.data[null===fe||void 0===fe?void 0:fe.selected_image_index])||void 0===G?void 0:G.is_precise_azimuth)||null!==fe&&void 0!==fe&&fe.data&&!1===(null===fe||void 0===fe||null===(H=fe.data[null===fe||void 0===fe?void 0:fe.selected_image_index])||void 0===H?void 0:H.is_precise_azimuth))?(0,Z.jsxs)(s.cw,{children:[(0,Z.jsx)(s.__,{className:"justify-content-center mb-3 text-uppercase",children:"Look Direction"}),(0,Z.jsxs)("div",{className:"compass-wrapper",children:[null===x.Nn||void 0===x.Nn?void 0:x.Nn.map((function(e,a){return(0,Z.jsxs)(s.zx,{className:"".concat(e.name,"-direction ").concat((0,x.to)(Number(Ue.data[null===fe||void 0===fe?void 0:fe.selected_image_index].azimuth))===e.name?"active_direction":""),onClick:function(){return function(e){var a,t,n=document.querySelector(".compass-wrapper"),i=document.getElementById("directionValue".concat(e)).getAttribute("data-name");Ne===e?n.classList.remove("active-arrow"):(n.classList.add("active-arrow"),Ze(e),0!==(null===fe||void 0===fe||null===(a=fe.data[null===fe||void 0===fe?void 0:fe.selected_image_index])||void 0===a?void 0:a.is_precise_azimuth)&&!1!==(null===fe||void 0===fe||null===(t=fe.data[null===fe||void 0===fe?void 0:fe.selected_image_index])||void 0===t?void 0:t.is_precise_azimuth)||(Ue.data[null===fe||void 0===fe?void 0:fe.selected_image_index].azimuth=(0,x.ZQ)(i),3===(null===je||void 0===je?void 0:je.image_type)&&(Ue.data[1]&&(Ue.data[1].azimuth=(0,x.ZQ)(i)),Ue.data[2]&&(Ue.data[2].azimuth=(0,x.ZQ)(i))))),_e(Ue)}(a)},id:"directionValue".concat(a),"data-angle":e.angle,"data-name":e.name,children:[(0,Z.jsx)("span",{className:"d-block",children:e.name}),(0,Z.jsxs)("span",{className:"d-block direction-angle",children:[e.angle,"\xb0"]})]},a)})),(0,Z.jsx)("div",{className:"center-dot rounded-circle"}),(0,Z.jsx)("div",{className:"rotate-arrow-wrap",children:(0,Z.jsxs)("div",{className:"rotate-arrow-inner",style:{"--directionAngle":x.Nn.filter((function(e){return e.name===(0,x.to)(Number(Ue.data[null===fe||void 0===fe?void 0:fe.selected_image_index].azimuth))})).map((function(e){return e.angle}))+"deg"},children:[(0,Z.jsxs)("div",{className:"rotate-arrow main",children:[(0,Z.jsx)("img",{src:I.Z.compassArrow,alt:"Compass Arrow"})," "]}),(0,Z.jsxs)("div",{className:"rotate-arrow hidden",children:[(0,Z.jsx)("img",{src:I.Z.compassArrow,alt:"Compass Arrow"})," "]})]})})]})]}):(0,Z.jsxs)(s.cw,{children:[(0,Z.jsx)(s.__,{htmlFor:"Azimuth",children:"Azimuth Angle"}),(0,Z.jsx)(s.II,{id:"Azimuth",type:"number",min:0,max:360,name:"azimuth",value:null!==fe&&void 0!==fe&&fe.data?null===fe||void 0===fe||null===(K=fe.data[null===fe||void 0===fe?void 0:fe.selected_image_index])||void 0===K?void 0:K.azimuth:"",placeholder:"120\xb0",className:"degree-input",onChange:function(e){return $(e)}}),(0,Z.jsxs)("span",{className:"d-block mt-1 opacity-75 ex-text",children:[(0,Z.jsx)("b",{className:"me-1",children:"Example:"})," 120\xb0"]})]}),(0,Z.jsxs)(s.cw,{className:"mt-5",children:[(0,Z.jsx)(s.zx,{className:"gray-outline-btn me-2",onClick:function(){return V(x.mQ.ObservationImages)},children:"Back"}),(0,Z.jsx)(s.zx,{className:"",onClick:function(){return V(x.mQ.EquipmentDetails)},disabled:!ne,children:"Continue"})]})]})]})},E=t(57574),F=function(e){var a=(0,u.Z)(),t=a.observationImages,l=a.setObservationImages,d=(0,o.Z)({},t),s=function(e){return new Promise((function(a,t){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return a(n.result)},n.onerror=function(e){return t(e)}}))},r=function(){var e=(0,i.Z)((0,n.Z)().mark((function e(a){var i,o;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=a.target.files[0],e.next=3,s(i).catch((function(e){return console.log(e)}));case 3:o=e.sent,d.data[null===t||void 0===t?void 0:t.selected_image_index].item=i,d.data[null===t||void 0===t?void 0:t.selected_image_index].image=o,d.data[null===t||void 0===t?void 0:t.selected_image_index].name=i.name,d.data[null===t||void 0===t?void 0:t.selected_image_index].lastModified=i.lastModified,l(d);case 9:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsxs)("div",{className:"replace-image_wrapper position-absolute rounded-circle bg-white d-flex justify-content-center align-items-center",children:[(0,Z.jsx)("input",{type:"file",name:"file",id:"UploadFile1",accept:"image/jpg, image/jpeg, image/png",onChange:function(e){return r(e)},onClick:function(){return function(e){l((function(a){var t;return(0,o.Z)((0,o.Z)({},a),{},{selected_image_id:null===e||void 0===e||null===(t=e.item)||void 0===t?void 0:t.id,selected_image_index:null===e||void 0===e?void 0:e.index})}))}(e)},className:"position-absolute w-100 h-100 opacity-0 p-0"}),(0,Z.jsx)(J.JO,{icon:"ion:sync-outline"})]})})},A=function(e){var a,t=e.remove,n=e.className,i=(0,u.Z)(),l=i.observationImages,s=i.setObservationImages,c=i.observationSteps,m=(0,r.useState)([]),v=(0,d.Z)(m,2),h=v[0],x=v[1],g=(0,r.useState)(null!==(a=null===l||void 0===l?void 0:l.selected_image_id)&&void 0!==a?a:null),p=(0,d.Z)(g,2),f=p[0],_=p[1];return(0,r.useLayoutEffect)((function(){x(null===l||void 0===l?void 0:l.data),_(f)}),[f,l,h]),(0,Z.jsx)(Z.Fragment,{children:null===h||void 0===h?void 0:h.map((function(e,a){return(0,Z.jsx)("div",{className:"selected-image_wrapper d-flex justify-content-end mb-2 ms-2 ms-sm-0 position-relative ".concat(n||""),children:(0,Z.jsxs)("div",{className:"selected-image  ".concat(f===(null===e||void 0===e?void 0:e.id)?"active-tab":""),children:[(0,Z.jsx)("button",{type:"button",className:"preview-btn position-relative d-flex p-0 shadow-none",onClick:function(){return function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;_(e),s((function(t){return(0,o.Z)((0,o.Z)({},t),{},{selected_image_id:e,selected_image_index:a})}))}(null===e||void 0===e?void 0:e.id,a)},children:(0,Z.jsx)(E.Z,{converted:null===c||void 0===c?void 0:c.converted,src:null===e||void 0===e?void 0:e.image,alt:null===e||void 0===e?void 0:e.name})}),(0,Z.jsx)(F,{item:e,index:a}),(0,Z.jsx)("button",{type:"button",className:"remove-btn text-black border-0 position-absolute btn",onClick:function(){return t(null===e||void 0===e?void 0:e.id)},children:(0,Z.jsx)("span",{children:(0,Z.jsx)(J.JO,{icon:"ci:close-big"})})})]})},a)}))})},q=t(33151),M=function(e){var a,t,n,i,l,s,c,v,g=e.multiple,p=e.maxLimit,f=e.imageFormat,_=e.detectImage,j=e.mode,b=e.small,y=(0,u.Z)(),N=y.setObservationImages,w=y.observationImages,k=y.setCameraDetails,I=(0,r.useState)([]),C=(0,d.Z)(I,2),J=C[0],L=C[1],O=(0,r.useState)(null),X=(0,d.Z)(O,2),P=X[0],D=X[1],z=(0,m.Z)().auth,T=(0,r.useState)({latitude:null!==z&&void 0!==z&&null!==(a=z.user)&&void 0!==a&&null!==(t=a.location_metadata)&&void 0!==t&&t.lat?null===z||void 0===z||null===(n=z.user)||void 0===n||null===(i=n.location_metadata)||void 0===i?void 0:i.lat:18.5204303,longitude:null!==z&&void 0!==z&&null!==(l=z.user)&&void 0!==l&&null!==(s=l.location_metadata)&&void 0!==s&&s.lng?null===z||void 0===z||null===(c=z.user)||void 0===c||null===(v=c.location_metadata)||void 0===v?void 0:v.lng:73.8567437}),E=(0,d.Z)(T,2),F=E[0];E[1];return(0,r.useEffect)((function(){var e,a=null!==w&&void 0!==w&&w.data?(0,S.Z)(null===w||void 0===w?void 0:w.data):[];null===w||void 0===w||null===(e=w.data)||void 0===e||e.map((function(e,a){return e.latitude=null===F||void 0===F?void 0:F.latitude,e.longitude=null===F||void 0===F?void 0:F.longitude})),L(a)}),[_,j,F]),(0,r.useEffect)((function(){var e;J.length>0&&(N({data:J,observation_count:J.length,selected_image_id:null===J||void 0===J||null===(e=J[0])||void 0===e?void 0:e.id,selected_image_index:0}),k(h.pJ))}),[J,N,F]),(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsx)(q.Z,{maxLimit:p,imageFormat:f,multiple:g,handleUploadImage:function(e){D(null);var a=e.target.files;Array.from(a).forEach((function(e,a){var t=new FileReader;t.onloadend=function(){var a=t.result.replace("data:","").replace(/^.+,/,""),n="data:image/png;base64,".concat(a),i=(Math.random()+1).toString(36).substring(7)+(Math.random()+1).toString(36).substring(20),l=(e.size/1048576).toFixed(2),d=(null===J||void 0===J?void 0:J.map((function(a,t){return(null===a||void 0===a?void 0:a.lastModified)===(null===e||void 0===e?void 0:e.lastModified)&&(null===a||void 0===a?void 0:a.name)===(null===e||void 0===e?void 0:e.name)}))).includes(!0);if((null===J||void 0===J?void 0:J.length)<=(j?1:2)&&l<5&&!d){if(j)return L([(0,x.tB)(i,n,e,F)]);L((function(a){return[].concat((0,S.Z)(a),[(0,x.tB)(i,n,e,F)])}))}j&&D((function(e){return(0,o.Z)((0,o.Z)({},e),{},{draft:"You can not add new image"})})),(null===J||void 0===J?void 0:J.length)>2&&D((function(e){return(0,o.Z)((0,o.Z)({},e),{},{count:"You have reached the limit, delete some image, maximum upload allowed is 3"})})),l>5&&D((function(e){return(0,o.Z)((0,o.Z)({},e),{},{size:"You have exceeded the max file size limit (5mb)"})})),d&&D((function(e){return(0,o.Z)((0,o.Z)({},e),{},{duplicate:"You have already added the image, please choose other image"})}))},t.readAsDataURL(e)}))},error:P,small:b})})},Q=function(e){var a,t,n,i=e.proceedNext,l=e.remove,o=e.detectImage,c=e.mode,m=(0,r.useState)(!1),v=(0,d.Z)(m,1)[0],h=(0,u.Z)().observationImages;return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsxs)(s.X2,{children:[(0,Z.jsx)(s.JX,{sm:null!==h&&void 0!==h&&null!==(a=h.data)&&void 0!==a&&a.length?9:12,className:"order-2 order-sm-1",children:(0,Z.jsx)(M,{mode:c,detectImage:o,imageFormat:!0,maxLimit:!0,multiple:v})}),(null===h||void 0===h||null===(t=h.data)||void 0===t?void 0:t.length)&&(0,Z.jsx)(s.JX,{sm:3,className:"order-1 order-sm-2 d-flex d-sm-block justify-content-start justify-content-sm-end overflow-hidden w-auto",children:(0,Z.jsx)(A,{className:"sm-selected_image",remove:l})})]}),(0,Z.jsx)(s.X2,{children:(0,Z.jsx)(s.JX,{sm:12,children:(0,Z.jsx)("div",{className:"mt-5",children:(0,Z.jsx)(s.zx,{disabled:!(null!==h&&void 0!==h&&null!==(n=h.data)&&void 0!==n&&n.length),onClick:i,children:"Continue"})})})})]})},U=function(e){var a=e.step,t=(0,r.useState)(100),n=(0,d.Z)(t,2),i=n[0],l=n[1];return(0,r.useEffect)((function(){l(100*(null===a||void 0===a?void 0:a.active)/(null===a||void 0===a?void 0:a.total))}),[a]),(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsxs)("div",{className:"progress_bar text-black",children:[null===a||void 0===a?void 0:a.active," of ",null===a||void 0===a?void 0:a.total," steps",(0,Z.jsx)("p",{className:"progress_line",style:{"--progressPercentage":i+"%"}})]})})},R=function(e){var a,t=e.remove,n=(0,r.useRef)(null),i=(0,u.Z)(),l=i.observationImages,o=i.observationSteps;return(0,Z.jsx)(Z.Fragment,{children:null===l||void 0===l||null===(a=l.data)||void 0===a?void 0:a.filter((function(e){return(null===e||void 0===e?void 0:e.id)===(null===o||void 0===o?void 0:o.selected_image_id)})).map((function(e,a){return(0,Z.jsx)("div",{className:"upload-multiple-observation",children:(0,Z.jsxs)("div",{className:"observation-image position-relative",children:[(0,Z.jsx)("button",{type:"button",className:"text-black border-0 rounded-0 shadow-none p-0 position-absolute btn",ref:n,onClick:function(){return t(null===e||void 0===e?void 0:e.id)},children:(0,Z.jsx)("span",{children:(0,Z.jsx)(J.JO,{icon:"ci:close-big"})})}),(0,Z.jsx)(E.Z,{src:null===e||void 0===e?void 0:e.image,alt:null===e||void 0===e?void 0:e.name})]})},a)}))})},Y=function(e){var a=e.open,t=e.handleClose,n=e.handleConfirmation;return(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsx)(s.u_,{isOpen:a,centered:!0,backdrop:!0,keyboard:!1,size:"lg",className:"delete-confirm_modal",children:(0,Z.jsx)(s.fe,{className:"text-center",children:(0,Z.jsxs)("div",{className:"content",children:[(0,Z.jsx)("h2",{className:"mb-3",children:"Are you sure ?"}),(0,Z.jsx)("div",{className:"d-inline-block mx-auto remove-img w-100",children:(0,Z.jsx)("img",{src:"".concat(h.cK.url,"/remove-data.svg"),alt:"Remove data"})}),(0,Z.jsx)("p",{className:"mb-5 opacity-75",children:"If you perform this action, we will only keep your first observation. If you wish to add more observation, you will need to enable this again & then you can add more."}),(0,Z.jsx)("button",{type:"button",className:"me-2 btn btn-dark px-5",onClick:function(){return n()},children:"Yes"}),(0,Z.jsx)("button",{type:"button",className:"px-5 btn btn-primary",onClick:function(){return t()},children:"No"})]})})})})},B=function(e){var a,t=e.toggleTab,n=(e.handleImageInput,e.error),i=e.disableNext,l=e.obvType,c=e.remove,m=e.detectImage,v=e.step,h=e.showUploadedPreview,g=e.mode,p=(0,u.Z)(),f=p.observationImages,_=p.setObservationImages,j=p.observationType,b=p.setObservationCategory,y=p.setObservationType,N=(0,r.useState)(!1),w=(0,d.Z)(N,2),k=w[0],I=w[1],C=(0,r.useState)(x.v1.MultipleImages),S=(0,d.Z)(C,2),L=S[0],O=S[1],X=(0,r.useState)(!1),D=(0,d.Z)(X,1)[0],z=(0,r.useState)(!0),T=(0,d.Z)(z,2),E=T[0],F=T[1],q=(0,r.useState)(!1),Q=(0,d.Z)(q,2),U=Q[0],B=Q[1],W=function(e){L!==e&&O(e)},G=function(){B(!E),F(!E)};return(0,r.useEffect)((function(){k&&G()}),[k]),(0,r.useEffect)((function(){var e;I((null===f||void 0===f||null===(e=f.data)||void 0===e?void 0:e.length)>1)}),[null===f||void 0===f||null===(a=f.data)||void 0===a?void 0:a.length]),(0,r.useEffect)((function(){b((function(e){return(0,o.Z)((0,o.Z)({},e),{},{is_other:D})})),g?(y((function(e){return(0,o.Z)((0,o.Z)({},e),{},{image_type:3===(null===j||void 0===j?void 0:j.image_type)?3:2})})),O(3===(null===j||void 0===j?void 0:j.image_type)?x.v1.ImageSequence:x.v1.MultipleImages)):k&&L===x.v1.MultipleImages?y((function(e){return(0,o.Z)((0,o.Z)({},e),{},{image_type:2})})):y(k?function(e){return(0,o.Z)((0,o.Z)({},e),{},{image_type:3})}:function(e){return(0,o.Z)((0,o.Z)({},e),{},{image_type:1})})}),[L,k,D,b,y]),(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsxs)(s.X2,{children:[!g&&(0,Z.jsx)(s.JX,{sm:12,children:(0,Z.jsx)(s.cw,{className:"d-flex align-items-center position-relative",children:(0,Z.jsxs)("div",{className:"custom-switch",children:[(0,Z.jsx)("input",{id:"toggleMultiple",type:"checkbox",className:"hidden",checked:k,onClick:function(e){k&&G()},onChange:function(e){return I(!0)}}),(0,Z.jsx)("label",{className:"switchbox",htmlFor:"toggleMultiple"}),(0,Z.jsx)("span",{children:"Multiple Observations (limit to 3)"})]})})}),k&&!g&&(0,Z.jsx)(s.JX,{sm:12,children:(0,Z.jsxs)(s.JL,{tabs:!0,children:[(0,Z.jsx)(s.LY,{children:(0,Z.jsxs)(s.OL,{className:L===x.v1.MultipleImages?"active":"",onClick:function(){W(x.v1.MultipleImages)},children:[(0,Z.jsx)(J.JO,{icon:"fluent:square-multiple-20-regular",color:"black",width:24,className:"me-3"}),"Multiple images"]})}),(0,Z.jsx)(s.LY,{children:(0,Z.jsxs)(s.OL,{className:L===x.v1.ImageSequence?"active":"",onClick:function(){W(x.v1.ImageSequence)},children:[(0,Z.jsx)(J.JO,{icon:"codicon:list-filter",color:"black",width:24,className:"me-3"}),(0,Z.jsxs)("div",{children:["Image Sequence",(0,Z.jsx)("p",{className:"mb-0",children:"Images sequence extracted from a video"})]})]})})]})}),(0,Z.jsx)(s.JX,{sm:12,children:(0,Z.jsxs)(s.I5,{activeTab:L,children:[(0,Z.jsx)(s.Jm,{tabId:x.v1.MultipleImages,children:(0,Z.jsxs)(s.X2,{children:[k&&(0,Z.jsx)(s.JX,{sm:12,children:(0,Z.jsx)(M,{small:!0,detectImage:m,imageFormat:!1,maxLimit:!1,multiple:!1})}),h&&(0,Z.jsx)(s.JX,{sm:12,children:(0,Z.jsx)("div",{className:"d-flex justify-content-start justify-content-sm-end d-sm-none",children:(0,Z.jsx)(A,{obvType:l,step:v,error:n,remove:c})})}),(0,Z.jsx)(s.JX,{sm:12,children:(0,Z.jsx)(R,{remove:c})}),(0,Z.jsx)(s.JX,{sm:12,children:(0,Z.jsx)(P,{obvType:l,error:n})}),(0,Z.jsx)(s.JX,{sm:12,children:(0,Z.jsx)(s.zx,{type:"button",className:"mt-3",disabled:!i,onClick:function(){return t(x.mQ.DateTimeLocation)},children:"Continue"})})]})}),(0,Z.jsx)(s.Jm,{tabId:x.v1.ImageSequence,children:(0,Z.jsxs)(s.X2,{children:[k&&(0,Z.jsx)(s.JX,{sm:12,children:(0,Z.jsx)("div",{className:"small-upload_box mb-3",children:(0,Z.jsx)(M,{detectImage:m,imageFormat:!1,maxLimit:!1,multiple:!1})})}),h&&(0,Z.jsx)(s.JX,{sm:12,children:(0,Z.jsx)("div",{className:"d-flex justify-content-end d-sm-none",children:(0,Z.jsx)(A,{obvType:l,step:v,error:n,remove:c})})}),(0,Z.jsx)(s.JX,{sm:12,children:(0,Z.jsx)(R,{remove:c})}),(0,Z.jsx)(s.JX,{sm:12,children:(0,Z.jsx)(s.zx,{type:"button",onClick:function(){return t(x.mQ.DateTimeLocation)},children:"Continue"})})]})})]})})]}),E&&U&&(0,Z.jsx)(Y,{open:E&&U,handleClose:G,handleConfirmation:function(){var e;if(1===(null===f||void 0===f||null===(e=f.data)||void 0===e?void 0:e.length))F(!0),I(!1),B(!1);else{var a,t=null===v||void 0===v?void 0:v.selected_image_index,n=null===f||void 0===f||null===(a=f.data)||void 0===a?void 0:a.filter((function(e,a){return a===t}));_((function(e){return(0,o.Z)((0,o.Z)({},e),{},{data:n,observation_count:1,selected_image_id:null===v||void 0===v?void 0:v.selected_image_id,selected_image_index:0})})),y((function(e){return(0,o.Z)((0,o.Z)({},e),{},{image_type:1})})),O(x.v1.MultipleImages),F(!0),I(!1),B(!1)}}})]})},W=t(74600),G=function(e){var a,t,n,i=e.toggleTab,l=e.handleInput,o=e.handleOtherCamera,d=e.cameraDetails,r=e.error,c=e.step,m=e.isSwitchOn,v=(0,u.Z)().observationData;return(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsxs)(s.X2,{children:[(0,Z.jsx)(W.Z,{step:c,handleInput1:l,updateSetting:d,error:r,isSwitchOn:m}),(0,Z.jsxs)(s.JX,{md:"12",children:[(0,Z.jsx)("div",{className:"border-line"}),(0,Z.jsxs)(s.cw,{children:[(0,Z.jsx)("h6",{children:"Elevation angle of your camera in degrees"}),(0,Z.jsx)(s.II,{type:"number",name:"elevation_angle",value:null!==(a=null===v||void 0===v?void 0:v.elevation_angle)&&void 0!==a?a:"",placeholder:"e.g. 20",onChange:function(e){return o(e)}}),(0,Z.jsxs)("span",{className:"d-block mt-1 opacity-75 ex-text",children:[(0,Z.jsx)("b",{className:"me-1",children:"Example:"}),"20"]})]})]}),(0,Z.jsx)(s.JX,{md:12,children:(0,Z.jsxs)(s.cw,{children:[(0,Z.jsx)("h6",{children:"Link to the video of this event"}),(0,Z.jsx)(s.II,{type:"url",name:"video_url",value:null!==(t=null===v||void 0===v?void 0:v.video_url)&&void 0!==t?t:"",onChange:function(e){return o(e)},placeholder:"e.g. https://www.youtube.com/watch?v=PjZ2Y2nn000"}),(0,Z.jsxs)("span",{className:"d-block mt-1 opacity-75 ex-text",children:[(0,Z.jsx)("b",{className:"me-1",children:"Example:"}),"https://www.youtube.com/watch?v=PjZ2Y2nn000"]})]})}),(0,Z.jsx)(s.JX,{md:12,children:(0,Z.jsxs)(s.cw,{children:[(0,Z.jsx)("h6",{children:"Please share the story of your capture"}),(0,Z.jsx)("div",{className:"border-line my-2"}),(0,Z.jsx)(s.II,{type:"textarea",name:"story",value:null!==(n=null===v||void 0===v?void 0:v.story)&&void 0!==n?n:"",onChange:function(e){return o(e)},placeholder:"We would love to hear more about your experience."})]})}),(0,Z.jsxs)(s.JX,{md:12,children:[(0,Z.jsx)(s.zx,{className:"gray-outline-btn me-2",onClick:function(){return i(x.mQ.DateTimeLocation)},children:"Back"}),(0,Z.jsx)(s.zx,{type:"submit",disabled:!(null!==d&&void 0!==d&&d.camera_type&&null!==d&&void 0!==d&&d.focal_length&&null!==d&&void 0!==d&&d.aperture),children:"Submit"})]})]})})},H=t(26022),K=function(){for(var e,a,g,p,f,_=(0,m.Z)().auth,j=(0,r.useState)(!1),b=(0,d.Z)(j,2),y=b[0],N=b[1],w=(0,u.Z)(),k=w.observationSteps,I=w.setObservationSteps,C=w.observationImages,S=w.setObservationImages,J=w.observationData,L=w.setObservationData,O=w.observationType,X=w.setObservationType,P=w.cameraDetails,D=w.setCameraDetails,z=(0,c.TH)(),E=(0,c.s0)(),F=(0,r.useState)(x.mQ.ObservationImages),q=(0,d.Z)(F,2),M=q[0],R=q[1],Y=(0,r.useState)(!1),W=(0,d.Z)(Y,2),K=W[0],V=W[1],$=(0,r.useState)(!1),ee=(0,d.Z)($,2),ae=ee[0],te=ee[1],ne=(0,r.useState)(!1),ie=(0,d.Z)(ne,2),le=ie[0],oe=ie[1],de=(0,r.useState)(!1),se=(0,d.Z)(de,2),re=(se[0],se[1]),ce=(0,r.useState)(null),ue=(0,d.Z)(ce,2),me=ue[0],ve=ue[1],he=(0,r.useState)(null),xe=(0,d.Z)(he,2),ge=xe[0],pe=xe[1],fe=(0,r.useState)(null),_e=(0,d.Z)(fe,2),je=_e[0],be=_e[1],ye=(0,r.useState)(!0),Ne=(0,d.Z)(ye,2),Ze=Ne[0],we=Ne[1],ke=(0,r.useState)(),Ie=(0,d.Z)(ke,2),Ce=Ie[0],Se=Ie[1],Je=!1,Le=0;Le<(null===J||void 0===J||null===(Oe=J.map_data)||void 0===Oe?void 0:Oe.length);Le++){var Oe,Xe,Pe,De,ze;if(!(null!==J&&void 0!==J&&null!==(Xe=J.map_data)&&void 0!==Xe&&Xe[Le]&&(null===J||void 0===J||null===(Pe=J.map_data)||void 0===Pe||null===(De=Pe[Le])||void 0===De||null===(ze=De.category_map)||void 0===ze?void 0:ze.category.length)>0)){Je=!1;break}Je=!0}for(var Te=!1,Ee=0;Ee<(null===J||void 0===J||null===(Fe=J.map_data)||void 0===Fe?void 0:Fe.length);Ee++){var Fe,Ae,qe,Me,Qe,Ue,Re,Ye,Be,We;if(!(null!==J&&void 0!==J&&null!==(Ae=J.map_data)&&void 0!==Ae&&Ae[Ee]&&null!==J&&void 0!==J&&null!==(qe=J.map_data)&&void 0!==qe&&null!==(Me=qe[Ee])&&void 0!==Me&&Me.azimuth&&null!==J&&void 0!==J&&null!==(Qe=J.map_data)&&void 0!==Qe&&null!==(Ue=Qe[Ee])&&void 0!==Ue&&Ue.obs_time&&null!==J&&void 0!==J&&null!==(Re=J.map_data)&&void 0!==Re&&null!==(Ye=Re[Ee])&&void 0!==Ye&&Ye.obs_date&&null!==J&&void 0!==J&&null!==(Be=J.map_data)&&void 0!==Be&&null!==(We=Be[Ee])&&void 0!==We&&We.timezone)){Te=!1;break}Te=!0}var Ge=3!==(null===J||void 0===J?void 0:J.image_type)?Je&&K:K,He=Je&&K&&Te,Ke=function(e){M!==e&&R(e),window.scrollTo(0,0)},Ve=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=(0,o.Z)({},C);if("address"===e)t.data[null===C||void 0===C?void 0:C.selected_image_index].location=a,t.data[1]&&(t.data[1].category_map.location=a),t.data[2]&&(t.data[2].category_map.location=a);else{var n=e.target.name,i=e.target.value;if("is_other"===n)t.data[null===C||void 0===C?void 0:C.selected_image_index].category_map[n]=e.target.checked,3===(null===J||void 0===J?void 0:J.image_type)&&(t.data[1]&&(t.data[1].category_map[n]=e.target.checked),t.data[2]&&(t.data[2].category_map[n]=e.target.checked));else if("is_precise_azimuth"===n){if(t.data[null===C||void 0===C?void 0:C.selected_image_index][n]=!0===e.target.checked?1:0,3===(null===J||void 0===J?void 0:J.image_type)&&(t.data[1]&&(t.data[1].is_precise_azimuth=!0===e.target.checked?1:0),t.data[2]&&(t.data[2].is_precise_azimuth=!0===e.target.checked?1:0)),!1===e.target.checked&&(t.data[null===C||void 0===C?void 0:C.selected_image_index].azimuth=t&&t.data?t.data[null===C||void 0===C?void 0:C.selected_image_index].azimuth:void 0,3===(null===J||void 0===J?void 0:J.image_type))){var l,d;if(t.data[1])t.data[1].azimuth=null===t||void 0===t||null===(l=t.data)||void 0===l?void 0:l[0].azimuth;if(t.data[2])t.data[2].azimuth=null===t||void 0===t||null===(d=t.data)||void 0===d?void 0:d[0].azimuth}}else t.data[null===C||void 0===C?void 0:C.selected_image_index][n]=i,3===(null===J||void 0===J?void 0:J.image_type)&&(t.data[1]&&(t.data[1][n]=i),t.data[2]&&(t.data[2][n]=i))}S(t)},$e=function(){var e=(0,i.Z)((0,n.Z)().mark((function e(a){var i,l,o,d,s,r,c,u;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t(31016),d=new FormData,null===(s=o(J))||void 0===s||null===(i=s.map_data)||void 0===i||i.map((function(e,a){return delete e.image,d.append("image_"+a,e.item),!0})),1===a&&(s.is_draft=a),s.camera=P||(null!==_&&void 0!==_&&_.camera?null===_||void 0===_||null===(l=_.camera)||void 0===l?void 0:l.id:null),d.append("data",JSON.stringify(s)),le){e.next=12;break}return e.next=10,v.Z.post(h.v2.api+"/observation/upload_observation/",d,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(null===_||void 0===_||null===(r=_.token)||void 0===r?void 0:r.access)}}).then((function(e){pe(null),ve({data:null===e||void 0===e?void 0:e.data,status:null===e||void 0===e?void 0:e.status,message:null===e||void 0===e?void 0:e.message}),N(!1),window.scrollTo(0,0),setTimeout((function(){aa()}),500)})).catch((function(e){var a,t;console.log(e.response),N(!1),pe({data:null===e||void 0===e||null===(a=e.response)||void 0===a?void 0:a.data,status:null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.status,message:null===e||void 0===e?void 0:e.message})}));case 10:e.next=14;break;case 12:return e.next=14,v.Z.put(h.v2.api+"/observation/update_observation/".concat(null===k||void 0===k||null===(c=k.mode)||void 0===c?void 0:c.id,"/"),d,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(null===_||void 0===_||null===(u=_.token)||void 0===u?void 0:u.access)}}).then((function(e){pe(null),ve({data:null===e||void 0===e?void 0:e.data,status:null===e||void 0===e?void 0:e.status,message:null===e||void 0===e?void 0:e.message}),N(!1),window.scrollTo(0,0),setTimeout((function(){aa()}),500)})).catch((function(e){var a,t;console.log(e.response),N(!1),pe({data:null===e||void 0===e||null===(a=e.response)||void 0===a?void 0:a.data,status:null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.status,message:null===e||void 0===e?void 0:e.message})}));case 14:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),ea=function(){var e=(0,i.Z)((0,n.Z)().mark((function e(a){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==a.target.checked){e.next=5;break}return e.next=3,v.Z.get(h.v2.api+"/users/camera_setting/",{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(null===_||void 0===_||null===(t=_.token)||void 0===t?void 0:t.access)}}).then((function(e){D(null===e||void 0===e?void 0:e.data)})).catch((function(e){console.log(e.response)}));case 3:e.next=6;break;case 5:D(h.pJ);case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),aa=function(e){E("/observations"),re(!0),I({total:3,active:1,mode:{update:!0,id:!1}}),S([]),L(null),console.clear()},ta=function(e){var a,t=[];null===J||void 0===J||null===(a=J.map_data)||void 0===a||a.filter((function(a){return a.id!==e})).map((function(e,a){return t.push(e)})),t.length>0?(I((function(e){return(0,o.Z)((0,o.Z)({},e),{},{selected_image_id:null===t||void 0===t?void 0:t[0].id,selected_image_index:0,observation_count:t.length})})),S((function(e){return(0,o.Z)((0,o.Z)({},e),{},{observation_count:t.length,selected_image_id:null===t||void 0===t?void 0:t[0].id,selected_image_index:0,data:t})})),L((function(e){return(0,o.Z)((0,o.Z)({},e),{},{map_data:t})})),be(e)):window.location.reload()},na=function(){return!((null===C||void 0===C||!C.data||!K||M!==x.mQ.ObservationImages)&&(M!==x.mQ.DateTimeLocation||3===(null===O||void 0===O?void 0:O.image_type)||1===(null===O||void 0===O?void 0:O.image_type)))},ia=function(){var e=(0,i.Z)((0,n.Z)().mark((function e(a){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.Z.get(h.v2.api+"/observation/get_draft_data/".concat(a,"/"),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(null===_||void 0===_||null===(t=_.token)||void 0===t?void 0:t.access)}}).then((function(e){var a,t=null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.data;Se({image_type:t.image_type,elevation_angle:t.elevation_angle,video_url:t.video_url,camera:t.camera_data,question_field_one:t.question_field_one,question_field_two:t.question_field_two,story:t.story,map_data:t.images}),D(null===t||void 0===t?void 0:t.camera_data),oe(!0)})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),la=function(e){return new Promise((function(a,t){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return a(n.result)},n.onerror=function(e){return t(e)}}))};return(0,r.useEffect)((function(){var e;null===Ce||void 0===Ce||null===(e=Ce.map_data)||void 0===e||e.map((function(e,a){var t=e.image,l=function(e){return e.split(/[#?]/)[0].split("/").pop().trim()}(t);return fetch(t).then(function(){var a=(0,i.Z)((0,n.Z)().mark((function a(t){var i,o,d,s;return(0,n.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return i=t.headers.get("content-type"),a.next=3,t.blob().catch((function(e){return console.log("blob error",e)}));case 3:return o=a.sent,d=new File([o],l,{contentType:i}),a.next=7,la(d).catch((function(e){return console.log("base64 Error",e)}));case 7:return s=a.sent,e.compressed_image=null,setTimeout((function(){e.item=d,e.image=s,e.name=d.name,e.lastModified=d.lastModified}),500),a.abrupt("return",d);case 11:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()).catch((function(e){return console.log("Error converting the CDN image to file object at index [".concat(a,"] [").concat(e,"]"))}))}))}),[Ce,S]),(0,r.useEffect)((function(){var e,a,t=null===k||void 0===k||null===(e=k.mode)||void 0===e?void 0:e.id,n=z.pathname==="/".concat(h.X0.observationsUpdate),i=null===k||void 0===k||null===(a=k.mode)||void 0===a?void 0:a.type;if(n&&"draft"===i&&(ia(t).then((function(e){return e})),I((function(e){return(0,o.Z)((0,o.Z)({},e),{},{converted:!0})}))),n&&"draft"!==i)return E("/observations")}),[null===z||void 0===z?void 0:z.pathname,le,null===k||void 0===k?void 0:k.converted]),(0,r.useEffect)((function(){var e=(0,o.Z)({},C),a=(0,o.Z)({},O);X((0,o.Z)((0,o.Z)({},a),{},{image_type:2===(null===Ce||void 0===Ce?void 0:Ce.image_type)?1:null===Ce||void 0===Ce?void 0:Ce.image_type})),S((0,o.Z)((0,o.Z)({},e),{},{data:null===Ce||void 0===Ce?void 0:Ce.map_data,selected_image_id:null===Ce||void 0===Ce?void 0:Ce.map_data[0].id,selected_image_index:0,observation_count:null===Ce||void 0===Ce?void 0:Ce.map_data.length}))}),[Ce,S]),(0,r.useEffect)((function(){I((function(e){return(0,o.Z)((0,o.Z)({},e),{},{active:M===x.mQ.ObservationImages?1:M===x.mQ.DateTimeLocation?2:3,selected_image_id:null===C||void 0===C?void 0:C.selected_image_id,selected_image_index:null===C||void 0===C?void 0:C.selected_image_index,is_draft:Ze})}))}),[M,Ze,C,I]),(0,Z.jsxs)("div",{className:"position-relative",children:[y&&(0,Z.jsx)(H.Z,{fixContent:!0}),me&&(0,Z.jsx)(s.sU,{color:"success","data-dismiss":"alert",dismissible:"true",className:"text-center mt-3 d-inline-block w-100",children:null===me||void 0===me||null===(e=me.data)||void 0===e?void 0:e.success}),(0,Z.jsxs)(s.l0,{className:"observation-form upload-observation-form-main",onSubmit:function(e){e.preventDefault(),N(!0),we(0),$e(0).then((function(e){return e}))},children:[(0,Z.jsx)("div",{className:"common-top-button-wrapper",children:(0,Z.jsx)(s.W2,{children:(0,Z.jsxs)("div",{className:"common-top-button-wrapper-inner",children:[(0,Z.jsx)(s.zx,{className:"gray-outline-btn",onClick:aa,disabled:!(null!==C&&void 0!==C&&C.data),children:"Cancel"}),(0,Z.jsxs)("div",{className:"top-right-btn",children:[(0,Z.jsx)(s.zx,{className:"gray-outline-btn me-2 me-sm-3",onClick:function(){N(!0),$e(1).then((function(e){return e}))},disabled:!K,children:"Save as draft"}),(0,Z.jsx)(s.zx,{type:"submit",disabled:!(null!==P&&void 0!==P&&P.camera_type&&null!==P&&void 0!==P&&P.focal_length&&null!==P&&void 0!==P&&P.aperture),children:"Submit"})]})]})})}),(0,Z.jsx)("section",{className:"upload-observation-form-inner",children:(0,Z.jsx)(s.W2,{children:(0,Z.jsxs)(s.X2,{children:[(0,Z.jsx)(s.JX,{md:3,sm:12,children:(0,Z.jsxs)("div",{className:"observation-form-left-tab",children:[(0,Z.jsx)(U,{step:k}),(0,Z.jsxs)(s.JL,{tabs:!0,className:"flex-column",children:[(0,Z.jsx)(s.LY,{children:(0,Z.jsx)(s.OL,{className:M===x.mQ.ObservationImages?"active":"",onClick:function(){var e,a,t;null!==J&&void 0!==J&&null!==(e=J.map_data)&&void 0!==e&&null!==(a=e[0])&&void 0!==a&&null!==(t=a.category_map)&&void 0!==t&&t.category&&K&&Ke(x.mQ.ObservationImages)},children:"Observation Images"})}),(0,Z.jsx)(s.LY,{children:(0,Z.jsx)(s.OL,{className:"".concat(M===x.mQ.DateTimeLocation?"active":""," ").concat(Ge?"":"disabled"),onClick:function(){Ge&&Ke(x.mQ.DateTimeLocation)},children:"Date, Time & Location"})}),(0,Z.jsx)(s.LY,{children:(0,Z.jsx)(s.OL,{className:"".concat(M===x.mQ.EquipmentDetails?"active":""," ").concat(He?"":"disabled"),onClick:function(){He&&Ke(x.mQ.EquipmentDetails)},children:"Equipment Details"})})]})]})}),(0,Z.jsx)(s.JX,{md:(null===C||void 0===C||null===(a=C.data)||void 0===a?void 0:a.length)>0&&K&&M!==x.mQ.EquipmentDetails?7:9,sm:(null===C||void 0===C||null===(g=C.data)||void 0===g?void 0:g.length)>0&&K&&M!==x.mQ.EquipmentDetails?9:12,children:(0,Z.jsx)("div",{className:"observation-form-middle-tab",children:(0,Z.jsxs)(s.I5,{activeTab:M,children:[(0,Z.jsx)(s.Jm,{tabId:x.mQ.ObservationImages,children:K?(0,Z.jsx)(B,{mode:le,showUploadedPreview:na,obvType:O,step:k,error:ge,detectImage:je,remove:ta,toggleTab:Ke,disableNext:Ge,handleImageInput:Ve}):(0,Z.jsx)(Q,{mode:le,detectImage:je,remove:ta,proceedNext:function(){V(!K)}})}),(0,Z.jsxs)(s.Jm,{tabId:x.mQ.DateTimeLocation,className:"observation_location",children:[na()&&(0,Z.jsx)("div",{className:"observation-form-right-tab d-flex justify-content-start justify-content-sm-end d-sm-none position-relative position-sm-sticky",children:(0,Z.jsx)(A,{obvType:O,step:k,error:ge,remove:ta})}),(null===C||void 0===C?void 0:C.data)&&(0,Z.jsx)(T,{mode:le,obvType:O,step:k,error:ge,toggleTab:Ke,handleImageInput:Ve,disableNext:He})]}),(0,Z.jsxs)(s.Jm,{tabId:x.mQ.EquipmentDetails,className:"observation_equipment",children:[(null===_||void 0===_||null===(p=_.user)||void 0===p?void 0:p.camera)&&(0,Z.jsx)(s.cw,{check:!0,className:"d-flex align-items-center position-relative mb-3",children:(0,Z.jsxs)(s.__,{check:!0,children:[(0,Z.jsx)(s.II,{type:"checkbox",name:"profileData",checked:ae,disabled:!(null!==_&&void 0!==_&&null!==(f=_.user)&&void 0!==f&&f.camera),onChange:function(e){te(!ae),ea(e).then((function(e){return e}))}}),"Pull data from my profile"]})}),(0,Z.jsx)(G,{step:k,isSwitchOn:ae,error:ge,handleInput:function(e){var a=e.target.name,t=e.target.value;D((0,o.Z)((0,o.Z)({},P),{},(0,l.Z)({},a,t))),L((function(e){return(0,o.Z)((0,o.Z)({},e),{},{camera:P})}))},toggleTab:Ke,cameraDetails:P,handleOtherCamera:function(e){var a=e.target.name,t=e.target.value;L((function(e){return(0,o.Z)((0,o.Z)({},e),{},(0,l.Z)({},a,t))}))},getCameraDetail:ea})]})]})})}),na()&&(0,Z.jsx)(s.JX,{md:2,sm:3,className:"d-none d-sm-block overflow-hidden",children:(0,Z.jsx)("div",{className:"observation-form-right-tab",children:(0,Z.jsx)(A,{obvType:O,step:k,error:ge,remove:ta})})})]})})})]})]})}},63417:function(e,a,t){t.r(a),t.d(a,{ObservationContext:function(){return r}});var n=t(42982),i=t(70885),l=t(16871),o=t(72791),d=t(74551),s=t(80184),r=(0,o.createContext)({});a.default=function(){var e=(0,o.useState)({image_type:1}),a=(0,i.Z)(e,2),t=a[0],c=a[1],u=(0,o.useState)({total:3,active:1,mode:{update:!1}}),m=(0,i.Z)(u,2),v=m[0],h=m[1],x=(0,o.useState)([]),g=(0,i.Z)(x,2),p=g[0],f=g[1],_=(0,o.useState)(d.pJ),j=(0,i.Z)(_,2),b=j[0],y=j[1],N=(0,o.useState)([]),Z=(0,i.Z)(N,2),w=Z[0],k=Z[1],I=(0,o.useState)({}),C=(0,i.Z)(I,2),S=C[0],J=C[1];return(0,o.useEffect)((function(){var e=null!==p&&void 0!==p&&p.data?(0,n.Z)(null===p||void 0===p?void 0:p.data):[];J({image_type:null===t||void 0===t?void 0:t.image_type,map_data:e,elevation_angle:null,video_url:""})}),[null===p||void 0===p?void 0:p.data,null===v||void 0===v?void 0:v.is_draft,null===t||void 0===t?void 0:t.image_type]),(0,s.jsx)(r.Provider,{value:{observationType:t,setObservationType:c,observationSteps:v,setObservationSteps:h,observationImages:p,setObservationImages:f,observationCategory:w,setObservationCategory:k,observationData:S,setObservationData:J,cameraDetails:b,setCameraDetails:y},children:(0,s.jsx)(l.j3,{})})}},22201:function(){}}]);
//# sourceMappingURL=7355.3540fb4c.chunk.js.map