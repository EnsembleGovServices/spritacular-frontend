"use strict";(self.webpackChunkspritacular_frontend=self.webpackChunkspritacular_frontend||[]).push([[286],{21032:function(e,n,t){var s=t(74165),o=t(15861),a=t(4942),r=t(1413),l=t(70885),i=t(7788),d=t(94677),u=t(74551),c=t(72791),v=t(17834),f=t(16871),p=t(80184);n.Z=function(e){var n,t=e.cp,m=(0,v.Z)(),h=m.setAuth,x=(m.auth,m.persist),g=m.setPersist,Z=(0,f.s0)(),j=(0,c.useState)({email:"",password:""}),w=(0,l.Z)(j,2),b=w[0],y=w[1],k=(0,c.useState)(""),N=(0,l.Z)(k,2),C=N[0],I=N[1],S=(0,c.useState)(),_=(0,l.Z)(S,2),T=(_[0],_[1]),z=function(e){e.preventDefault();var n=e.target.name,t=e.target.value;y((0,r.Z)((0,r.Z)({},b),{},(0,a.Z)({},n,t)))},F=function(){var e=(0,o.Z)((0,s.Z)().mark((function e(n){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,d.Z.post(u.v2.token,b).then((function(e){if(200===e.status){var n,t,s,o,a,r=null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.is_superuser;g((function(e){return!e})),I(""),h({token:{access:null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.access,refresh:null===e||void 0===e||null===(s=e.data)||void 0===s?void 0:s.refresh},user:null===e||void 0===e?void 0:e.data}),T(null===e||void 0===e?void 0:e.data),localStorage.setItem("refresh",null===e||void 0===e||null===(o=e.data)||void 0===o?void 0:o.refresh),localStorage.removeItem("camera"),P(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.access).then((function(e){return e})),Z(r?u.X0.dashboard:u.X0.home,{replace:!0})}})).catch((function(e){var n;if(null!==e&&void 0!==e&&e.response)if(null!==e&&void 0!==e&&e.response)I({status:e.response.status,message:e.response.statusText,data:e.response.data});else if(401===(null===e||void 0===e||null===(n=e.response)||void 0===n?void 0:n.status))console.log("unauthorized");else{var t;console.log(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.statusText)}else console.log(null===e||void 0===e?void 0:e.message),I((function(n){return(0,r.Z)((0,r.Z)({},n),{},{server:null===e||void 0===e?void 0:e.message})}))}));case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),P=function(){var e=(0,o.Z)((0,s.Z)().mark((function e(n){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.get(u.v2.api+"/observation/get_category_list/",{headers:{"Content-Type":"application/json"}}).then((function(e){h((function(n){return(0,r.Z)((0,r.Z)({},n),{},{categoryList:null===e||void 0===e?void 0:e.data})}))})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,c.useEffect)((function(){localStorage.setItem("persist",x)}),[x]),(0,p.jsxs)(p.Fragment,{children:[(null===C||void 0===C?void 0:C.data)&&(0,p.jsx)("p",{className:"text-danger small mb-4 fw-bolder",children:null===C||void 0===C||null===(n=C.data)||void 0===n?void 0:n.detail}),(null===C||void 0===C?void 0:C.server)&&(0,p.jsx)("p",{className:"text-danger text-center small mb-4 fw-bolder",children:null===C||void 0===C?void 0:C.server}),(0,p.jsxs)(i.l0,{onSubmit:F,children:[(0,p.jsx)(i.cw,{children:(0,p.jsx)(i.II,{type:"email",name:"email",placeholder:"Email address",autoComplete:"off",required:!0,onChange:function(e){return z(e)}})}),(0,p.jsx)(i.cw,{children:(0,p.jsx)(i.II,{type:"password",name:"password",placeholder:"Password",required:!0,onChange:function(e){return z(e)}})}),(0,p.jsx)(i.R9,{className:"forgot-password",children:(0,p.jsx)(i.zx,{type:"button",onClick:function(){return t()},children:"Forgot Password?"})}),(0,p.jsx)(i.cw,{children:(0,p.jsx)(i.zx,{type:"submit",className:"modal-btn",disabled:!(null!==b&&void 0!==b&&b.email&&null!==b&&void 0!==b&&b.password),children:"Login"})})]})]})}},20286:function(e,n,t){t.r(n);var s=t(21032),o=t(7788),a=t(17834),r=t(16871),l=(t(37084),t(74551)),i=t(80184);n.default=function(){var e=(0,a.Z)(),n=e.auth,t=e.persist,d=(0,r.TH)();return n&&t?(0,i.jsx)(r.Fg,{to:l.X0.home,state:{from:d},replace:!0}):(0,i.jsx)("section",{className:"min-vh-100 d-flex align-items-center justify-content-center",children:(0,i.jsx)(o.W2,{children:(0,i.jsx)("div",{className:"common-modal modal-content-page",children:(0,i.jsx)("div",{className:"modal-content ",children:(0,i.jsx)("div",{className:"modal-body",children:(0,i.jsx)(s.Z,{})})})})})})}},37084:function(){}}]);
//# sourceMappingURL=286.82d1b05f.chunk.js.map