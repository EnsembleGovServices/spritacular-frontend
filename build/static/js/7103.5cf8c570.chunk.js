"use strict";(self.webpackChunkspritacular_frontend=self.webpackChunkspritacular_frontend||[]).push([[7103],{27103:function(e,i,n){n.r(i),n.d(i,{default:function(){return w}});var l=n(1413),t=n(74165),a=n(15861),s=n(70885),o=n(72791),d=n(7788),c=n(62711),r=n(36652),u=n(47604),v=n(74405),m=n(94677),h=n(74551),f=n(17834),x=n(16871),j=n(40872),p=n(2579),g=n(80184),b=(0,o.lazy)((function(){return Promise.resolve().then(n.bind(n,6442))})),N=(0,o.lazy)((function(){return n.e(8750).then(n.bind(n,58750))})),y=(0,o.lazy)((function(){return n.e(9035).then(n.bind(n,99035))})),_=(0,o.lazy)((function(){return Promise.all([n.e(382),n.e(3627),n.e(782)]).then(n.bind(n,52334))})),C=(0,o.lazy)((function(){return Promise.resolve().then(n.bind(n,23658))})),w=function(e){var i,n,w,k,Z,L,E,D,K,z,J,P,I,O,S,X,T=(0,f.Z)().auth,A=(0,x.TH)(),q=(0,o.useRef)(),R=e.modalClass,Y=e.open,B=e.handleClose,F=e.data,H=e.activeType,M=e.handleContinueEdit,$=e.handleApproveRejectEvent,G=e.refreshData,Q=(0,o.useState)(v.Ku.Details),U=(0,s.Z)(Q,2),V=U[0],W=U[1],ee=(0,j.Z)(),ie=ee.observationComments,ne=ee.setObservationListData,le=ee.observationListData,te=(0,o.useRef)(null),ae=(0,o.useState)(!0),se=(0,s.Z)(ae,2),oe=se[0],de=se[1],ce=(0,o.useState)(!0),re=(0,s.Z)(ce,2),ue=re[0],ve=re[1],me=function(e){V!==e&&W(e)},he=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(){var i;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.Z.post(h.v2.api+"/observation/get_observation_details/"+(null===F||void 0===F?void 0:F.id)+"/",null,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(null===T||void 0===T||null===(i=T.token)||void 0===i?void 0:i.access)}}).then((function(e){var i,n;de(null===e||void 0===e||null===(i=e.data)||void 0===i||null===(n=i.data)||void 0===n?void 0:n.includes(null))})).catch((function(e){console.log(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),fe=function(e){ve(e)};return(0,o.useEffect)((function(){ve(!0),W(v.Ku.Details)}),[Y,null===F||void 0===F?void 0:F.id]),(0,o.useEffect)((function(){var e,i;if(Y&&null!==F&&void 0!==F&&F.id&&oe&&null!==T&&void 0!==T&&null!==(e=T.user)&&void 0!==e&&e.id)return q.current=setInterval((function(){he().then((function(e){return e}))}),1e3),function(){clearInterval(q.current)};Y&&null!==F&&void 0!==F&&F.id&&oe&&(null===T||void 0===T||null===(i=T.user)||void 0===i||!i.id)&&setTimeout((function(){de(!1)}),1e3)}),[null===F||void 0===F?void 0:F.id,oe,Y,null===T||void 0===T?void 0:T.user]),(0,o.useEffect)((function(){oe||A.pathname!=="/".concat(h.X0.myObservations)||G(!0,H)}),[oe,A]),(0,o.useEffect)((function(){var e;oe||(null===le||void 0===le||null===(e=le.list)||void 0===e||e.filter((function(e){var i;return e.id===(null===le||void 0===le||null===(i=le.active)||void 0===i?void 0:i.id)})).map((function(e){return ne((function(i){return(0,l.Z)((0,l.Z)({},i),{},{active:e})}))})))}),[le.list]),(0,g.jsx)(g.Fragment,{children:(0,g.jsxs)(d.u_,{className:R||"",isOpen:Y,backdrop:!0,keyboard:!1,scrollable:!1,size:"xl",toggle:B,ref:te,children:[(0,g.jsxs)(d.xB,{className:"d-flex justify-content-between align-items-center w-100",children:[(0,g.jsxs)("div",{className:"d-flex align-items-center justify-content-start",children:[(0,g.jsx)(d.zx,{className:"close-icon bg-transparent rounded-0 border-0 shadow-none p-0 me-3",onClick:function(){return B()},children:(0,g.jsx)("img",{src:u.Z.Modalcloseicon,alt:"close-icon"})}),(0,g.jsx)("h4",{className:"d-inline-block m-0",children:null!==F&&void 0!==F&&null!==(i=F.category_data)&&void 0!==i&&i[0]?null===F||void 0===F||null===(n=F.category_data)||void 0===n||null===(w=n[0])||void 0===w?void 0:w.name:null}),(0,g.jsxs)(d.Ct,{className:"text-uppercase ".concat("verified"===H?"badge-success":""),children:["verified"===H&&(0,g.jsx)(c.JO,{icon:"mdi:check-decagram",color:"#27ae60",className:"me-1",width:"13",height:"13"}),H]})]}),"draft"===H&&(0,g.jsx)("div",{children:(0,g.jsx)(d.zx,{variant:"primary",onClick:function(){return M({id:null===F||void 0===F?void 0:F.id,type:H})},children:"Continue Editing"})})]}),(0,g.jsx)(d.fe,{children:(0,g.jsxs)(d.X2,{children:[(0,g.jsx)(d.JX,{md:6,children:(0,g.jsxs)("div",{className:"mb-4 mb-md-0 h-100",children:[(0,g.jsxs)("div",{className:"preview-detail mb-3 mb-md-2",children:[!(3===(null===F||void 0===F?void 0:F.image_type))&&(0===(null===F||void 0===F||null===(k=F.images)||void 0===k?void 0:k.length)?(0,g.jsx)("img",{src:u.Z.NotAvailable,alt:"No available",className:"object-contain img-fluid"}):oe?(0,g.jsxs)("div",{className:"d-flex flex-column h-100 align-items-center justify-content-center bg-gradient bg-light",children:[(0,g.jsx)(d.$j,{color:"primary",size:"20px"}),(0,g.jsx)("h5",{className:"mt-3",children:"Processing image..."})]}):(0,g.jsx)(o.Suspense,{fallback:(0,g.jsx)("div",{}),children:(0,g.jsx)(b,{image:null===F||void 0===F||null===(Z=F.images)||void 0===Z||null===(L=Z[0])||void 0===L?void 0:L.image,preview:null===F||void 0===F||null===(E=F.images)||void 0===E||null===(D=E[0])||void 0===D?void 0:D.image,alt:null===F||void 0===F||null===(K=F.images)||void 0===K||null===(z=K[0])||void 0===z?void 0:z.location,loaderLoading:fe})})),3===(null===F||void 0===F?void 0:F.image_type)&&(0,g.jsx)(C,{carouselData:null===F||void 0===F?void 0:F.images,detail:!0,loaderLoading:fe})]}),(0,g.jsxs)(d.X2,{children:[(0,g.jsxs)(d.JX,{sm:6,className:"justify-content-start d-flex align-items-center mb-2 mb-sm-0 position-relative",children:[ue&&(0,g.jsx)("div",{className:"obv-user-cat-loader",children:(0,g.jsx)(p.Z,{height:32,width:"80%"})}),(0,g.jsxs)("div",{className:"d-flex card-user_details align-items-center overflow-hidden mx-1",children:[(0,g.jsx)("i",{className:"profile-icon rounded-circle",children:(0,g.jsx)("img",{width:"100%",height:"100%",src:null!==F&&void 0!==F&&null!==(J=F.user_data)&&void 0!==J&&J.profile_image?null===F||void 0===F||null===(P=F.user_data)||void 0===P?void 0:P.profile_image:u.Z.DefaultProfile,alt:"Profile",className:"rounded-circle"})}),(0,g.jsx)("h5",{className:"pe-2 mb-0 text-truncate fw-normal text-black",children:(null===F||void 0===F||null===(I=F.user_data)||void 0===I?void 0:I.first_name)+" "+(null===F||void 0===F||null===(O=F.user_data)||void 0===O?void 0:O.last_name)})]})]}),(0,g.jsx)(d.JX,{sm:6,className:"justify-content-end d-flex align-items-center position-relative",children:(0,g.jsx)("div",{className:"observation_type d-flex align-items-center",children:(null===F||void 0===F||null===(S=F.category_data)||void 0===S?void 0:S.length)>0&&(null===F||void 0===F||null===(X=F.category_data)||void 0===X?void 0:X.map((function(e,i){var n,l;return(0,g.jsxs)("div",{className:"cat-loader m-0 gap",children:[ue&&(0,g.jsx)("div",{className:"skeleton",children:(0,g.jsx)(p.Z,{circle:!0,height:28,width:28})}),(0,g.jsx)("div",{className:"obv-cat-item mt-1",children:(0,g.jsx)("span",{id:null===e||void 0===e||null===(n=e.name)||void 0===n?void 0:n.toLowerCase().replaceAll(" ",""),className:"rounded-circle bg-white me-1 cursor-pointer",children:(0,g.jsx)(r.ZP,{animation:"perspective",content:null===e||void 0===e?void 0:e.name,children:(0,g.jsx)("img",{src:"/assets/images/category/".concat(null===e||void 0===e||null===(l=e.name)||void 0===l?void 0:l.toLowerCase().replaceAll(" ",""),".png"),alt:null===e||void 0===e?void 0:e.name,width:16,height:16})})})})]},i)})))})})]})]})}),(0,g.jsxs)(d.JX,{md:6,children:[(0,g.jsxs)(d.JL,{tabs:!0,children:[(0,g.jsx)(d.LY,{children:(0,g.jsx)(d.OL,{className:V===v.Ku.Details?"active":"",onClick:function(){me(v.Ku.Details)},children:"Details"})}),(0,g.jsx)(d.LY,{children:(0,g.jsx)(d.OL,{className:V===v.Ku.Equipment?"active":"",onClick:function(){me(v.Ku.Equipment)},children:"Equipment"})}),(0,g.jsx)(d.LY,{children:(0,g.jsxs)(d.OL,{className:V===v.Ku.Comments?"active":"",onClick:function(){me(v.Ku.Comments)},children:["Comments"," ",0===(null===ie||void 0===ie?void 0:ie.comment_count)?"":"(".concat(null===ie||void 0===ie?void 0:ie.comment_count,")")]})})]}),(0,g.jsxs)(d.I5,{activeTab:V,children:[(0,g.jsx)(d.Jm,{tabId:v.Ku.Details,children:(0,g.jsx)(o.Suspense,{fallback:(0,g.jsx)("div",{children:"please wait..."}),children:(0,g.jsx)(N,{handlePopup:B,approveRejectEvent:$,obvCommentCount:null===ie||void 0===ie?void 0:ie.comment_count,data:F,activeType:H})})}),(0,g.jsx)(d.Jm,{tabId:v.Ku.Equipment,children:(0,g.jsx)(o.Suspense,{fallback:(0,g.jsx)("div",{children:"please wait..."}),children:(0,g.jsx)(y,{obvCommentCount:null===ie||void 0===ie?void 0:ie.comment_count,data:null===F||void 0===F?void 0:F.camera_data})})}),(0,g.jsx)(d.Jm,{tabId:v.Ku.Comments,children:(0,g.jsx)(o.Suspense,{fallback:(0,g.jsx)("div",{children:"please wait..."}),children:(0,g.jsx)(_,{obvId:null===F||void 0===F?void 0:F.id})})})]})]})]})})]})})}}}]);
//# sourceMappingURL=7103.5cf8c570.chunk.js.map