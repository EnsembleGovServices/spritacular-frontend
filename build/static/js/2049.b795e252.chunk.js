"use strict";(self.webpackChunkspritacular_frontend=self.webpackChunkspritacular_frontend||[]).push([[2049],{59122:function(e,t,n){n.d(t,{f:function(){return a}});var i=n(7788),o=n(80184),a=function(e){var t=e.handleLoadMore;return(0,o.jsx)(i.zx,{className:"gray-outline-btn d-block mx-auto px-4 fw-normal",onClick:function(){return t()},children:"Load more"})}},40872:function(e,t,n){var i=n(72791),o=n(21353);t.Z=function(){var e=(0,i.useContext)(o.J).observationListData;return(0,i.useDebugValue)(e,(function(e){return e?"List data set":"Listing data not set"})),(0,i.useContext)(o.J)}},92049:function(e,t,n){n.r(t),n.d(t,{default:function(){return m}});var i=n(42982),o=n(1413),a=n(70885),l=(n(33505),n(72791)),s=n(7788),u=n(43504),r=n(17834),d=n(94677),c=n(74551),v=n(47604),f=n(59122),h=n(40872),p=n(80184),y=(0,l.lazy)((function(){return Promise.all([n.e(2711),n.e(6652),n.e(7103),n.e(3333)]).then(n.bind(n,27103))})),b=(0,l.lazy)((function(){return Promise.all([n.e(2711),n.e(2426),n.e(9136),n.e(8418)]).then(n.bind(n,66788))})),x=(0,l.lazy)((function(){return Promise.all([n.e(2711),n.e(2426),n.e(6652),n.e(2815),n.e(3674),n.e(1212),n.e(7152)]).then(n.bind(n,4577))})),m=function(){var e,t,n,m,g=(0,l.useState)(!1),j=(0,a.Z)(g,2),Z=j[0],C=j[1],S=(0,l.useState)(!0),O=(0,a.Z)(S,2),N=O[0],k=O[1],L=(0,l.useState)(),D=(0,a.Z)(L,2),F=D[0],z=D[1],w=(0,l.useState)(""),_=(0,a.Z)(w,2),E=_[0],T=_[1],M=(0,l.useState)({isCountryOpen:!1,isTypeOpen:!1,isStatusOpen:!1}),P=(0,a.Z)(M,2),A=P[0],H=P[1],I=(0,l.useState)({country:{name:"",code:""},type:"",status:""}),J=(0,a.Z)(I,2),R=J[0],U=J[1],V=(0,h.Z)(),W=V.observationListData,q=V.setObservationListData,B=(0,r.Z)().auth,G=(0,l.useState)(10),X=(0,a.Z)(G,2),K=(X[0],X[1]),Q=(0,l.useState)(10),Y=(0,a.Z)(Q,2),$=Y[0],ee=(Y[1],(0,l.useState)("".concat(c.v2.api,"/observation/gallery/?country=&category=&status="))),te=(0,a.Z)(ee,2),ne=te[0],ie=te[1],oe=null===B||void 0===B||null===(e=B.user)||void 0===e?void 0:e.is_user;(0,l.useEffect)((function(){K($),ae(!0,"",R.type,R.status),k(!1)}),[N]);(0,l.useEffect)((function(){!1===A.isCountryOpen&&T("")}),[A.isCountryOpen]),(0,l.useEffect)((function(){q((function(e){var t;return(0,o.Z)((0,o.Z)({},e),{},{active:null===W||void 0===W||null===(t=W.list)||void 0===t?void 0:t[F]})}))}),[Z]);var ae=function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"".concat(null===(e=R.country)||void 0===e?void 0:e.code),l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"".concat(R.type),s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"".concat(R.status);t=!0!==n&&ne?ne.replace("http","https"):"".concat(c.v2.api,"/observation/gallery/?country=").concat(a,"&category=").concat(l,"&status=").concat(s,"&page=1");var u,r={};(r["Content-Type"]="application/json",B.user)&&(r.Authorization="Bearer ".concat(null===B||void 0===B||null===(u=B.token)||void 0===u?void 0:u.access));d.Z.get(t,{headers:r}).then((function(e){var t,a;if(void 0!==(null===e||void 0===e||null===(t=e.data)||void 0===t||null===(a=t.results)||void 0===a?void 0:a.data)){var l,s,u,r,d;if(null!==e&&void 0!==e&&null!==(l=e.data)&&void 0!==l&&l.next)ie(null===e||void 0===e||null===(d=e.data)||void 0===d?void 0:d.next);else ie(null);var c,v,f,h=null===e||void 0===e||null===(s=e.data)||void 0===s||null===(u=s.results)||void 0===u?void 0:u.data;if((null===W||void 0===W||null===(r=W.list)||void 0===r?void 0:r.length)>0&&!1===n)c=(0,i.Z)(null===W||void 0===W?void 0:W.list),c=[].concat((0,i.Z)(c),(0,i.Z)(h));else c=null===e||void 0===e||null===(v=e.data)||void 0===v||null===(f=v.results)||void 0===f?void 0:f.data;q((function(e){return(0,o.Z)((0,o.Z)({},e),{},{list:c})})),k(!1)}else ie(null),q({list:[],active:{}})})).catch((function(e){console.log(e.response)}))};return(0,l.useEffect)((function(){q((function(e){return(0,o.Z)((0,o.Z)({},e),{},{activeType:"",list:[]})})),ae(!0,"","","")}),[]),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(l.Suspense,{fallback:(0,p.jsx)("div",{}),children:(0,p.jsx)(b,{galleryFilter:!0,isFilterOpen:A,setIsFilterOpen:H,selectedFilterHorizontal:R,setSelectedFilterHorizontal:U,searchCountry:E,findCountry:function(e){var t=e.target.value.toLowerCase();T(t)},handleFilterValue:function(e,t){var n;if(q([]),"status"===t)e=e.toLowerCase(),ae(!0,null===(n=R.country)||void 0===n?void 0:n.code,R.type,e);else if("category"===t){var i;ae(!0,null===(i=R.country)||void 0===i?void 0:i.code,e,R.status)}else"country"===t&&ae(!0,e.code,R.type,R.status)}})}),(0,p.jsxs)(s.W2,{className:"pt-5",children:[oe&&(0,p.jsxs)(s.sU,{color:"danger","data-dismiss":"alert",dismissible:"true",className:"text-center mb-5",children:["Would you like to help us sift through observations and endorse their validity?",(0,p.jsx)(u.rU,{to:"/"+c.X0.quiz.home,className:"btn btn-outline-primary",children:"Get Trained"})]}),(null===W||void 0===W?void 0:W.list)&&(0,p.jsxs)("div",{className:"gallery-page",children:[(0,p.jsx)("h4",{className:"text-black fw-bold",children:"Recent Observations"}),(0,p.jsx)("div",{children:(null===W||void 0===W?void 0:W.list.length)>0?(0,p.jsxs)(l.Suspense,{fallback:(0,p.jsx)("div",{}),children:[(0,p.jsx)(x,{observationList:null===W||void 0===W?void 0:W.list,isObservationDetailModal:Z,setObservationDetailModal:C,setSelectedObservationId:z}),ne&&(0,p.jsx)(f.f,{handleLoadMore:function(){var e;ae(!1,null===(e=R.country)||void 0===e?void 0:e.code,R.type,R.status)}})]}):(0,p.jsxs)("div",{className:"data-not-found",children:[(0,p.jsx)("img",{src:v.Z.NoDataFound,alt:"No data found",className:"mb-3"}),(0,p.jsxs)("p",{children:[(0,p.jsx)("b",{className:"text-secondary fw-bold",children:"Opps!"})," No Data Found"]})]})}),(0,p.jsx)(y,{data:null===W||void 0===W?void 0:W.active,activeType:null!==W&&void 0!==W&&null!==(t=W.active)&&void 0!==t&&t.is_verified?"verified":null!==W&&void 0!==W&&null!==(n=W.active)&&void 0!==n&&n.is_reject?"denied":null!==W&&void 0!==W&&null!==(m=W.active)&&void 0!==m&&m.is_submit?"unverified":"draft",modalClass:"observation-details_modal",open:Z,handleClose:function(e){C(!Z),z(e)},handleApproveRejectEvent:ae,refreshData:ae})]})]})]})}},33505:function(){}}]);
//# sourceMappingURL=2049.b795e252.chunk.js.map