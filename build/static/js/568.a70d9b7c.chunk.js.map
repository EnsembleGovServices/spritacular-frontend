{"version":3,"file":"static/js/568.a70d9b7c.chunk.js","mappings":"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","sources":["components/Shared/LoadMore.jsx","hooks/useObservationsData.js","pages/Page/Gallery.jsx"],"sourcesContent":["import { Button} from 'reactstrap';\n\nexport const LoadMore = (props) => {\n    const {handleLoadMore} = props;\n    return (\n        <Button className='gray-outline-btn d-block mx-auto px-4 fw-normal' onClick={()=> handleLoadMore()}>Load more</Button>\n    )\n};","import {useContext, useDebugValue} from \"react\";\nimport {observationViewContext} from \"../layouts/PersistLogin\";\n\nconst useObservationsData = () => {\n    const { observationListData } = useContext(observationViewContext);\n    useDebugValue(observationListData, observationListData => observationListData ? 'List data set' : \"Listing data not set\")\n    return useContext(observationViewContext);\n}\n\nexport default useObservationsData;","import \"../../assets/scss/component/myObservation.scss\";\nimport \"../../assets/scss/component/gallery.scss\";\nimport {lazy, Suspense, useEffect, useState} from \"react\";\nimport {Container, UncontrolledAlert} from \"reactstrap\";\nimport {Link} from \"react-router-dom\";\n\nimport useAuth from \"../../hooks/useAuth\";\nimport axios from \"../../api/axios\";\nimport {baseURL, routeUrls} from \"../../helpers/url\";\nimport {LoadMore} from \"../../components/Shared/LoadMore\";\nimport useObservationsData from \"../../hooks/useObservationsData\";\n\nconst NotFound = lazy(() =>\n    import(\"../../components/Common/NotFound\")\n);\nconst ObservationDetails = lazy(() =>\n    import(\"../Observation/ObservationDetails\")\n);\nconst FilterSelectMenu = lazy(() =>\n    import(\"../../components/Shared/FilterSelectMenu\")\n);\nconst ObservationDetailPage = lazy(() =>\n    import(\"../Observation/ObservationListPage\")\n);\n\nconst Gallery = () => {\n    const {auth} = useAuth();\n    const [isObservationDetailModal, setObservationDetailModal] = useState(false);\n    const [selectedObservationId, setSelectedObservationId] = useState();\n    const [searchCountry, setSearchCountry] = useState(\"\");\n    const [isFilterOpen, setIsFilterOpen] = useState({\n        isCountryOpen: false,\n        isTypeOpen: false,\n        isStatusOpen: false,\n    });\n    const [selectedFilterHorizontal, setSelectedFilterHorizontal] = useState({\n        country: {name: \"\", code: \"\"},\n        type: \"\",\n        status: \"\",\n    });\n    const {observationListData, setObservationListData} = useObservationsData();\n    const [loadedState, setLoadedState] = useState({loading: true, hasData: false});\n    const [showNoData, setShowNoData] = useState(false);\n    const activeTypeData = observationListData?.active?.is_verified ? \"verified\" : observationListData?.active?.is_reject ? \"denied\" : observationListData?.active?.is_submit ? \"unverified\" : \"draft\"\n\n    const [nextPageUrl, setNextPageUrl] = useState(\n        `${baseURL.api}/observation/gallery/?country=&category=&status=`\n    );\n    const normalUser = auth?.user?.is_user;\n\n    const findCountry = (e) => {\n        let value = e.target.value.toLowerCase();\n        setSearchCountry(value);\n    };\n\n    const handleLoadMoreData = () => {\n        getObservationType(\n            false,\n            selectedFilterHorizontal.country?.code,\n            selectedFilterHorizontal.type,\n            selectedFilterHorizontal.status\n        );\n    };\n    const getObservationType = async (\n        reset = false,\n        country = `${selectedFilterHorizontal.country?.code}`,\n        category = `${selectedFilterHorizontal.type}`,\n        status = `${selectedFilterHorizontal.status}`\n    ) => {\n        let url;\n        if (reset === true || !nextPageUrl) {\n            url = `${baseURL.api}/observation/gallery/?country=${country}&category=${category}&status=${status}&page=1`;\n        } else {\n            url = process.env.NODE_ENV === \"development\" ? nextPageUrl : nextPageUrl.replace('http', 'https');\n        }\n\n        const headers = {};\n        headers[\"Content-Type\"] = \"application/json\";\n        if (auth?.user) {\n            headers[\"Authorization\"] = `Bearer ${auth?.token?.access}`;\n        }\n        await axios.get(url, {headers: headers}).then((success) => {\n            if (success?.data?.results?.data !== undefined) {\n                if (success?.data?.next) {\n                    setNextPageUrl(success?.data?.next);\n                } else {\n                    setNextPageUrl(null);\n                }\n                let records = success?.data?.results?.data;\n                let prevData;\n\n                if (observationListData?.list?.length > 0 && reset === false) {\n                    prevData = [...observationListData?.list];\n                    prevData = [...prevData, ...records];\n                } else {\n                    prevData = success?.data?.results?.data;\n                }\n                setObservationListData((prev) => {\n                    return {\n                        ...prev,\n                        list: prevData,\n                    };\n                });\n                setLoadedState((prev) => {\n                    return {\n                        ...prev,\n                        loading: false,\n                        hasData: success?.data?.results?.data?.length > 0\n                    }\n                });\n            } else {\n                setNextPageUrl(null);\n                setObservationListData({list: [], active: {}});\n            }\n        })\n            .catch((error) => {\n                setLoadedState((prev) => {\n                    return {\n                        ...prev,\n                        loading: false,\n                    }\n                });\n                console.log(error.response);\n            });\n    };\n\n    const handleObservationDetailModal = (id) => {\n        setObservationDetailModal(!isObservationDetailModal);\n        setSelectedObservationId(id);\n    };\n\n    const handleFilterValue = (value, type) => {\n        setObservationListData([]);\n        // setLoadMore(pageSize);\n        if (type === \"status\") {\n            value = value.toLowerCase();\n            getObservationType(\n                true,\n                selectedFilterHorizontal.country?.code,\n                selectedFilterHorizontal.type,\n                value\n            );\n        } else if (type === \"category\") {\n            getObservationType(\n                true,\n                selectedFilterHorizontal.country?.code,\n                value,\n                selectedFilterHorizontal.status\n            );\n        } else if (type === \"country\") {\n            getObservationType(\n                true,\n                value.code,\n                selectedFilterHorizontal.type,\n                selectedFilterHorizontal.status\n            );\n        }\n    };\n\n\n    useEffect(() => {\n        if (isFilterOpen.isCountryOpen === false) {\n            setSearchCountry(\"\");\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [isFilterOpen.isCountryOpen]);\n    useEffect(() => {\n        setObservationListData((prev) => {\n            return {\n                ...prev,\n                active: observationListData?.list?.[selectedObservationId],\n            };\n        });\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [isObservationDetailModal]);\n    useEffect(() => {\n        setObservationListData((prev) => {\n            return {\n                ...prev,\n                activeType: \"\",\n                list: []\n            }\n        })\n        getObservationType(true, \"\", \"\", \"\").then(r => r);\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [])\n\n    useEffect(() => {\n        setShowNoData(loadedState?.hasData);\n    }, [loadedState?.hasData])\n\n    return (\n        <>\n            <Suspense fallback={<div></div>}>\n                <FilterSelectMenu\n                    galleryFilter={true}\n                    isFilterOpen={isFilterOpen}\n                    setIsFilterOpen={setIsFilterOpen}\n                    selectedFilterHorizontal={selectedFilterHorizontal}\n                    setSelectedFilterHorizontal={setSelectedFilterHorizontal}\n                    searchCountry={searchCountry}\n                    findCountry={findCountry}\n                    handleFilterValue={handleFilterValue}\n                />\n            </Suspense>\n\n            <Container className=\"pt-5\">\n                {normalUser && (\n                    <UncontrolledAlert\n                        color=\"danger\"\n                        data-dismiss=\"alert\"\n                        dismissible=\"true\"\n                        className=\"text-center mb-5\"\n                    >\n                        Would you like to help us sift through observations and endorse\n                        their validity?\n                        <Link\n                            to={\"/\" + routeUrls.quiz.home}\n                            className=\"btn btn-outline-primary\"\n                        >\n                            Get Trained\n                        </Link>\n                    </UncontrolledAlert>\n                )}\n\n                {loadedState?.hasData ? (\n                    <div className=\"gallery-page\">\n                        <h4 className=\"text-black fw-bold\">Recent Observations</h4>\n                        <div>\n                            <Suspense fallback={<div></div>}>\n                                <ObservationDetailPage\n                                    observationList={observationListData?.list}\n                                    isObservationDetailModal={isObservationDetailModal}\n                                    setObservationDetailModal={setObservationDetailModal}\n                                    setSelectedObservationId={setSelectedObservationId}\n                                />\n                                {observationListData?.list?.length > 0 && nextPageUrl &&\n                                    <LoadMore handleLoadMore={handleLoadMoreData}/>\n                                }\n                            </Suspense>\n                        </div>\n                    </div>\n                ) : (\n                    showNoData ? (\n                        <Suspense fallback={''}>\n                            <NotFound/>\n                        </Suspense>\n                    ) : ('')\n                )}\n\n            </Container>\n\n\n            <ObservationDetails\n                data={observationListData?.active}\n                activeType={activeTypeData}\n                modalClass=\"observation-details_modal\"\n                open={isObservationDetailModal}\n                handleClose={handleObservationDetailModal}\n                handleApproveRejectEvent={getObservationType}\n                refreshData={getObservationType}\n            />\n        </>\n    );\n};\nexport default Gallery;\n"],"names":["LoadMore","props","handleLoadMore","className","onClick","observationListData","useContext","observationViewContext","useDebugValue","NotFound","lazy","ObservationDetails","FilterSelectMenu","ObservationDetailPage","auth","useAuth","useState","isObservationDetailModal","setObservationDetailModal","selectedObservationId","setSelectedObservationId","searchCountry","setSearchCountry","isCountryOpen","isTypeOpen","isStatusOpen","isFilterOpen","setIsFilterOpen","country","name","code","type","status","selectedFilterHorizontal","setSelectedFilterHorizontal","useObservationsData","setObservationListData","loading","hasData","loadedState","setLoadedState","showNoData","setShowNoData","activeTypeData","active","is_verified","is_reject","is_submit","baseURL","nextPageUrl","setNextPageUrl","normalUser","user","is_user","getObservationType","reset","category","url","replace","headers","token","access","axios","then","success","undefined","data","results","next","prevData","records","list","length","prev","catch","error","console","log","response","useEffect","activeType","r","Suspense","fallback","galleryFilter","findCountry","e","value","target","toLowerCase","handleFilterValue","color","dismissible","to","routeUrls","observationList","modalClass","open","handleClose","id","handleApproveRejectEvent","refreshData"],"sourceRoot":""}