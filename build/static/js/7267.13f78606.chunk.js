"use strict";(self.webpackChunkspritacular_frontend=self.webpackChunkspritacular_frontend||[]).push([[7267],{27103:function(e,n,i){i.r(n),i.d(n,{default:function(){return k}});var l=i(1413),t=i(15861),a=i(70885),s=i(87757),o=i.n(s),d=i(72791),c=i(7788),r=i(62711),u=i(36652),v=i(40872),m=i(92927),f=i(74405),h=i(26022),x=i(94677),j=i(74551),p=i(17834),g=i(16871),b=i(80184),_=(0,d.lazy)((function(){return i.e(8750).then(i.bind(i,58750))})),y=(0,d.lazy)((function(){return i.e(9035).then(i.bind(i,99035))})),C=(0,d.lazy)((function(){return i.e(7707).then(i.bind(i,77707))})),N=(0,d.lazy)((function(){return Promise.all([i.e(7244),i.e(2147)]).then(i.bind(i,72147))})),k=function(e){var n,i,s,k,w,Z,E,D,K,L,z,J,I=(0,p.Z)().auth,O=(0,g.TH)(),X=e.modalClass,P=e.open,S=e.handleClose,T=e.data,A=e.activeType,q=e.handleContinueEdit,R=e.handleApproveRejectEvent,Y=e.refreshData,B=(0,d.useState)(f.Ku.Details),F=(0,a.Z)(B,2),H=F[0],M=F[1],$=(0,v.Z)(),G=$.observationComments,Q=$.setObservationListData,U=$.observationListData,V=(0,d.useRef)(null),W=(0,d.useState)(!0),ee=(0,a.Z)(W,2),ne=ee[0],ie=ee[1],le=(0,d.useRef)(),te=function(e){H!==e&&M(e)};(0,d.useEffect)((function(){M(f.Ku.Details)}),[P,null===T||void 0===T?void 0:T.id]);var ae=function(){var e=(0,t.Z)(o().mark((function e(){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.Z.post(j.v2.api+"/observation/get_observation_details/"+(null===T||void 0===T?void 0:T.id)+"/",null,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(null===I||void 0===I||null===(n=I.token)||void 0===n?void 0:n.access)}}).then((function(e){var n,i;ie(null===e||void 0===e||null===(n=e.data)||void 0===n||null===(i=n.data)||void 0===i?void 0:i.includes(null))})).catch((function(e){console.log(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,d.useEffect)((function(){var e,n;if(P&&null!==T&&void 0!==T&&T.id&&ne&&null!==I&&void 0!==I&&null!==(e=I.user)&&void 0!==e&&e.id)return le.current=setInterval((function(){ae().then((function(e){return e}))}),1e3),function(){clearInterval(le.current)};P&&null!==T&&void 0!==T&&T.id&&ne&&(null===I||void 0===I||null===(n=I.user)||void 0===n||!n.id)&&setTimeout((function(){ie(!1)}),1e3)}),[null===T||void 0===T?void 0:T.id,ne,P,null===I||void 0===I?void 0:I.user]),(0,d.useEffect)((function(){ne||O.pathname!=="/".concat(j.X0.myObservations)||Y(!0,A)}),[ne,O]),(0,d.useEffect)((function(){var e;ne||(null===U||void 0===U||null===(e=U.list)||void 0===e||e.filter((function(e){var n;return e.id===(null===U||void 0===U||null===(n=U.active)||void 0===n?void 0:n.id)})).map((function(e){return Q((function(n){return(0,l.Z)((0,l.Z)({},n),{},{active:e})}))})))}),[U.list]),(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)(c.u_,{className:X||"",isOpen:P,backdrop:!0,keyboard:!1,scrollable:!1,size:"xl",toggle:S,ref:V,children:[(0,b.jsxs)(c.xB,{className:"d-flex justify-content-between align-items-center w-100",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(c.zx,{className:"close-icon bg-transparent rounded-0 border-0 shadow-none p-0 me-3",onClick:function(){return S()},children:(0,b.jsx)("img",{src:m.Z.Modalcloseicon,alt:"close-icon"})}),null!==T&&void 0!==T&&null!==(n=T.category_data)&&void 0!==n&&n[0]?null===T||void 0===T||null===(i=T.category_data)||void 0===i||null===(s=i[0])||void 0===s?void 0:s.name:null,(0,b.jsxs)(c.Ct,{className:"text-uppercase ".concat("verified"===A?"badge-success":""),children:["verified"===A&&(0,b.jsx)(r.JO,{icon:"mdi:check-decagram",color:"#27ae60",className:"me-1",width:"13",height:"13"}),A]})]}),"draft"===A&&(0,b.jsx)("div",{children:(0,b.jsx)(c.zx,{variant:"primary",onClick:function(){return q({id:null===T||void 0===T?void 0:T.id,type:A})},children:"Continue Editing"})})]}),(0,b.jsx)(c.fe,{children:(0,b.jsxs)(c.X2,{children:[(0,b.jsx)(c.JX,{md:6,children:(0,b.jsxs)("div",{className:"mb-4 mb-md-0 h-100",children:[(0,b.jsxs)("div",{className:"preview-detail mb-3 mb-md-2",children:[!(3===(null===T||void 0===T?void 0:T.image_type))&&(0===(null===T||void 0===T||null===(k=T.images)||void 0===k?void 0:k.length)?(0,b.jsx)("img",{src:m.Z.NotAvailable,alt:"No available",className:"object-contain img-fluid"}):ne?(0,b.jsxs)("div",{className:"d-flex flex-column h-100 align-items-center justify-content-center bg-gradient bg-light",children:[(0,b.jsx)(c.$j,{color:"primary",size:"20px"}),(0,b.jsx)("h5",{className:"mt-3",children:"Processing image..."})]}):(0,b.jsx)("img",{src:null===T||void 0===T||null===(w=T.images)||void 0===w||null===(Z=w[0])||void 0===Z?void 0:Z.image,alt:"card details",className:"img-fluid"})),3===(null===T||void 0===T?void 0:T.image_type)&&(0,b.jsx)(d.Suspense,{fallback:(0,b.jsx)(h.Z,{fixContent:!0}),children:(0,b.jsx)(N,{carouselData:null===T||void 0===T?void 0:T.images,detail:!0})})]}),(0,b.jsxs)(c.X2,{children:[(0,b.jsx)(c.JX,{sm:6,className:"justify-content-start d-flex align-items-center mb-2 mb-sm-0",children:(0,b.jsxs)("div",{className:"d-flex card-user_details align-items-center overflow-hidden",children:[(0,b.jsx)("i",{className:"profile-icon rounded-circle",children:(0,b.jsx)("img",{width:"100%",height:"100%",src:null!==T&&void 0!==T&&null!==(E=T.user_data)&&void 0!==E&&E.profile_image?null===T||void 0===T||null===(D=T.user_data)||void 0===D?void 0:D.profile_image:m.Z.DefaultProfile,alt:"Profile",className:"rounded-circle"})}),(0,b.jsx)("h5",{className:"pe-2 mb-0 text-truncate fw-normal text-black",children:(null===T||void 0===T||null===(K=T.user_data)||void 0===K?void 0:K.first_name)+" "+(null===T||void 0===T||null===(L=T.user_data)||void 0===L?void 0:L.last_name)})]})}),(0,b.jsx)(c.JX,{sm:6,className:"justify-content-end d-flex align-items-center",children:(0,b.jsx)("div",{className:"observation_type d-flex align-items-center",children:(null===T||void 0===T||null===(z=T.category_data)||void 0===z?void 0:z.length)>0&&(null===T||void 0===T||null===(J=T.category_data)||void 0===J?void 0:J.map((function(e,n){var i,l;return(0,b.jsx)("i",{id:null===e||void 0===e||null===(i=e.name)||void 0===i?void 0:i.toLowerCase().replaceAll(" ",""),className:"rounded-circle bg-white ms-2 cursor-pointer",children:(0,b.jsx)(u.ZP,{animation:"perspective",content:null===e||void 0===e?void 0:e.name,children:(0,b.jsx)("img",{src:"/assets/images/category/".concat(null===e||void 0===e||null===(l=e.name)||void 0===l?void 0:l.toLowerCase().replaceAll(" ",""),".png"),alt:null===e||void 0===e?void 0:e.name})})},n)})))})})]})]})}),(0,b.jsxs)(c.JX,{md:6,children:[(0,b.jsxs)(c.JL,{tabs:!0,children:[(0,b.jsx)(c.LY,{children:(0,b.jsx)(c.OL,{className:H===f.Ku.Details?"active":"",onClick:function(){te(f.Ku.Details)},children:"Details"})}),(0,b.jsx)(c.LY,{children:(0,b.jsx)(c.OL,{className:H===f.Ku.Equipment?"active":"",onClick:function(){te(f.Ku.Equipment)},children:"Equipment"})}),(0,b.jsx)(c.LY,{children:(0,b.jsxs)(c.OL,{className:H===f.Ku.Comments?"active":"",onClick:function(){te(f.Ku.Comments)},children:["Comments"," ",0===(null===G||void 0===G?void 0:G.comment_count)?"":"(".concat(null===G||void 0===G?void 0:G.comment_count,")")]})})]}),(0,b.jsxs)(c.I5,{activeTab:H,children:[(0,b.jsx)(c.Jm,{tabId:f.Ku.Details,children:(0,b.jsx)(d.Suspense,{fallback:(0,b.jsx)("div",{children:"please wait..."}),children:(0,b.jsx)(_,{handlePopup:S,approveRejectEvent:R,obvCommentCount:null===G||void 0===G?void 0:G.comment_count,data:T,activeType:A})})}),(0,b.jsx)(c.Jm,{tabId:f.Ku.Equipment,children:(0,b.jsx)(d.Suspense,{fallback:(0,b.jsx)("div",{children:"please wait..."}),children:(0,b.jsx)(y,{obvCommentCount:null===G||void 0===G?void 0:G.comment_count,data:null===T||void 0===T?void 0:T.camera_data})})}),(0,b.jsx)(c.Jm,{tabId:f.Ku.Comments,children:(0,b.jsx)(d.Suspense,{fallback:(0,b.jsx)("div",{children:"please wait..."}),children:(0,b.jsx)(C,{obvId:null===T||void 0===T?void 0:T.id})})})]})]})]})})]})})}}}]);
//# sourceMappingURL=7267.13f78606.chunk.js.map