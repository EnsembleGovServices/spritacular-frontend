{"version":3,"file":"static/js/5019.c5b42124.chunk.js","mappings":"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","sources":["components/Blog/UploadFeaturedImage.jsx","components/Shared/UploadImageUI.jsx"],"sourcesContent":["import \"../../assets/scss/component/initialUploadobservations.scss\";\r\nimport \"../../assets/scss/component/uploadFeatureBlog.scss\";\r\nimport UploadImageUI from \"../Shared/UploadImageUI\";\r\nimport {useEffect, useLayoutEffect, useState} from \"react\";\r\nimport {Icon} from '@iconify/react';\r\nimport BlurImage from \"../Common/BlurImage\";\r\nimport {FormGroup, Label} from \"reactstrap\";\r\n\r\nconst UploadFeaturedImage = (props) => {\r\n    const {setData, uploadProgress, error, update, thumb} = props;\r\n    const [file, setFile] = useState();\r\n    const [preview, setPreview] = useState();\r\n    const [reset, setReset] = useState(false);\r\n    const [loaderLoading, setLoaderLoading] = useState(true);\r\n\r\n    // const progressBar = useRef(null);\r\n    const handleLoaderLoading = (state) => {\r\n        setLoaderLoading(state);\r\n    };\r\n\r\n    const handleFileInput = (e) => {\r\n        setReset(false);\r\n        setPreview(null)\r\n        setFile(e.target.files[0]);\r\n    }\r\n    const previewImage = () => {\r\n        const reader = new FileReader();\r\n        reader.onloadend = () => {\r\n            const base64String = reader.result.replace('data:', '').replace(/^.+,/, '');\r\n            const baseImage = `data:image/png;base64,${base64String}`;\r\n            setPreview(baseImage);\r\n        }\r\n        reader.readAsDataURL(file);\r\n    }\r\n\r\n    const removePreviewAndClearImageData = (e) => {\r\n        setReset(true);\r\n        e.preventDefault();\r\n        setPreview(null);\r\n        setFile(null);\r\n        setData((prev) => {\r\n            return {\r\n                ...prev,\r\n                thumbnail_image: null\r\n            }\r\n        })\r\n    }\r\n\r\n\r\n    useLayoutEffect(() => {\r\n        if (file && !reset) {\r\n            previewImage();\r\n        }\r\n    }, [file, preview])\r\n\r\n    useEffect(() => {\r\n        if (!reset) {\r\n            setData((prev) => {\r\n                return {\r\n                    ...prev,\r\n                    thumbnail_image: file\r\n                }\r\n            })\r\n        }\r\n    }, [file])\r\n\r\n\r\n    // useEffect(() => {\r\n    //     if (uploadProgress === \"100%\") {\r\n    //         progressBar.current.classList.add('fade-out');\r\n    //         setTimeout(function () {\r\n    //             progressBar.current.classList.add('fade-out');\r\n    //         }, 500);\r\n    //         setTimeout(function () {\r\n    //             progressBar.current.remove();\r\n    //         }, 1200);\r\n    //     }\r\n    // }, [uploadProgress])\r\n\r\n    const getFileName = (url) => {\r\n        return url.split(/[#?]/)[0].split(\"/\").pop().trim();\r\n    };\r\n    const toBase64 = (file) =>\r\n        new Promise((resolve, reject) => {\r\n            const reader = new FileReader();\r\n            reader.readAsDataURL(file);\r\n            reader.onload = () => resolve(reader.result);\r\n            reader.onerror = (error) => reject(error);\r\n        });\r\n\r\n    useEffect(() => {\r\n        if (thumb) {\r\n            return fetch(thumb)\r\n                .then(async (response) => {\r\n                    const contentType = response.headers.get(\"content-type\");\r\n                    const blob = await response\r\n                        .blob()\r\n                        .catch((error) => console.log(\"blob error\", error));\r\n                    let fileName = getFileName(thumb);\r\n                    const file = new File([blob], fileName, {contentType});\r\n                    const image = await toBase64(file).catch((error) =>\r\n                        console.log(\"base64 Error\", error)\r\n                    );\r\n                    setTimeout(() => {\r\n                        setData((prev) => {\r\n                            return {\r\n                                ...prev,\r\n                                thumbnail_image: file\r\n                            }\r\n                        })\r\n                        setFile(file)\r\n                        setPreview(image);\r\n                    }, 500)\r\n                    return file;\r\n                })\r\n                .catch((error) =>\r\n                    console.log(\r\n                        `File converting delayed`\r\n                    )\r\n                );\r\n        }\r\n    }, [thumb])\r\n\r\n    return (\r\n        <FormGroup>\r\n            <Label for=\"title\">\r\n                Upload Thumbnail\r\n            </Label>\r\n            <div className=\"position-relative overflow-hidden\">\r\n                <UploadImageUI blogUpload={true} handleUploadImage={handleFileInput}/>\r\n                {preview &&\r\n                    <div className={'img_wrapper position-absolute w-100 left-0 right-0 top-0 bottom-0'}>\r\n                        <button className=\"remove-btn\" onClick={(e) => removePreviewAndClearImageData(e)}>\r\n                            <Icon icon=\"clarity:window-close-line\" width={20} height={20}/>\r\n                        </button>\r\n                        <div className={'img-preview_wrapper'}>\r\n                            <BlurImage loaderLoading={handleLoaderLoading} image={preview} preview={preview}/>\r\n                        </div>\r\n                    </div>\r\n                }\r\n                {/*{uploadProgress > \"1%\" &&*/}\r\n                {/*    <div className=\"progressbar\" ref={progressBar} style={{width: uploadProgress}}>*/}\r\n                {/*        {`${uploadProgress}`}*/}\r\n                {/*    </div>*/}\r\n                {/*}*/}\r\n            </div>\r\n        </FormGroup>\r\n\r\n    )\r\n}\r\nexport default UploadFeaturedImage;","import \"../../assets/scss/component/initialUploadobservations.scss\";\r\nimport {FormGroup, Input, Label} from \"reactstrap\";\r\nimport {Icon} from \"@iconify/react/dist/iconify\";\r\n\r\nconst UploadImageUI = (props) => {\r\n    const {\r\n        maxLimit,\r\n        imageFormat,\r\n        multiple,\r\n        handleUploadImage,\r\n        error,\r\n        small,\r\n        handleObvAdd,\r\n        defaultUploadBox,\r\n        blogUpload\r\n    } = props;\r\n    return (\r\n        <div className=\"position-relative\">\r\n            <div\r\n                className={`upload-image_wrapper ${small ? \"small-upload_box mb-5\" : ''} ${blogUpload ? 'blog-upload-box' : ''}`}>\r\n                <div className=\"upload-ob-inner\">\r\n                    <FormGroup>\r\n                        <Label htmlFor=\"UploadFile\">\r\n                            <div className=\"upload-info\">\r\n                                <Icon icon=\"bx:image-alt\" color=\"#737e96\" width=\"42\" height=\"42\"/>\r\n                                <p>{defaultUploadBox ? 'Upload your first observation' : 'Drag and drop images or click to upload'}</p>\r\n                                {maxLimit && <span className=\"text-black\">Max. Image Size: 5MB</span>}\r\n                                {imageFormat &&\r\n                                    <ul>\r\n                                        <li>\r\n                                            Common Image File Formats (JPEG or\r\n                                            JPG, PNG)\r\n                                        </li>\r\n                                    </ul>\r\n                                }\r\n\r\n                            </div>\r\n                        </Label>\r\n                        <Input\r\n                            type=\"file\"\r\n                            name=\"file\"\r\n                            id=\"UploadFile\"\r\n                            accept=\"image/jpg, image/jpeg, image/png\"\r\n                            multiple={multiple}\r\n                            onChange={(e) => handleUploadImage(e)}\r\n                        />\r\n                    </FormGroup>\r\n                </div>\r\n                {error?.count &&\r\n                    <span className=\"text-danger d-block small my-1 d-inline-block\">{error?.count} </span>\r\n                }\r\n                {error?.size &&\r\n                    <span className=\"text-danger d-block small my-1 d-inline-block\">{error?.size}</span>\r\n                }\r\n                {error?.duplicate &&\r\n                    <span className=\"text-info d-block small my-1 d-inline-block\">{error?.duplicate}</span>\r\n                }\r\n            </div>\r\n            {defaultUploadBox &&\r\n                <div className={`${defaultUploadBox ? 'mark-center' : ''}`}>\r\n                    <button onClick={(e) => handleObvAdd(e)}\r\n                            className={`btn btn-secondary`}>\r\n                        <Icon icon=\"heroicons-outline:upload\" width=\"25\" height=\"22\"/>\r\n                        Upload Observation\r\n                    </button>\r\n                </div>\r\n            }\r\n        </div>\r\n    )\r\n}\r\nexport default UploadImageUI;"],"names":["props","setData","thumb","uploadProgress","error","update","useState","file","setFile","preview","setPreview","reset","setReset","setLoaderLoading","useLayoutEffect","reader","FileReader","onloadend","base64String","result","replace","baseImage","readAsDataURL","previewImage","useEffect","prev","thumbnail_image","toBase64","Promise","resolve","reject","onload","onerror","fetch","then","response","contentType","headers","get","blob","catch","console","log","fileName","split","pop","trim","File","image","setTimeout","for","className","UploadImageUI","blogUpload","handleUploadImage","e","target","files","onClick","preventDefault","removePreviewAndClearImageData","icon","width","height","BlurImage","loaderLoading","state","maxLimit","imageFormat","multiple","small","handleObvAdd","defaultUploadBox","htmlFor","color","type","name","id","accept","onChange","count","size","duplicate"],"sourceRoot":""}