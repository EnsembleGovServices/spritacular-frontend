"use strict";(self.webpackChunkspritacular_frontend=self.webpackChunkspritacular_frontend||[]).push([[8678],{98678:function(e,i,n){n.r(i),n.d(i,{default:function(){return h}});var l=n(42982),t=n(1413),s=n(70885),o=n(7788),d=n(26022),a=n(72791),u=n(80184),c=function(e){var i=e.quizControl,n=e.activeQuestion,l=(0,a.useState)(),t=(0,s.Z)(l,2),d=t[0],c=t[1],v=(0,a.useRef)(null);return(0,a.useEffect)((function(){var e=null!==i&&void 0!==i&&i.active?100*(null===i||void 0===i?void 0:i.active)/(null===i||void 0===i?void 0:i.total):6.67;c(e)}),[null===i||void 0===i?void 0:i.active,n]),(0,a.useEffect)((function(){d>51?v.current.classList.add("text-white"):v.current.classList.remove("text-white")}),[d]),(0,u.jsxs)("div",{className:"quiz-progress",children:[(0,u.jsxs)("div",{className:"total",ref:v,children:[null===i||void 0===i?void 0:i.active," / ",null===i||void 0===i?void 0:i.total]}),(0,u.jsx)(o.Ex,{animated:!0,value:d})]})},v=function(e){var i=e.options,n=e.quizControl,l=e.handleNextPrev,t=e.activeQuestion,s=e.handleTleCheck,a=e.handleQuizSubmit,v=e.disable,r=e.loading,m=e.answers;return(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{className:"card",children:[r&&(0,u.jsx)(d.Z,{loaderClass:"quiz-loading"}),(0,u.jsxs)("div",{className:"card-top-image",children:[(0,u.jsx)("img",{src:null===t||void 0===t?void 0:t.image_url,alt:null===t||void 0===t?void 0:t.id}),(0,u.jsx)(c,{quizControl:n,activeQuestion:null===t||void 0===t?void 0:t.id})]}),(0,u.jsxs)("div",{className:"card-body",children:[(0,u.jsx)("h5",{className:"card-title mb-4",children:"Choose the correct Transient Luminous Event (TLE) type of this image"}),(0,u.jsx)("div",{className:"mcq-main",children:(0,u.jsxs)(o.X2,{children:[null===i||void 0===i?void 0:i.map((function(e,i){return(0,u.jsx)(o.JX,{md:6,children:(0,u.jsxs)("div",{className:"checkbox-group",children:[(0,u.jsx)("input",{id:e.id,name:"tle_type",type:"checkbox",value:e.id,checked:(null===m||void 0===m?void 0:m.find((function(i){return i===(null===e||void 0===e?void 0:e.id)})))===(null===e||void 0===e?void 0:e.id),onChange:function(){return s(e.id)}}),(0,u.jsx)("label",{htmlFor:e.id,children:null===e||void 0===e?void 0:e.title})]})},e.id+i)})),(0,u.jsx)(o.JX,{sm:12,className:"mt-5",children:(0,u.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,u.jsx)("button",{type:"button",value:"prev",disabled:null===v||void 0===v?void 0:v.prevBtn,onClick:function(e){return l(e.target.value)},className:"btn px-5 btn-outline-dark",children:"Prev"}),14===(null===n||void 0===n?void 0:n.activeIndex)?(0,u.jsx)("button",{type:"submit",onClick:a,disabled:null===v||void 0===v?void 0:v.nextBtn,className:"btn px-5 btn-primary",children:"Submit"}):(0,u.jsx)("button",{type:"button",value:"next",disabled:null===v||void 0===v?void 0:v.nextBtn,onClick:function(e){return l(e.target.value)},className:"btn px-5 btn-primary",children:"Next"})]})})]})})]})]})})},r=n(94677),m=n(74551),f=n(17834),x=n(92927),h=function(e){e.roles;var i,n,d,c,h,p,j=(0,f.Z)().auth,b=(0,a.useState)([]),g=(0,s.Z)(b,2),Z=g[0],N=g[1],w=(0,a.useState)([]),C=(0,s.Z)(w,2),y=C[0],k=C[1],q=(0,a.useState)({}),S=(0,s.Z)(q,2),z=S[0],E=S[1],I=(0,a.useState)({active:1,activeIndex:0}),B=(0,s.Z)(I,2),T=B[0],_=B[1],Q=(0,a.useState)(),X=(0,s.Z)(Q,2),F=(X[0],X[1]),J=(0,a.useState)({que:null,ans:[]}),L=(0,s.Z)(J,2),A=L[0],P=L[1],R=(0,a.useState)([]),D=(0,s.Z)(R,2),U=D[0],W=D[1],Y=(0,a.useState)({success:null,error:null}),G=(0,s.Z)(Y,2),H=G[0],K=G[1],M=(0,a.useState)(!1),O=(0,s.Z)(M,2),V=O[0],$=O[1],ee=(0,a.useState)({prevBtn:!0,nextBtn:!0}),ie=(0,s.Z)(ee,2),ne=ie[0],le=ie[1],te=null===H||void 0===H||null===(i=H.success)||void 0===i?void 0:i.score,se=function(e){var i;e.preventDefault(),$(!0),r.Z.post(m.v2.quiz_submit,U,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(null===j||void 0===j||null===(i=j.token)||void 0===i?void 0:i.access)}}).then((function(e){var i,n;K({error:{},success:{message:null===e||void 0===e||null===(i=e.data)||void 0===i?void 0:i.success,score:null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.score}}),$(!1),W([]),window.scrollTo(0,0)})).catch((function(e){var i,n,l;K({success:{},error:{message:null===e||void 0===e||null===(i=e.response)||void 0===i||null===(n=i.data)||void 0===n?void 0:n.details,status:null===e||void 0===e||null===(l=e.response)||void 0===l?void 0:l.statusText}}),$(!1),window.scrollTo(0,0)}))};return(0,a.useEffect)((function(){_((function(e){return(0,t.Z)((0,t.Z)({},e),{},{activeIndex:(null===T||void 0===T?void 0:T.active)-1})}))}),[null===T||void 0===T?void 0:T.active]),(0,a.useEffect)((function(){(function(){var e;return r.Z.get(m.v2.quiz_question,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(null===j||void 0===j||null===(e=j.token)||void 0===e?void 0:e.access)}}).then((function(e){var i,n;k(null===e||void 0===e||null===(i=e.data)||void 0===i?void 0:i.option_list),N(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.question_list)})).catch((function(e){console.log(e)}))})().then((function(e){return e}))}),[]),(0,a.useEffect)((function(){E(null===Z||void 0===Z?void 0:Z[T.active-1]),_((function(e){return(0,t.Z)((0,t.Z)({},e),{},{total:null===Z||void 0===Z?void 0:Z.length})}))}),[Z]),(0,a.useEffect)((function(){var e=null===Z||void 0===Z?void 0:Z.filter((function(e,i){if(i===(null===T||void 0===T?void 0:T.active)-1)return e})).map((function(e,i){return e}));E(e[0])}),[null===T||void 0===T?void 0:T.active]),(0,a.useEffect)((function(){var e,i;P({que:null===z||void 0===z?void 0:z.id,ans:null!==(e=U[T.activeIndex])&&void 0!==e&&e.ans?null===(i=U[T.activeIndex])||void 0===i?void 0:i.ans:[]})}),[null===z||void 0===z?void 0:z.id]),(0,a.useEffect)((function(){var e=(0,t.Z)({},A);null!==z&&void 0!==z&&z.id&&(U[T.activeIndex]=e)}),[A.ans]),(0,a.useEffect)((function(){var e,i,n,l;(null===U||void 0===U||null===(e=U[null===T||void 0===T?void 0:T.activeIndex])||void 0===e||null===(i=e.ans)||void 0===i?void 0:i.length)>0&&(null===A||void 0===A||null===(n=A.ans)||void 0===n?void 0:n.length)>0?le((0,t.Z)((0,t.Z)({},ne),{},{nextBtn:!1,prevBtn:0===(null===T||void 0===T?void 0:T.activeIndex)||(null===A||void 0===A||null===(l=A.ans)||void 0===l?void 0:l.length)<1})):le((0,t.Z)((0,t.Z)({},ne),{},{nextBtn:!0,prevBtn:0===(null===T||void 0===T?void 0:T.activeIndex)}))}),[null===U||void 0===U||null===(n=U[null===T||void 0===T?void 0:T.activeIndex])||void 0===n?void 0:n.ans,null===A||void 0===A?void 0:A.ans]),(0,a.useEffect)((function(){}),[]),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("section",{className:"quiz-main",children:(0,u.jsx)(o.W2,{children:(0,u.jsx)("form",{onSubmit:se,children:(0,u.jsxs)(o.X2,{className:"align-items-center",children:[(0,u.jsx)(o.JX,{sm:12,children:(null===H||void 0===H||null===(d=H.error)||void 0===d?void 0:d.message)&&(0,u.jsx)("div",{className:"error-card",children:(0,u.jsx)(o.sU,{color:"danger","data-dismiss":"alert",dismissible:"true",children:null===H||void 0===H||null===(c=H.error)||void 0===c?void 0:c.message})})}),(0,u.jsx)(o.JX,{sm:12,children:null!==H&&void 0!==H&&H.success?(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("div",{className:"card quiz-submitted",children:(0,u.jsxs)("div",{className:"card-body",children:[(0,u.jsx)("div",{className:"result-image",children:te<75?(0,u.jsx)("img",{className:"img-fluid success-img",src:x.Z.failedImage,alt:"success"}):(0,u.jsx)("img",{className:"img-fluid success-img",src:x.Z.successImage,alt:"success"})}),(0,u.jsx)("h6",{className:"title",children:null===H||void 0===H||null===(p=H.success)||void 0===p?void 0:p.message}),(0,u.jsxs)("div",{className:te>75?"score pass fw-bolder":"score fw-bolder",children:[null===te||void 0===te?void 0:te.toFixed(0),"%"]}),te<75?(0,u.jsx)("button",{type:"button",onClick:function(){return window.location.reload(!1)},className:"px-4 py-2 mb-4 fw-bolder btn btn-primary",children:"Re-attempt Quiz"}):(0,u.jsx)("div",{className:"px-4 py-2 mb-4 fw-bolder",children:(0,u.jsxs)("h5",{className:"mb-0",children:[(0,u.jsx)("span",{className:"text-success",children:"Congratulations! "}),(0,u.jsx)("span",{children:"Your account has been upgraded."})]})})]})})}):(0,u.jsx)(v,{singleAnswer:A,activeQuestion:z,options:y,loading:V,answers:null===U||void 0===U||null===(h=U[null===T||void 0===T?void 0:T.activeIndex])||void 0===h?void 0:h.ans,quizControl:T,disable:ne,handleNextPrev:function(e){window.scrollTo(0,0),F(e),_((function(i){return(0,t.Z)((0,t.Z)({},i),{},{active:"next"===e?T.active<(null===T||void 0===T?void 0:T.total)?T.active+1:T.active:T.active>1?T.active-1:T.active})}))},handleTleCheck:function(e){if(null!==A&&void 0!==A&&A.ans.includes(e)){var i,n=null===A||void 0===A||null===(i=A.ans)||void 0===i?void 0:i.filter((function(i){return i!==e}));P((function(e){return(0,t.Z)((0,t.Z)({},e),{},{ans:n})}))}else{var s=[].concat((0,l.Z)(null===A||void 0===A?void 0:A.ans),[e]);P((function(e){return(0,t.Z)((0,t.Z)({},e),{},{que:null===z||void 0===z?void 0:z.id,ans:s})}))}},handleSubmit:se})})]})})})})})}}}]);
//# sourceMappingURL=8678.673be536.chunk.js.map