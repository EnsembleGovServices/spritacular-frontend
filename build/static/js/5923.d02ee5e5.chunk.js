"use strict";(self.webpackChunkspritacular_frontend=self.webpackChunkspritacular_frontend||[]).push([[5923,2678],{92678:function(e,n,t){t.r(n),t.d(n,{default:function(){return m}});var i=t(1413),a=t(42982),o=t(70885),r=t(7551),l=t(60536),c=t.n(l),s=t(74551),u=t(17834),d=t(72791),f=t(43504),v=t(80184),m=function(e){var n=e.data,t=e.setData,l=e.editorData,m=e.setLoading,h=e.setReadMode,g=e.readMode,p=e.readOnly,x=(0,u.Z)().auth,b=(0,f.lr)(),j="edit"!==(0,o.Z)(b,1)[0].get("mode"),Z=(0,d.useState)([]),w=(0,o.Z)(Z,2),y=w[0],N=w[1],k=(0,d.useState)(!1),_=(0,o.Z)(k,2),C=_[0],B=_[1],F=(0,d.useState)([]),L=(0,o.Z)(F,2),S=L[0],D=L[1];var E={toolbar:{items:["undo","redo","fontsize","fontColor","fontBackgroundColor","|","heading","|","alignment","|","bold","italic","|","link","|","bulletedList","numberedList","insertTable","mergeTableCells","|","insertImage","codeBlock","|","code","HorizontalLine","SpecialCharacters","ImageResize","pageBreak"],shouldNotGroupWhenFull:!1},removePlugins:["Title"],extraPlugins:[function(e){e.plugins.get("FileRepository").createUploadAdapter=function(e){return function(e){return B(!1),{upload:function(){return new Promise((function(n,t){var i=new FormData;m(!0),e.file.then((function(e){var o;i.append("image",e),(new Headers).append("Authorization","Bearer ".concat(null===x||void 0===x||null===(o=x.token)||void 0===o?void 0:o.access)),fetch("".concat(s.v2.blog_image_upload),{method:"post",body:i}).then((function(e){return e.json()})).then((function(e){m(!1),n({default:e.url}),N((function(n){return[].concat((0,a.Z)(n),[{id:e.image_id,url:e.url}])}))})).catch((function(e){t(e)}))}))}))}}}(e)}}]};return(0,d.useEffect)((function(){t&&t((function(e){return(0,i.Z)((0,i.Z)({},e),{},{image_ids:y})}))}),[y,S]),(0,d.useEffect)((function(){if(C&&y){var e,n=null===l||void 0===l||null===(e=l.image_ids)||void 0===e?void 0:e.filter((function(e){return S.includes(e.url)})).map((function(e){return e}));N(n)}}),[S,C]),(0,d.useEffect)((function(){h&&h(j)}),[j]),(0,v.jsx)(v.Fragment,{children:(0,v.jsx)(r.CKEditor,{editor:c(),config:E,data:n||"",then:function(e){console.log(e)},onReady:function(e){var n=e.ui.view.stickyPanel;e.isReadOnly=g||p,e.isReadOnly&&(e.ui.view.top.remove(n),e.ui.view.editable.element.classList.add("p-0"),e.ui.view.editable.element.classList.add("border-0"))},onChange:function(e,n){B(!1);var a=n.getData();n.model.document.on("change:data",(function(){B(!0)}));var o=Array.from((new DOMParser).parseFromString(n.getData(),"text/html").querySelectorAll("img")).map((function(e){return e.getAttribute("src")}));D(o),t&&t((function(e){return(0,i.Z)((0,i.Z)({},e),{},{content:a})}))},onFocus:function(e,n){},onBlur:function(e,n){}})})}},35727:function(e,n,t){var i=t(7788),a=t(43504),o=t(74551),r=t(80184);n.Z=function(e){var n=e.page,t=e.title;return(0,r.jsxs)(i.aG,{children:[(0,r.jsx)(i.gN,{children:(0,r.jsx)(a.rU,{to:o.X0.home,children:"Home"})}),(0,r.jsx)(i.gN,{children:(0,r.jsxs)(a.rU,{to:"/".concat(null===n||void 0===n?void 0:n.toLowerCase()),className:"text-capitalize",children:[" ",n||""," "]})}),(0,r.jsx)(i.gN,{active:!0,children:t||""})]})}},85923:function(e,n,t){t.r(n);var i=t(74165),a=t(15861),o=t(70885),r=(t(51136),t(7788)),l=t(72791),c=t(16871),s=t(43504),u=t(94677),d=t(74551),f=t(17834),v=t(35727),m=t(92678),h=t(80184);n.default=function(){var e,n=(0,l.useState)(),t=(0,o.Z)(n,2),g=t[0],p=t[1],x=(0,c.UO)().slug,b=(0,f.Z)().auth,j=null===b||void 0===b||null===(e=b.user)||void 0===e?void 0:e.is_superuser,Z=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.Z.get("".concat(d.v2.get_single_blog).concat(x,"/"),{headers:{"Content-Type":"application/json"}}).then((function(e){var n;p(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.data)})).catch((function(e){console.log("error",e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,l.useEffect)((function(){Z().then((function(e){return e}))}),[]),(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)("div",{className:"tutorial-details_page position-relative",children:[(0,h.jsx)("div",{className:"common-banner"}),(0,h.jsx)("section",{className:"tutorial-detail-main",children:(0,h.jsxs)(r.W2,{children:[(0,h.jsx)("div",{className:"breadcrumb-main",children:(0,h.jsx)(v.Z,{page:"Blog",title:(null===g||void 0===g?void 0:g.title.split(" ").length)>6?"".concat(null===g||void 0===g?void 0:g.title.split(" ",6).join(" "),"..."):null===g||void 0===g?void 0:g.title})}),(0,h.jsxs)("div",{className:"mb-4 mt-3 d-flex align-items-center justify-content-between",children:[(0,h.jsx)("h2",{className:"mb-0",children:null===g||void 0===g?void 0:g.title}),j&&(0,h.jsx)(s.rU,{to:g?"/".concat(d.X0.dashboard,"/").concat(d.X0.dashBlog.list,"/").concat(x,"/edit"):"",className:"btn btn-primary px-4 btn-sm",children:"Edit"})]}),(0,h.jsx)(r.X2,{children:(0,h.jsx)(r.JX,{md:12,children:(0,h.jsx)("div",{className:"card border-0 shadow-sm",children:(0,h.jsx)("div",{className:"card-body p-5",children:(0,h.jsx)(m.default,{data:null===g||void 0===g?void 0:g.content,readOnly:!0})})})})})]})})]})})}},51136:function(){}}]);
//# sourceMappingURL=5923.d02ee5e5.chunk.js.map