"use strict";(self.webpackChunkspritacular_frontend=self.webpackChunkspritacular_frontend||[]).push([[2345],{32345:function(e,t,n){n.r(t);var a=n(4942),i=n(1413),o=n(15861),r=n(70885),s=n(87757),l=n.n(s),c=n(7788),d=n(26022),u=n(94677),p=n(74551),v=n(72791),h=n(16871),m=n(43504),f=n(17834),g=n(80184),x=(0,v.lazy)((function(){return Promise.all([n.e(9378),n.e(2678)]).then(n.bind(n,92678))})),b=(0,v.lazy)((function(){return n.e(5019).then(n.bind(n,75019))})),y=(0,v.lazy)((function(){return n.e(1899).then(n.bind(n,61899))})),j=(0,v.lazy)((function(){return n.e(3690).then(n.bind(n,73690))}));t.default=function(e){var t=e.type,n=e.update,s=(0,f.Z)().auth,_=(0,h.UO)().slug,w=(0,v.useState)({title:"",description:"",content:"",image_ids:[],category:"",article_type:"",thumbnail_image:void 0}),Z=(0,r.Z)(w,2),k=Z[0],C=Z[1],N=(0,v.useState)(),T=(0,r.Z)(N,2),S=T[0],z=T[1],X=(0,v.useState)(!1),D=(0,r.Z)(X,2),J=D[0],U=D[1],I=(0,v.useState)(),P=(0,r.Z)(I,2),B=P[0],E=P[1],A=(0,v.useState)(),q=(0,r.Z)(A,2),F=q[0],L=q[1],M=(0,v.useState)("0"),O=(0,r.Z)(M,2),H=O[0],R=O[1],W=(0,v.useState)(),G=(0,r.Z)(W,2),K=G[0],Q=G[1],V=new FormData,Y=(0,h.s0)(),$=(0,h.TH)(),ee=function(){var e=(0,o.Z)(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.Z.get(p.v2.blog_category,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(null===s||void 0===s||null===(n=s.token)||void 0===n?void 0:n.access)}}).then((function(e){z(e.data)})).catch((function(e){console.log("error",e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),te=function(){return!(void 0!==(null===k||void 0===k?void 0:k.thumbnail_image)&&null!==k&&void 0!==k&&k.title&&null!==k&&void 0!==k&&k.description&&(1!==(null===k||void 0===k?void 0:k.article_type)||(null===k||void 0===k?void 0:k.category)))},ne=function(e){Q(e.target.value),L(""),E(""),e.preventDefault();var t=e.target.name,n=e.target.value;C((0,i.Z)((0,i.Z)({},k),{},(0,a.Z)({},t,n)))},ae=n?"".concat(p.v2.blog_tut_update).concat(_,"/"):p.v2.create_blog,ie=function(){var e=(0,o.Z)(l().mark((function e(a){var i,o,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),U(!0),E(""),L(""),i=JSON.stringify(null===k||void 0===k?void 0:k.image_ids),V.append("thumbnail_image",null===k||void 0===k?void 0:k.thumbnail_image),V.append("article_type",null===k||void 0===k?void 0:k.article_type),V.append("title",null===k||void 0===k?void 0:k.title),V.append("description",null===k||void 0===k?void 0:k.description),V.append("content",null===k||void 0===k?void 0:k.content),V.append("image_ids",i),"1"!==(null===k||void 0===k?void 0:k.article_type)&&"blog"!==t||V.append("category",null===k||void 0===k?void 0:k.category),n){e.next=18;break}return e.next=15,u.Z.post(ae,V,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(null===s||void 0===s||null===(o=s.token)||void 0===o?void 0:o.access)},onUploadProgress:function(e){var t=Math.round(e.loaded/e.total*100)+"%";R(t)}}).then((function(e){U(!1),E({status:e.status,message:e.data.success}),window.scrollTo(0,0),setTimeout((function(){"1"===(null===k||void 0===k?void 0:k.article_type)||"blog"===t?Y("/dashboard/blog",{replace:!0}):Y("/dashboard/tutorial",{replace:!0})}),1e3)})).catch((function(e){U(!1),L({status:e.response.status,message:e.response.data})}));case 15:case 20:return e.abrupt("return",e.sent);case 18:return e.next=20,u.Z.put(ae,V,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(null===s||void 0===s||null===(r=s.token)||void 0===r?void 0:r.access)},onUploadProgress:function(e){var t=Math.round(e.loaded/e.total*100)+"%";R(t)}}).then((function(e){U(!1),E({status:e.status,message:e.data.success}),window.scrollTo(0,0),setTimeout((function(){"1"===(null===k||void 0===k?void 0:k.article_type)||"blog"===t?Y("/dashboard/blog",{replace:!0}):Y("/dashboard/tutorial",{replace:!0})}),1e3)})).catch((function(e){U(!1),L({status:e.response.status,message:e.response.data})}));case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();(0,v.useEffect)((function(){ee().then((function(e){return e}))}),[]),(0,v.useEffect)((function(){"/dashboard/blog/create"===$.pathname?C((function(e){return(0,i.Z)((0,i.Z)({},e),{},{category:"1",article_type:"1"})})):"/dashboard/tutorial/create"===$.pathname&&C((function(e){return(0,i.Z)((0,i.Z)({},e),{},{category:null,article_type:"2"})}))}),[$]),(0,v.useEffect)((function(){K&&(k&&"1"===(null===k||void 0===k?void 0:k.article_type)?(console.log("condition",null===k||void 0===k?void 0:k.article_type),Y("/dashboard/blog/".concat(p.X0.dashBlog.create),{replace:!0})):k&&"2"===(null===k||void 0===k?void 0:k.article_type)&&(console.log("condition",null===k||void 0===k?void 0:k.article_type),Y("/dashboard/tutorial/".concat(p.X0.dashTutorial.create),{replace:!0})))}),[null===k||void 0===k?void 0:k.article_type]);var oe=function(){var e=(0,o.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.Z.get("".concat(p.v2.get_single_blog).concat(_,"/"),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(null===s||void 0===s||null===(t=s.token)||void 0===t?void 0:t.access)}}).then((function(e){var t,n=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.data;C((function(e){return(0,i.Z)((0,i.Z)({},e),n)}))})).catch((function(e){var t;200!==(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.statusCode)&&Y("/404",{replace:!0})}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,v.useLayoutEffect)((function(){n&&oe().then((function(e){return e}))}),[n]),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:"position-relative",children:(0,g.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,g.jsxs)("h2",{className:"mb-0 text-capitalize",children:[n?"Update":"Create"," ",t]}),(0,g.jsxs)(m.rU,{to:"/".concat(p.X0.dashboard,"/").concat(t),className:"btn btn-primary px-4 text-capitalize",children:[t," lists"]})]})}),(0,g.jsxs)(c.l0,{className:"py-3 card py-4 px-4 py-md-5 px-md-5 shadow border-0 mt-5",onSubmit:ie,children:[B&&(0,g.jsx)("div",{className:"row",children:(0,g.jsx)(c.JX,{sm:12,children:(0,g.jsx)(c.sU,{color:"success",children:null===B||void 0===B?void 0:B.message})})}),F&&(0,g.jsx)("div",{className:"row",children:(0,g.jsx)(c.JX,{sm:12,children:(0,g.jsx)(c.sU,{color:"danger",children:null===F||void 0===F?void 0:F.message.detail})})}),(0,g.jsxs)("div",{className:"row position-relative",children:[(0,g.jsxs)(c.JX,{sm:12,md:8,className:"mb-4 mb-md-0",children:[(0,g.jsxs)("div",{className:"row g-4",children:[(0,g.jsx)(c.JX,{sm:12,md:"1"===(null===k||void 0===k?void 0:k.article_type)||"blog"===t?6:12,children:(0,g.jsx)(y,{blogType:null===k||void 0===k?void 0:k.article_type,handleInput:ne,update:n,setData:C,type:t})}),"blog"===t&&(0,g.jsx)(c.JX,{sm:12,md:6,children:(0,g.jsx)(j,{handleInput:ne,category:S})})]}),(0,g.jsxs)(c.cw,{children:[(0,g.jsx)(c.__,{for:"title",children:"Title"}),(0,g.jsx)(c.II,{id:"title",type:"text",name:"title",placeholder:"Enter blog title",autoComplete:"off",value:k?null===k||void 0===k?void 0:k.title:"",required:!0,onChange:function(e){return ne(e)}})]}),(0,g.jsxs)(c.cw,{children:[(0,g.jsx)(c.__,{for:"description",children:"Description"}),(0,g.jsx)(c.II,{id:"description",type:"textarea",rows:2,name:"description",placeholder:"Write description",autoComplete:"off",value:k?null===k||void 0===k?void 0:k.description:"",required:!0,onChange:function(e){return ne(e)}})]}),(0,g.jsxs)(c.cw,{children:[(0,g.jsx)(c.__,{for:"content",children:"Content"}),(0,g.jsx)(v.Suspense,{fallback:(0,g.jsx)("div",{children:"Please wait..."}),children:(0,g.jsx)(x,{setLoading:U,editorData:k,setData:C,data:null===k||void 0===k?void 0:k.content})})]})]}),(0,g.jsx)(c.JX,{sm:12,md:4,children:(0,g.jsx)(v.Suspense,{fallback:(0,g.jsx)("div",{children:"Please wait..."}),children:(0,g.jsx)(b,{uploadProgress:H,handleInput:ne,error:F,setData:C,updata:n,thumb:null===k||void 0===k?void 0:k.thumbnail_image})})}),(0,g.jsx)(c.JX,{sm:12,children:(0,g.jsxs)("div",{className:"mt-4",children:[(0,g.jsx)("button",{type:"submit",disabled:te(),className:"btn px-4 py-2 px-sm-5 py-sm-2 ".concat(te()?"btn-light text-light-dark":"btn-primary"),children:n?"Update":"Create"}),(0,g.jsx)("button",{type:"reset",className:"btn btn-dark px-4 py-2 px-sm-5 py-sm-2 ms-2",children:"Reset"})]})}),J&&(0,g.jsx)(d.Z,{fixContent:!0})]})]})]})}}}]);
//# sourceMappingURL=2345.21a6db26.chunk.js.map