{"version":3,"file":"static/js/2049.a10f37d8.chunk.js","mappings":"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","sources":["components/Shared/LoadMore.jsx","pages/Gallery.jsx"],"sourcesContent":["import { Button} from 'reactstrap';\r\n\r\nexport const LoadMore = (props) => {\r\n    const {handleLoadMore} = props;\r\n    return (\r\n        <Button className='gray-outline-btn d-block mx-auto px-4 fw-normal' onClick={()=> handleLoadMore()}>Load more</Button>\r\n    )\r\n};","import \"../assets/scss/component/myObservation.scss\";\r\nimport \"../assets/scss/component/gallery.scss\";\r\nimport {lazy, Suspense, useEffect, useState} from \"react\";\r\nimport {Container, UncontrolledAlert} from \"reactstrap\";\r\nimport {Link} from \"react-router-dom\";\r\n\r\nimport useAuth from \"../hooks/useAuth\";\r\nimport axios from \"../api/axios\";\r\nimport {baseURL, routeUrls} from \"../helpers/url\";\r\nimport Images from \"./../static/images\";\r\nimport {LoadMore} from \"../components/Shared/LoadMore\";\r\nimport useObservationsData from \"../hooks/useObservationsData\";\r\n\r\nconst ObservationDetails = lazy(() =>\r\n    import(\"./Observation/ObservationDetails\")\r\n);\r\nconst FilterSelectMenu = lazy(() =>\r\n    import(\"../components/Shared/FilterSelectMenu\")\r\n);\r\nconst ObservationDetailPage = lazy(() =>\r\n    import(\"./Observation/ObservationDetailPage\")\r\n);\r\n\r\nconst Gallery = () => {\r\n    const [isObservationDetailModal, setObservationDetailModal] = useState(false);\r\n    const [isLoaded, setIsLoaded] = useState(true);\r\n    const [selectedObservationId, setSelectedObservationId] = useState();\r\n    const [searchCountry, setSearchCountry] = useState(\"\");\r\n    const [isFilterOpen, setIsFilterOpen] = useState({\r\n        isCountryOpen: false,\r\n        isTypeOpen: false,\r\n        isStatusOpen: false,\r\n    });\r\n    const [selectedFilterHorizontal, setSelectedFilterHorizontal] = useState({\r\n        country: {name: \"\", code: \"\"},\r\n        type: \"\",\r\n        status: \"\",\r\n    });\r\n\r\n    const {observationListData, setObservationListData} = useObservationsData();\r\n    const {auth} = useAuth();\r\n    const [loadMore, setLoadMore] = useState(10);\r\n    const [pageSize, setPageSize] = useState(10);\r\n    const [nextPageUrl, setNextPageUrl] = useState(\r\n        `${baseURL.api}/observation/gallery/?country=&category=&status=`\r\n    );\r\n    const normalUser = auth?.user?.is_user;\r\n    useEffect(() => {\r\n        setLoadMore(pageSize);\r\n        getObservationType(\r\n            true,\r\n            \"\",\r\n            selectedFilterHorizontal.type,\r\n            selectedFilterHorizontal.status\r\n        );\r\n        setIsLoaded(false);\r\n    }, [isLoaded]);\r\n\r\n    const findCountry = (e) => {\r\n        let value = e.target.value.toLowerCase();\r\n        setSearchCountry(value);\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (isFilterOpen.isCountryOpen === false) {\r\n            setSearchCountry(\"\");\r\n        }\r\n    }, [isFilterOpen.isCountryOpen]);\r\n\r\n    useEffect(() => {\r\n        setObservationListData((prev) => {\r\n            return {\r\n                ...prev,\r\n                active: observationListData?.list?.[selectedObservationId],\r\n            };\r\n        });\r\n    }, [isObservationDetailModal]);\r\n\r\n    const handleLoadMoreData = () => {\r\n        getObservationType(\r\n            false,\r\n            selectedFilterHorizontal.country?.code,\r\n            selectedFilterHorizontal.type,\r\n            selectedFilterHorizontal.status\r\n        );\r\n    };\r\n    const getObservationType = (\r\n        reset = false,\r\n        country = `${selectedFilterHorizontal.country?.code}`,\r\n        category = `${selectedFilterHorizontal.type}`,\r\n        status = `${selectedFilterHorizontal.status}`\r\n    ) => {\r\n        let url;\r\n        if (reset === true || !nextPageUrl) {\r\n            url = `${baseURL.api}/observation/gallery/?country=${country}&category=${category}&status=${status}&page=1`;\r\n        } else {\r\n            url = nextPageUrl;\r\n        }\r\n\r\n        const headers = {};\r\n        headers[\"Content-Type\"] = \"application/json\";\r\n        if (auth.user) {\r\n            headers[\"Authorization\"] = `Bearer ${auth?.token?.access}`;\r\n        }\r\n        axios\r\n            .get(url, {\r\n                headers: headers,\r\n            })\r\n            .then((success) => {\r\n                if (success?.data?.results?.data !== undefined) {\r\n                    if (success?.data?.next) {\r\n                        setNextPageUrl(success?.data?.next);\r\n                    } else {\r\n                        setNextPageUrl(null);\r\n                    }\r\n                    let records = success?.data?.results?.data;\r\n                    let prevData;\r\n\r\n                    if (observationListData?.list?.length > 0 && reset === false) {\r\n                        prevData = [...observationListData?.list];\r\n                        prevData = [...prevData, ...records];\r\n                    } else {\r\n                        prevData = success?.data?.results?.data;\r\n                    }\r\n                    setObservationListData((prev) => {\r\n                        return {\r\n                            ...prev,\r\n                            list: prevData,\r\n                        };\r\n                    });\r\n                    setIsLoaded(false);\r\n                } else {\r\n                    setNextPageUrl(null);\r\n                    setObservationListData({list: [], active: {}});\r\n                }\r\n            })\r\n            .catch((error) => {\r\n                console.log(error.response);\r\n            });\r\n    };\r\n    const handleObservationDetailModal = (id) => {\r\n        setObservationDetailModal(!isObservationDetailModal);\r\n        setSelectedObservationId(id);\r\n    };\r\n\r\n    const handleFilterValue = (value, type) => {\r\n        setObservationListData([]);\r\n        // setLoadMore(pageSize);\r\n        if (type === \"status\") {\r\n            value = value.toLowerCase();\r\n            getObservationType(\r\n                true,\r\n                selectedFilterHorizontal.country?.code,\r\n                selectedFilterHorizontal.type,\r\n                value\r\n            );\r\n        } else if (type === \"category\") {\r\n            getObservationType(\r\n                true,\r\n                selectedFilterHorizontal.country?.code,\r\n                value,\r\n                selectedFilterHorizontal.status\r\n            );\r\n        } else if (type === \"country\") {\r\n            getObservationType(\r\n                true,\r\n                value.code,\r\n                selectedFilterHorizontal.type,\r\n                selectedFilterHorizontal.status\r\n            );\r\n        }\r\n    };\r\n\r\n\r\n    useEffect(() => {\r\n        setObservationListData((prev) => {\r\n            return {\r\n                ...prev,\r\n                activeType: \"\",\r\n                list: []\r\n            }\r\n        })\r\n        getObservationType(true, \"\", \"\", \"\");\r\n    }, [])\r\n\r\n    return (\r\n        <>\r\n            <Suspense fallback={<div>please wait...</div>}>\r\n                <FilterSelectMenu\r\n                    galleryFilter={true}\r\n                    isFilterOpen={isFilterOpen}\r\n                    setIsFilterOpen={setIsFilterOpen}\r\n                    selectedFilterHorizontal={selectedFilterHorizontal}\r\n                    setSelectedFilterHorizontal={setSelectedFilterHorizontal}\r\n                    searchCountry={searchCountry}\r\n                    findCountry={findCountry}\r\n                    handleFilterValue={handleFilterValue}\r\n                />\r\n            </Suspense>\r\n\r\n            <Container className=\"pt-5\">\r\n                {normalUser && (\r\n                    <UncontrolledAlert\r\n                        color=\"danger\"\r\n                        data-dismiss=\"alert\"\r\n                        dismissible=\"true\"\r\n                        className=\"text-center mb-5\"\r\n                    >\r\n                        Would you like to help us sift through observations and endorse\r\n                        their validity?\r\n                        <Link\r\n                            to={\"/\" + routeUrls.tutorials}\r\n                            className=\"btn btn-outline-primary\"\r\n                        >\r\n                            Get Trained\r\n                        </Link>\r\n                    </UncontrolledAlert>\r\n                )}\r\n                {observationListData?.list && (\r\n                    <div className=\"gallery-page\">\r\n                        <h4 className=\"text-black fw-bold\">Recent Observations</h4>\r\n                        <div>\r\n                            {observationListData?.list.length > 0 ? (\r\n                                <Suspense fallback={<div>please wait...</div>}>\r\n                                    <ObservationDetailPage\r\n                                        observationList={observationListData?.list}\r\n                                        isObservationDetailModal={isObservationDetailModal}\r\n                                        setObservationDetailModal={setObservationDetailModal}\r\n                                        setSelectedObservationId={setSelectedObservationId}\r\n                                    />\r\n                                </Suspense>\r\n                            ) : (\r\n                                <div className=\"data-not-found\">\r\n                                    <img\r\n                                        src={Images.NoDataFound}\r\n                                        alt=\"No data found\"\r\n                                        className=\"mb-3\"\r\n                                    />\r\n                                    <p>\r\n                                        <b className=\"text-secondary fw-bold\">Opps!</b> No Data\r\n                                        Found\r\n                                    </p>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                        {nextPageUrl && <LoadMore handleLoadMore={handleLoadMoreData}/>}\r\n\r\n                        <Suspense fallback={<div>please wait...</div>}>\r\n                            <ObservationDetails\r\n                                data={observationListData?.active}\r\n                                activeType={\r\n                                    observationListData?.active?.is_verified\r\n                                        ? \"verified\"\r\n                                        : observationListData?.active?.is_reject\r\n                                            ? \"denied\"\r\n                                            : observationListData?.active?.is_submit\r\n                                                ? \"unverified\"\r\n                                                : \"draft\"\r\n                                }\r\n                                modalClass=\"observation-details_modal\"\r\n                                open={isObservationDetailModal}\r\n                                handleClose={handleObservationDetailModal}\r\n                                handleApproveRejectEvent={getObservationType}\r\n                                refreshData={getObservationType}\r\n                            />\r\n                        </Suspense>\r\n                    </div>\r\n                )}\r\n            </Container>\r\n        </>\r\n    );\r\n};\r\nexport default Gallery;\r\n"],"names":["LoadMore","props","handleLoadMore","className","onClick","ObservationDetails","lazy","FilterSelectMenu","ObservationDetailPage","useState","isObservationDetailModal","setObservationDetailModal","isLoaded","setIsLoaded","selectedObservationId","setSelectedObservationId","searchCountry","setSearchCountry","isCountryOpen","isTypeOpen","isStatusOpen","isFilterOpen","setIsFilterOpen","country","name","code","type","status","selectedFilterHorizontal","setSelectedFilterHorizontal","useObservationsData","observationListData","setObservationListData","auth","useAuth","setLoadMore","pageSize","baseURL","nextPageUrl","setNextPageUrl","normalUser","user","is_user","useEffect","getObservationType","prev","active","list","url","reset","category","headers","token","access","axios","then","success","undefined","data","results","next","prevData","records","length","catch","error","console","log","response","activeType","Suspense","fallback","galleryFilter","findCountry","e","value","target","toLowerCase","handleFilterValue","color","dismissible","to","routeUrls","observationList","src","Images","alt","is_verified","is_reject","is_submit","modalClass","open","handleClose","id","handleApproveRejectEvent","refreshData"],"sourceRoot":""}