"use strict";(self.webpackChunkspritacular_frontend=self.webpackChunkspritacular_frontend||[]).push([[568],{59122:function(t,e,n){n.d(e,{f:function(){return o}});var i=n(7788),a=n(80184),o=function(t){var e=t.handleLoadMore;return(0,a.jsx)(i.zx,{className:"gray-outline-btn d-block mx-auto px-4 fw-normal",onClick:function(){return e()},children:"Load more"})}},40872:function(t,e,n){var i=n(72791),a=n(21353);e.Z=function(){var t=(0,i.useContext)(a.J).observationListData;return(0,i.useDebugValue)(t,(function(t){return t?"List data set":"Listing data not set"})),(0,i.useContext)(a.J)}},70568:function(t,e,n){n.r(e),n.d(e,{default:function(){return m}});var i=n(74165),a=n(1413),o=n(42982),l=n(15861),s=n(70885),u=(n(33505),n(72791)),r=n(7788),d=n(43504),c=n(17834),v=n(94677),f=n(74551),h=n(59122),p=n(40872),y=n(80184),b=(0,u.lazy)((function(){return n.e(5423).then(n.bind(n,85423))})),x=(0,u.lazy)((function(){return n.e(7103).then(n.bind(n,27103))})),g=(0,u.lazy)((function(){return Promise.all([n.e(9136),n.e(8418)]).then(n.bind(n,66788))})),Z=(0,u.lazy)((function(){return Promise.all([n.e(3961),n.e(9852),n.e(4577)]).then(n.bind(n,4577))})),m=function(){var t,e,n,m,j,C=(0,c.Z)().auth,S=(0,u.useState)(!1),k=(0,s.Z)(S,2),D=k[0],O=k[1],L=(0,u.useState)(),z=(0,s.Z)(L,2),w=z[0],F=z[1],_=(0,u.useState)(""),N=(0,s.Z)(_,2),E=N[0],T=N[1],M=(0,u.useState)({isCountryOpen:!1,isTypeOpen:!1,isStatusOpen:!1}),A=(0,s.Z)(M,2),H=A[0],I=A[1],J=(0,u.useState)({country:{name:"",code:""},type:"",status:""}),P=(0,s.Z)(J,2),R=P[0],U=P[1],V=(0,p.Z)(),W=V.observationListData,q=V.setObservationListData,B=(0,u.useState)({loading:!0,hasData:!1}),G=(0,s.Z)(B,2),X=G[0],K=G[1],Q=(0,u.useState)(!1),Y=(0,s.Z)(Q,2),$=Y[0],tt=Y[1],et=null!==W&&void 0!==W&&null!==(t=W.active)&&void 0!==t&&t.is_verified?"verified":null!==W&&void 0!==W&&null!==(e=W.active)&&void 0!==e&&e.is_reject?"denied":null!==W&&void 0!==W&&null!==(n=W.active)&&void 0!==n&&n.is_submit?"unverified":"draft",nt=(0,u.useState)("".concat(f.v2.api,"/observation/gallery/?country=&category=&status=")),it=(0,s.Z)(nt,2),at=it[0],ot=it[1],lt=null===C||void 0===C||null===(m=C.user)||void 0===m?void 0:m.is_user,st=function(){var t=(0,l.Z)((0,i.Z)().mark((function t(){var e,n,l,s,u,r,d,c,h=arguments;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=h.length>0&&void 0!==h[0]&&h[0],l=h.length>1&&void 0!==h[1]?h[1]:"".concat(null===(e=R.country)||void 0===e?void 0:e.code),s=h.length>2&&void 0!==h[2]?h[2]:"".concat(R.type),u=h.length>3&&void 0!==h[3]?h[3]:"".concat(R.status),r=!0!==n&&at?at.replace("http","https"):"".concat(f.v2.api,"/observation/gallery/?country=").concat(l,"&category=").concat(s,"&status=").concat(u,"&page=1"),(d={})["Content-Type"]="application/json",null!==C&&void 0!==C&&C.user&&(d.Authorization="Bearer ".concat(null===C||void 0===C||null===(c=C.token)||void 0===c?void 0:c.access)),t.next=10,v.Z.get(r,{headers:d}).then((function(t){var e,i;if(void 0!==(null===t||void 0===t||null===(e=t.data)||void 0===e||null===(i=e.results)||void 0===i?void 0:i.data)){var l,s,u,r,d;if(null!==t&&void 0!==t&&null!==(l=t.data)&&void 0!==l&&l.next)ot(null===t||void 0===t||null===(d=t.data)||void 0===d?void 0:d.next);else ot(null);var c,v,f,h=null===t||void 0===t||null===(s=t.data)||void 0===s||null===(u=s.results)||void 0===u?void 0:u.data;if((null===W||void 0===W||null===(r=W.list)||void 0===r?void 0:r.length)>0&&!1===n)c=(0,o.Z)(null===W||void 0===W?void 0:W.list),c=[].concat((0,o.Z)(c),(0,o.Z)(h));else c=null===t||void 0===t||null===(v=t.data)||void 0===v||null===(f=v.results)||void 0===f?void 0:f.data;q((function(t){return(0,a.Z)((0,a.Z)({},t),{},{list:c})})),K((function(e){var n,i,o;return(0,a.Z)((0,a.Z)({},e),{},{loading:!1,hasData:(null===t||void 0===t||null===(n=t.data)||void 0===n||null===(i=n.results)||void 0===i||null===(o=i.data)||void 0===o?void 0:o.length)>0})}))}else ot(null),q({list:[],active:{}})})).catch((function(t){K((function(t){return(0,a.Z)((0,a.Z)({},t),{},{loading:!1})})),console.log(t.response)}));case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return(0,u.useEffect)((function(){!1===H.isCountryOpen&&T("")}),[H.isCountryOpen]),(0,u.useEffect)((function(){q((function(t){var e;return(0,a.Z)((0,a.Z)({},t),{},{active:null===W||void 0===W||null===(e=W.list)||void 0===e?void 0:e[w]})}))}),[D]),(0,u.useEffect)((function(){q((function(t){return(0,a.Z)((0,a.Z)({},t),{},{activeType:"",list:[]})})),st(!0,"","","").then((function(t){return t}))}),[]),(0,u.useEffect)((function(){tt(null===X||void 0===X?void 0:X.hasData)}),[null===X||void 0===X?void 0:X.hasData]),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(u.Suspense,{fallback:(0,y.jsx)("div",{}),children:(0,y.jsx)(g,{galleryFilter:!0,isFilterOpen:H,setIsFilterOpen:I,selectedFilterHorizontal:R,setSelectedFilterHorizontal:U,searchCountry:E,findCountry:function(t){var e=t.target.value.toLowerCase();T(e)},handleFilterValue:function(t,e){var n;if(q([]),"status"===e)t=t.toLowerCase(),st(!0,null===(n=R.country)||void 0===n?void 0:n.code,R.type,t);else if("category"===e){var i;st(!0,null===(i=R.country)||void 0===i?void 0:i.code,t,R.status)}else"country"===e&&st(!0,t.code,R.type,R.status)}})}),(0,y.jsxs)(r.W2,{className:"pt-5",children:[lt&&(0,y.jsxs)(r.sU,{color:"danger","data-dismiss":"alert",dismissible:"true",className:"text-center mb-5",children:["Would you like to help us sift through observations and endorse their validity?",(0,y.jsx)(d.rU,{to:"/"+f.X0.quiz.home,className:"btn btn-outline-primary",children:"Get Trained"})]}),null!==X&&void 0!==X&&X.hasData?(0,y.jsxs)("div",{className:"gallery-page",children:[(0,y.jsx)("h4",{className:"text-black fw-bold",children:"Recent Observations"}),(0,y.jsx)("div",{children:(0,y.jsxs)(u.Suspense,{fallback:(0,y.jsx)("div",{}),children:[(0,y.jsx)(Z,{observationList:null===W||void 0===W?void 0:W.list,isObservationDetailModal:D,setObservationDetailModal:O,setSelectedObservationId:F}),(null===W||void 0===W||null===(j=W.list)||void 0===j?void 0:j.length)>0&&at&&(0,y.jsx)(h.f,{handleLoadMore:function(){var t;st(!1,null===(t=R.country)||void 0===t?void 0:t.code,R.type,R.status)}})]})})]}):$?(0,y.jsx)(u.Suspense,{fallback:"",children:(0,y.jsx)(b,{})}):""]}),(0,y.jsx)(x,{data:null===W||void 0===W?void 0:W.active,activeType:et,modalClass:"observation-details_modal",open:D,handleClose:function(t){O(!D),F(t)},handleApproveRejectEvent:st,refreshData:st})]})}},33505:function(){}}]);
//# sourceMappingURL=568.a70d9b7c.chunk.js.map