"use strict";(self.webpackChunkspritacular_frontend=self.webpackChunkspritacular_frontend||[]).push([[286],{21032:function(e,t,n){var o=n(15861),s=n(4942),a=n(1413),r=n(70885),l=n(87757),i=n.n(l),u=n(7788),d=n(94677),c=n(74551),v=n(72791),f=n(17834),p=n(16871),m=n(40872),h=n(80184);t.Z=function(e){var t,n,l,x=e.cp,g=(0,f.Z)(),j=g.setAuth,Z=g.persist,w=g.setPersist,b=(0,p.s0)(),y=((null===(t=(0,p.TH)().state)||void 0===t||null===(n=t.from)||void 0===n?void 0:n.pathname)||c.X0.home,(0,m.Z)()),C=(y.categoryList,y.setCategoryList,(0,v.useState)({email:"",password:""})),k=(0,r.Z)(C,2),N=k[0],I=k[1],L=(0,v.useState)(""),S=(0,r.Z)(L,2),_=S[0],T=S[1],D=function(e){e.preventDefault();var t=e.target.name,n=e.target.value;I((0,a.Z)((0,a.Z)({},N),{},(0,s.Z)({},t,n)))},X=function(){var e=(0,o.Z)(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,d.Z.post(c.v2.token,N).then((function(e){var t,n,o,s,a,r,l=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.is_superuser,i=null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.is_user;w((function(e){return!e})),T(""),j({token:{access:null===e||void 0===e||null===(o=e.data)||void 0===o?void 0:o.access,refresh:null===e||void 0===e||null===(s=e.data)||void 0===s?void 0:s.refresh},user:null===e||void 0===e?void 0:e.data}),z(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.access).then((function(e){return e})),l?b("/".concat(c.X0.dashboard),{replace:!0}):i&&b("/".concat(c.X0.home),{replace:!0}),localStorage.setItem("refresh",null===e||void 0===e||null===(r=e.data)||void 0===r?void 0:r.refresh),localStorage.removeItem("camera")})).catch((function(e){var t;if(null!==e&&void 0!==e&&e.response)if(null!==e&&void 0!==e&&e.response)T({status:e.response.status,message:e.response.statusText,data:e.response.data});else if(401===(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.status))console.log("unauthorized");else{var n;console.log(null===e||void 0===e||null===(n=e.response)||void 0===n?void 0:n.statusText)}else console.log(null===e||void 0===e?void 0:e.message),T((function(t){return(0,a.Z)((0,a.Z)({},t),{},{server:null===e||void 0===e?void 0:e.message})}))}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=(0,o.Z)(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.get(c.v2.api+"/observation/get_category_list/",{headers:{"Content-Type":"application/json"}}).then((function(e){j((function(t){return(0,a.Z)((0,a.Z)({},t),{},{categoryList:null===e||void 0===e?void 0:e.data})}))})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,v.useEffect)((function(){localStorage.setItem("persist",Z)}),[Z]),(0,h.jsxs)(h.Fragment,{children:[(null===_||void 0===_?void 0:_.data)&&(0,h.jsx)("p",{className:"text-danger small mb-4 fw-bolder",children:null===_||void 0===_||null===(l=_.data)||void 0===l?void 0:l.detail}),(null===_||void 0===_?void 0:_.server)&&(0,h.jsx)("p",{className:"text-danger text-center small mb-4 fw-bolder",children:null===_||void 0===_?void 0:_.server}),(0,h.jsxs)(u.l0,{onSubmit:X,children:[(0,h.jsx)(u.cw,{children:(0,h.jsx)(u.II,{type:"email",name:"email",placeholder:"Email address",autoComplete:"off",required:!0,onChange:function(e){return D(e)}})}),(0,h.jsx)(u.cw,{children:(0,h.jsx)(u.II,{type:"password",name:"password",placeholder:"Password",required:!0,onChange:function(e){return D(e)}})}),(0,h.jsx)(u.R9,{className:"forgot-password",children:(0,h.jsx)(u.zx,{type:"button",onClick:function(){return x()},children:"Forgot Password?"})}),(0,h.jsx)(u.cw,{children:(0,h.jsx)(u.zx,{type:"submit",className:"modal-btn",disabled:!(null!==N&&void 0!==N&&N.email&&null!==N&&void 0!==N&&N.password),children:"Login"})})]})]})}},40872:function(e,t,n){var o=n(72791),s=n(21353);t.Z=function(){var e=(0,o.useContext)(s.J).observationListData;return(0,o.useDebugValue)(e,(function(e){return e?"List data set":"Listing data not set"})),(0,o.useContext)(s.J)}},20286:function(e,t,n){n.r(t);var o=n(21032),s=n(7788),a=n(17834),r=n(16871),l=(n(37084),n(74551)),i=n(80184);t.default=function(){var e=(0,a.Z)(),t=e.auth,n=e.persist,u=(0,r.TH)();return t&&n?(0,i.jsx)(r.Fg,{to:l.X0.home,state:{from:u},replace:!0}):(0,i.jsx)("section",{className:"min-vh-100 d-flex align-items-center justify-content-center",children:(0,i.jsx)(s.W2,{children:(0,i.jsx)("div",{className:"common-modal modal-content-page",children:(0,i.jsx)("div",{className:"modal-content ",children:(0,i.jsx)("div",{className:"modal-body",children:(0,i.jsx)(o.Z,{})})})})})})}},37084:function(){}}]);
//# sourceMappingURL=286.ca83e82e.chunk.js.map