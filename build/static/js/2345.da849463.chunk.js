"use strict";(self.webpackChunkspritacular_frontend=self.webpackChunkspritacular_frontend||[]).push([[2345],{32345:function(e,t,n){n.r(t);var a=n(4942),i=n(1413),o=n(74165),r=n(15861),s=n(70885),l=n(7788),c=n(26022),d=n(94677),u=n(74551),p=n(72791),v=n(16871),h=n(43504),m=n(17834),f=n(80184),g=(0,p.lazy)((function(){return Promise.all([n.e(9378),n.e(2678)]).then(n.bind(n,92678))})),x=(0,p.lazy)((function(){return n.e(5019).then(n.bind(n,75019))})),b=(0,p.lazy)((function(){return n.e(1899).then(n.bind(n,61899))})),y=(0,p.lazy)((function(){return n.e(3690).then(n.bind(n,73690))}));t.default=function(e){var t=e.type,n=e.update,j=(0,m.Z)().auth,_=(0,v.UO)().slug,Z=(0,p.useState)({title:"",description:"",content:"",image_ids:[],category:"",article_type:"",thumbnail_image:void 0}),w=(0,s.Z)(Z,2),k=w[0],C=w[1],N=(0,p.useState)(),T=(0,s.Z)(N,2),S=T[0],z=T[1],X=(0,p.useState)(!1),D=(0,s.Z)(X,2),J=D[0],U=D[1],I=(0,p.useState)(),P=(0,s.Z)(I,2),B=P[0],E=P[1],A=(0,p.useState)(),q=(0,s.Z)(A,2),F=q[0],L=q[1],M=(0,p.useState)("0"),O=(0,s.Z)(M,2),H=O[0],R=O[1],W=(0,p.useState)(),G=(0,s.Z)(W,2),K=G[0],Q=G[1],V=new FormData,Y=(0,v.s0)(),$=(0,v.TH)(),ee=function(){var e=(0,r.Z)((0,o.Z)().mark((function e(t){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.get(u.v2.blog_category,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(null===j||void 0===j||null===(n=j.token)||void 0===n?void 0:n.access)}}).then((function(e){z(e.data)})).catch((function(e){console.log("error",e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),te=function(){return!(void 0!==(null===k||void 0===k?void 0:k.thumbnail_image)&&null!==k&&void 0!==k&&k.title&&null!==k&&void 0!==k&&k.description&&(1!==(null===k||void 0===k?void 0:k.article_type)||(null===k||void 0===k?void 0:k.category)))},ne=function(e){Q(e.target.value),L(""),E(""),e.preventDefault();var t=e.target.name,n=e.target.value;C((0,i.Z)((0,i.Z)({},k),{},(0,a.Z)({},t,n)))},ae=n?"".concat(u.v2.blog_tut_update).concat(_,"/"):u.v2.create_blog,ie=function(){var e=(0,r.Z)((0,o.Z)().mark((function e(a){var i,r,s;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),U(!0),E(""),L(""),i=JSON.stringify(null===k||void 0===k?void 0:k.image_ids),V.append("thumbnail_image",null===k||void 0===k?void 0:k.thumbnail_image),V.append("article_type",null===k||void 0===k?void 0:k.article_type),V.append("title",null===k||void 0===k?void 0:k.title),V.append("description",null===k||void 0===k?void 0:k.description),V.append("content",null===k||void 0===k?void 0:k.content),V.append("image_ids",i),"1"!==(null===k||void 0===k?void 0:k.article_type)&&"blog"!==t||V.append("category",null===k||void 0===k?void 0:k.category),n){e.next=18;break}return e.next=15,d.Z.post(ae,V,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(null===j||void 0===j||null===(r=j.token)||void 0===r?void 0:r.access)},onUploadProgress:function(e){var t=Math.round(e.loaded/e.total*100)+"%";R(t)}}).then((function(e){U(!1),E({status:e.status,message:e.data.success}),window.scrollTo(0,0),setTimeout((function(){"1"===(null===k||void 0===k?void 0:k.article_type)||"blog"===t?Y("/dashboard/blog",{replace:!0}):Y("/dashboard/tutorial",{replace:!0})}),1e3)})).catch((function(e){U(!1),L({status:e.response.status,message:e.response.data})}));case 15:case 20:return e.abrupt("return",e.sent);case 18:return e.next=20,d.Z.put(ae,V,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(null===j||void 0===j||null===(s=j.token)||void 0===s?void 0:s.access)},onUploadProgress:function(e){var t=Math.round(e.loaded/e.total*100)+"%";R(t)}}).then((function(e){U(!1),E({status:e.status,message:e.data.success}),window.scrollTo(0,0),setTimeout((function(){"1"===(null===k||void 0===k?void 0:k.article_type)||"blog"===t?Y("/dashboard/blog",{replace:!0}):Y("/dashboard/tutorial",{replace:!0})}),1e3)})).catch((function(e){U(!1),L({status:e.response.status,message:e.response.data})}));case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();(0,p.useEffect)((function(){ee().then((function(e){return e}))}),[]),(0,p.useEffect)((function(){"/dashboard/blog/create"===$.pathname?C((function(e){return(0,i.Z)((0,i.Z)({},e),{},{category:"1",article_type:"1"})})):"/dashboard/tutorial/create"===$.pathname&&C((function(e){return(0,i.Z)((0,i.Z)({},e),{},{category:null,article_type:"2"})}))}),[$]),(0,p.useEffect)((function(){K&&(k&&"1"===(null===k||void 0===k?void 0:k.article_type)?(console.log("condition",null===k||void 0===k?void 0:k.article_type),Y("/dashboard/blog/".concat(u.X0.dashBlog.create),{replace:!0})):k&&"2"===(null===k||void 0===k?void 0:k.article_type)&&(console.log("condition",null===k||void 0===k?void 0:k.article_type),Y("/dashboard/tutorial/".concat(u.X0.dashTutorial.create),{replace:!0})))}),[null===k||void 0===k?void 0:k.article_type]);var oe=function(){var e=(0,r.Z)((0,o.Z)().mark((function e(){var t;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.get("".concat(u.v2.get_single_blog).concat(_,"/"),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(null===j||void 0===j||null===(t=j.token)||void 0===t?void 0:t.access)}}).then((function(e){var t,n=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.data;C((function(e){return(0,i.Z)((0,i.Z)({},e),n)}))})).catch((function(e){var t;200!==(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.statusCode)&&Y("/404",{replace:!0})}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,p.useLayoutEffect)((function(){n&&oe().then((function(e){return e}))}),[n]),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{className:"position-relative",children:(0,f.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,f.jsxs)("h2",{className:"mb-0 text-capitalize",children:[n?"Update":"Create"," ",t]}),(0,f.jsxs)(h.rU,{to:"/".concat(u.X0.dashboard,"/").concat(t),className:"btn btn-primary px-4 text-capitalize",children:[t," lists"]})]})}),(0,f.jsxs)(l.l0,{className:"py-3 card py-4 px-4 py-md-5 px-md-5 shadow border-0 mt-5",onSubmit:ie,children:[B&&(0,f.jsx)("div",{className:"row",children:(0,f.jsx)(l.JX,{sm:12,children:(0,f.jsx)(l.sU,{color:"success",children:null===B||void 0===B?void 0:B.message})})}),F&&(0,f.jsx)("div",{className:"row",children:(0,f.jsx)(l.JX,{sm:12,children:(0,f.jsx)(l.sU,{color:"danger",children:null===F||void 0===F?void 0:F.message.detail})})}),(0,f.jsxs)("div",{className:"row position-relative",children:[(0,f.jsxs)(l.JX,{sm:12,md:8,className:"mb-4 mb-md-0",children:[(0,f.jsxs)("div",{className:"row g-4",children:[(0,f.jsx)(l.JX,{sm:12,md:"1"===(null===k||void 0===k?void 0:k.article_type)||"blog"===t?6:12,children:(0,f.jsx)(b,{blogType:null===k||void 0===k?void 0:k.article_type,handleInput:ne,update:n,setData:C,type:t})}),"blog"===t&&(0,f.jsx)(l.JX,{sm:12,md:6,children:(0,f.jsx)(y,{handleInput:ne,category:S})})]}),(0,f.jsxs)(l.cw,{children:[(0,f.jsx)(l.__,{for:"title",children:"Title"}),(0,f.jsx)(l.II,{id:"title",type:"text",name:"title",placeholder:"Enter blog title",autoComplete:"off",value:k?null===k||void 0===k?void 0:k.title:"",required:!0,onChange:function(e){return ne(e)}})]}),(0,f.jsxs)(l.cw,{children:[(0,f.jsx)(l.__,{for:"description",children:"Description"}),(0,f.jsx)(l.II,{id:"description",type:"textarea",rows:2,name:"description",placeholder:"Write description",autoComplete:"off",value:k?null===k||void 0===k?void 0:k.description:"",required:!0,onChange:function(e){return ne(e)}})]}),(0,f.jsxs)(l.cw,{children:[(0,f.jsx)(l.__,{for:"content",children:"Content"}),(0,f.jsx)(p.Suspense,{fallback:(0,f.jsx)("div",{children:"Please wait..."}),children:(0,f.jsx)(g,{setLoading:U,editorData:k,setData:C,data:null===k||void 0===k?void 0:k.content})})]})]}),(0,f.jsx)(l.JX,{sm:12,md:4,children:(0,f.jsx)(p.Suspense,{fallback:(0,f.jsx)("div",{children:"Please wait..."}),children:(0,f.jsx)(x,{uploadProgress:H,handleInput:ne,error:F,setData:C,updata:n,thumb:null===k||void 0===k?void 0:k.thumbnail_image})})}),(0,f.jsx)(l.JX,{sm:12,children:(0,f.jsxs)("div",{className:"mt-4",children:[(0,f.jsx)("button",{type:"submit",disabled:te(),className:"btn px-4 py-2 px-sm-5 py-sm-2 ".concat(te()?"btn-light text-light-dark":"btn-primary"),children:n?"Update":"Create"}),(0,f.jsx)("button",{type:"reset",className:"btn btn-dark px-4 py-2 px-sm-5 py-sm-2 ms-2",children:"Reset"})]})}),J&&(0,f.jsx)(c.Z,{fixContent:!0})]})]})]})}}}]);
//# sourceMappingURL=2345.da849463.chunk.js.map