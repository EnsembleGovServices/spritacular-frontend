"use strict";(self.webpackChunkspritacular_frontend=self.webpackChunkspritacular_frontend||[]).push([[8678],{98678:function(e,i,n){n.r(i),n.d(i,{default:function(){return j}});var l=n(42982),s=n(1413),t=n(70885),o=n(7788),d=n(62711),c=n(94677),a=n(72791),u=n(74551),r=n(17834),v=n(6442),f=n(26022),m=n(80184),x=function(e){var i=e.quizControl,n=e.activeQuestion,l=(0,a.useState)(),s=(0,t.Z)(l,2),d=s[0],c=s[1],u=(0,a.useRef)(null);return(0,a.useEffect)((function(){var e=null!==i&&void 0!==i&&i.active?100*(null===i||void 0===i?void 0:i.active)/(null===i||void 0===i?void 0:i.total):6.67;c(e)}),[null===i||void 0===i?void 0:i.active,n]),(0,a.useEffect)((function(){d>51?u.current.classList.add("text-white"):u.current.classList.remove("text-white")}),[d]),(0,m.jsxs)("div",{className:"quiz-progress",children:[(0,m.jsxs)("div",{className:"total",ref:u,children:[null===i||void 0===i?void 0:i.active," / ",null===i||void 0===i?void 0:i.total]}),(0,m.jsx)(o.Ex,{animated:!0,value:d})]})},h=function(e){var i=e.options,n=e.quizControl,l=e.handleNextPrev,s=e.activeQuestion,t=e.handleTleCheck,c=e.handleQuizSubmit,a=e.disable,u=e.loading,r=e.answers,v=e.goFullScreenImage;return(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)("div",{className:"card",children:[u&&(0,m.jsx)(f.Z,{loaderClass:"quiz-loading"}),(0,m.jsxs)("div",{className:"card-top-image",children:[(0,m.jsxs)("div",{className:"h-100 position-relative",children:[(0,m.jsx)("img",{src:null===s||void 0===s?void 0:s.image_url,alt:null===s||void 0===s?void 0:s.id}),(0,m.jsx)("div",{className:"full-screen",onClick:function(){return v(null===s||void 0===s?void 0:s.image_url)},children:(0,m.jsx)("div",{className:"fc-icon",children:(0,m.jsx)(d.JO,{icon:"octicon:screen-full-16"})})})]}),(0,m.jsx)(x,{quizControl:n,activeQuestion:null===s||void 0===s?void 0:s.id})]}),(0,m.jsxs)("div",{className:"card-body",children:[(0,m.jsx)("h5",{className:"card-title mb-4",children:"Choose the correct Transient Luminous Event (TLE) type of this image"}),(0,m.jsx)("div",{className:"mcq-main",children:(0,m.jsxs)(o.X2,{children:[null===i||void 0===i?void 0:i.map((function(e,i){return(0,m.jsx)(o.JX,{md:6,children:(0,m.jsxs)("div",{className:"checkbox-group",children:[(0,m.jsx)("input",{id:e.id,name:"tle_type",type:"checkbox",value:e.id,checked:(null===r||void 0===r?void 0:r.find((function(i){return i===(null===e||void 0===e?void 0:e.id)})))===(null===e||void 0===e?void 0:e.id),onChange:function(){return t(e.id)}}),(0,m.jsx)("label",{htmlFor:e.id,children:null===e||void 0===e?void 0:e.title})]})},e.id+i)})),(0,m.jsx)(o.JX,{sm:12,className:"mt-5",children:(0,m.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,m.jsx)("button",{type:"button",value:"prev",disabled:null===a||void 0===a?void 0:a.prevBtn,onClick:function(e){return l(e.target.value)},className:"btn px-5 btn-outline-dark",children:"Prev"}),14===(null===n||void 0===n?void 0:n.activeIndex)?(0,m.jsx)("button",{type:"submit",onClick:c,disabled:null===a||void 0===a?void 0:a.nextBtn,className:"btn px-5 btn-primary",children:"Submit"}):(0,m.jsx)("button",{type:"button",value:"next",disabled:null===a||void 0===a?void 0:a.nextBtn,onClick:function(e){return l(e.target.value)},className:"btn px-5 btn-primary",children:"Next"})]})})]})})]})]})})},j=function(e){e.roles;var i,n,f,x,j,p,g,b=(0,r.Z)().auth,N=(0,a.useState)([]),Z=(0,t.Z)(N,2),w=Z[0],C=Z[1],S=(0,a.useState)([]),k=(0,t.Z)(S,2),y=k[0],q=k[1],z=(0,a.useState)({}),I=(0,t.Z)(z,2),E=I[0],B=I[1],T=(0,a.useState)({active:1,activeIndex:0}),_=(0,t.Z)(T,2),F=_[0],J=_[1],Q=(0,a.useState)(),X=(0,t.Z)(Q,2),A=(X[0],X[1]),L=(0,a.useState)({que:null,ans:[]}),O=(0,t.Z)(L,2),P=O[0],K=O[1],R=(0,a.useState)([]),D=(0,t.Z)(R,2),U=D[0],W=D[1],Y=(0,a.useState)({success:null,error:null}),G=(0,t.Z)(Y,2),H=G[0],M=G[1],V=(0,a.useState)(!1),$=(0,t.Z)(V,2),ee=$[0],ie=$[1],ne=(0,a.useState)({prevBtn:!0,nextBtn:!0}),le=(0,t.Z)(ne,2),se=le[0],te=le[1],oe=(0,a.useState)(!1),de=(0,t.Z)(oe,2),ce=de[0],ae=de[1],ue=(0,a.useState)(""),re=(0,t.Z)(ue,2),ve=re[0],fe=re[1],me=null===H||void 0===H||null===(i=H.success)||void 0===i?void 0:i.score,xe=function(e){var i;e.preventDefault(),ie(!0),c.Z.post(u.v2.quiz_submit,U,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(null===b||void 0===b||null===(i=b.token)||void 0===i?void 0:i.access)}}).then((function(e){var i,n,l;M({error:{},success:{message:null===e||void 0===e||null===(i=e.data)||void 0===i?void 0:i.success,score:null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.score,correct:null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.correct_answers}}),ie(!1),W([]),window.scrollTo(0,0)})).catch((function(e){var i,n,l;M({success:{},error:{message:null===e||void 0===e||null===(i=e.response)||void 0===i||null===(n=i.data)||void 0===n?void 0:n.details,status:null===e||void 0===e||null===(l=e.response)||void 0===l?void 0:l.statusText}}),ie(!1),window.scrollTo(0,0)}))},he=function(){ae(!1),fe("")};return(0,a.useEffect)((function(){J((function(e){return(0,s.Z)((0,s.Z)({},e),{},{activeIndex:(null===F||void 0===F?void 0:F.active)-1})}))}),[null===F||void 0===F?void 0:F.active]),(0,a.useEffect)((function(){(function(){var e;return c.Z.get(u.v2.quiz_question,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(null===b||void 0===b||null===(e=b.token)||void 0===e?void 0:e.access)}}).then((function(e){var i,n;q(null===e||void 0===e||null===(i=e.data)||void 0===i?void 0:i.option_list),C(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.question_list)})).catch((function(e){console.log(e)}))})().then((function(e){return e}))}),[]),(0,a.useEffect)((function(){B(null===w||void 0===w?void 0:w[F.active-1]),J((function(e){return(0,s.Z)((0,s.Z)({},e),{},{total:null===w||void 0===w?void 0:w.length})}))}),[w]),(0,a.useEffect)((function(){var e=null===w||void 0===w?void 0:w.filter((function(e,i){if(i===(null===F||void 0===F?void 0:F.active)-1)return e})).map((function(e,i){return e}));B(e[0])}),[null===F||void 0===F?void 0:F.active]),(0,a.useEffect)((function(){var e,i;K({que:null===E||void 0===E?void 0:E.id,ans:null!==(e=U[F.activeIndex])&&void 0!==e&&e.ans?null===(i=U[F.activeIndex])||void 0===i?void 0:i.ans:[]})}),[null===E||void 0===E?void 0:E.id]),(0,a.useEffect)((function(){var e=(0,s.Z)({},P);null!==E&&void 0!==E&&E.id&&(U[F.activeIndex]=e)}),[P.ans]),(0,a.useEffect)((function(){var e,i,n,l;(null===U||void 0===U||null===(e=U[null===F||void 0===F?void 0:F.activeIndex])||void 0===e||null===(i=e.ans)||void 0===i?void 0:i.length)>0&&(null===P||void 0===P||null===(n=P.ans)||void 0===n?void 0:n.length)>0?te((0,s.Z)((0,s.Z)({},se),{},{nextBtn:!1,prevBtn:0===(null===F||void 0===F?void 0:F.activeIndex)||(null===P||void 0===P||null===(l=P.ans)||void 0===l?void 0:l.length)<1})):te((0,s.Z)((0,s.Z)({},se),{},{nextBtn:!0,prevBtn:0===(null===F||void 0===F?void 0:F.activeIndex)}))}),[null===U||void 0===U||null===(n=U[null===F||void 0===F?void 0:F.activeIndex])||void 0===n?void 0:n.ans,null===P||void 0===P?void 0:P.ans]),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("section",{className:"quiz-main",children:(0,m.jsx)(o.W2,{children:(0,m.jsx)("form",{onSubmit:xe,children:(0,m.jsxs)(o.X2,{className:"align-items-center",children:[(0,m.jsx)(o.JX,{sm:12,children:(null===H||void 0===H||null===(f=H.error)||void 0===f?void 0:f.message)&&(0,m.jsx)("div",{className:"error-card",children:(0,m.jsx)(o.sU,{color:"danger","data-dismiss":"alert",dismissible:"true",children:null===H||void 0===H||null===(x=H.error)||void 0===x?void 0:x.message})})}),(0,m.jsx)(o.JX,{sm:12,children:null!==H&&void 0!==H&&H.success?(0,m.jsx)(m.Fragment,{children:(0,m.jsx)("div",{className:"card quiz-submitted",children:(0,m.jsxs)("div",{className:"card-body",children:[(0,m.jsx)("div",{className:"result-image",children:me<75?(0,m.jsx)("img",{className:"img-fluid success-img",src:"".concat(u.cK.url,"/failed.svg"),alt:"success"}):(0,m.jsx)("img",{className:"img-fluid success-img",src:"".concat(u.cK.url,"/success.svg"),alt:"success"})}),(0,m.jsx)("h6",{className:"title",children:null===H||void 0===H||null===(p=H.success)||void 0===p?void 0:p.message}),(0,m.jsxs)("div",{className:"d-flex align-items-center justify-content-center",children:[(0,m.jsxs)("div",{className:me>75?"score pass fw-bolder":"score fail fw-bolder",children:[(0,m.jsx)("span",{children:null===H||void 0===H||null===(g=H.success)||void 0===g?void 0:g.correct}),(0,m.jsx)("span",{className:"score-text",children:"Correct Answer"})]}),(0,m.jsxs)("div",{className:me>75?"score pass fw-bolder":"score fail fw-bolder",children:[(0,m.jsxs)("span",{className:"d-block",children:[null===me||void 0===me?void 0:me.toFixed(0),"%"]}),(0,m.jsx)("span",{className:"score-text",children:"Total Score"})]})]}),me<75?(0,m.jsx)("button",{type:"button",onClick:function(){return window.location.reload(!1)},className:"px-4 py-2 mb-4 fw-bolder btn btn-primary",children:"Re-attempt Quiz"}):(0,m.jsx)("div",{className:"px-4 py-2 mb-4 fw-bolder",children:(0,m.jsxs)("h5",{className:"mb-0",children:[(0,m.jsx)("span",{className:"text-success",children:"Congratulations! "}),(0,m.jsx)("span",{children:"Your account has been upgraded."})]})})]})})}):(0,m.jsx)(h,{singleAnswer:P,activeQuestion:E,options:y,loading:ee,answers:null===U||void 0===U||null===(j=U[null===F||void 0===F?void 0:F.activeIndex])||void 0===j?void 0:j.ans,quizControl:F,disable:se,handleNextPrev:function(e){window.scrollTo(0,0),A(e),J((function(i){return(0,s.Z)((0,s.Z)({},i),{},{active:"next"===e?F.active<(null===F||void 0===F?void 0:F.total)?F.active+1:F.active:F.active>1?F.active-1:F.active})}))},handleTleCheck:function(e){if(null!==P&&void 0!==P&&P.ans.includes(e)){var i,n=null===P||void 0===P||null===(i=P.ans)||void 0===i?void 0:i.filter((function(i){return i!==e}));K((function(e){return(0,s.Z)((0,s.Z)({},e),{},{ans:n})}))}else{var t=[].concat((0,l.Z)(null===P||void 0===P?void 0:P.ans),[e]);K((function(e){return(0,s.Z)((0,s.Z)({},e),{},{que:null===E||void 0===E?void 0:E.id,ans:t})}))}},handleSubmit:xe,goFullScreenImage:function(e){fe(e),ae(!0)}})})]})})})}),ce&&(0,m.jsx)(o.u_,{className:"fullScreen-quiz-image-modal",isOpen:ce,backdrop:!1,centered:!0,fullscreen:!0,toggle:he,children:(0,m.jsxs)(o.fe,{children:[(0,m.jsx)("button",{className:"close-icon",type:"button",onClick:function(){return he()},children:(0,m.jsx)(d.JO,{color:"#fff",width:30,height:30,icon:"clarity:close-line"})}),(0,m.jsx)(v.default,{preview:ve,image:ve})]})})]})}}}]);
//# sourceMappingURL=8678.6a5310dd.chunk.js.map