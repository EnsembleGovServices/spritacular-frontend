{"version":3,"file":"static/js/1752.615a26d4.chunk.js","mappings":"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","sources":["components/Shared/LoadMore.jsx","hooks/useObservations.js","hooks/useObservationsData.js","pages/Observation/MyObservations.jsx","pages/Observation/Observations.jsx"],"sourcesContent":["import { Button} from 'reactstrap';\r\n\r\nexport const LoadMore = (props) => {\r\n    const {handleLoadMore} = props;\r\n    return (\r\n        <Button className='gray-outline-btn d-block mx-auto px-4 fw-normal' onClick={()=> handleLoadMore()}>Load more</Button>\r\n    )\r\n};","import {useContext, useDebugValue} from \"react\";\r\nimport {ObservationContext} from \"../pages/Observation/Observations\";\r\n\r\nconst useObservations = () => {\r\n    const { observationImages } = useContext(ObservationContext);\r\n    // useDebugValue(observationSteps, observationSteps => observationSteps ? 'Steps set' : \"Steps not set\")\r\n    useDebugValue(observationImages, observationImages => observationImages?.data ? 'Images set' : \"Images not set\")\r\n    return useContext(ObservationContext);\r\n}\r\n\r\nexport default useObservations;","import {useContext, useDebugValue} from \"react\";\r\nimport {observationViewContext} from \"../layouts/PersistLogin\";\r\n\r\nconst useObservationsData = () => {\r\n    const { observationListData } = useContext(observationViewContext);\r\n    useDebugValue(observationListData, observationListData => observationListData ? 'List data set' : \"Listing data not set\")\r\n    return useContext(observationViewContext);\r\n}\r\n\r\nexport default useObservationsData;","import \"../../assets/scss/component/myObservation.scss\";\r\nimport {Col, Container, Row} from \"reactstrap\";\r\nimport {Link, useNavigate} from \"react-router-dom\";\r\nimport {Icon} from \"@iconify/react\";\r\nimport axios from \"../../api/axios\";\r\n\r\nimport {lazy, Suspense, useEffect, useState} from \"react\";\r\n\r\nimport useAuth from \"../../hooks/useAuth\";\r\nimport useObservationsData from \"../../hooks/useObservationsData\";\r\nimport useObservations from \"../../hooks/useObservations\";\r\n\r\nimport {LoadMore} from \"../../components/Shared/LoadMore\";\r\nimport {obvType} from \"../../helpers/observation\";\r\nimport {baseURL, routeUrls} from \"../../helpers/url\";\r\n\r\n\r\nconst NotFound = lazy(() => import(\"../../components/Common/NotFound\"));\r\n\r\nconst ObservationDetails = lazy(() => import(\"./ObservationDetails\"));\r\nconst ObservationDetailPage = lazy(() => import(\"./ObservationListPage\"));\r\nconst InitialUploadObservations = lazy(() => import(\"../Page/InitialUploadObservations\"));\r\n\r\nconst MyObservations = () => {\r\n    const {auth} = useAuth();\r\n    const navigate = useNavigate();\r\n    const {setObservationData, setObservationSteps, setObservationImages} = useObservations();\r\n    const {observationListData, setObservationListData} = useObservationsData();\r\n    const [isObservationDetailModal, setObservationDetailModal] = useState(false);\r\n    const [activeType, setActiveType] = useState(\"verified\");\r\n    const [selectedObservationId, setSelectedObservationId] = useState();\r\n    const [nextPageUrl, setNextPageUrl] = useState(\r\n        \"/observation/observation_collection/?type=\"\r\n    );\r\n    const [loading, setLoading] = useState({});\r\n    const [loadedState, setLoadedState] = useState({});\r\n\r\n    const handleObservationEdit = (data) => {\r\n        cleaningUpObservationDataForDraftSaving(data).then((r) => r);\r\n        setObservationDetailModal(false);\r\n        setTimeout(function () {\r\n            navigate(\"/observations/update\");\r\n        }, 100);\r\n    };\r\n\r\n    const cleaningUpObservationDataForDraftSaving = async (data) => {\r\n        setObservationImages([]);\r\n        setObservationData([]);\r\n        await updateStateForDraft(data);\r\n        return true;\r\n    };\r\n\r\n    const updateStateForDraft = (data) => {\r\n        setObservationSteps((prev) => {\r\n            return {\r\n                ...prev,\r\n                total: 3,\r\n                active: 1,\r\n                mode: {\r\n                    update: true,\r\n                    ...data,\r\n                },\r\n            };\r\n        });\r\n    };\r\n\r\n    const getObservationData = (reset = false, value = \"verified\") => {\r\n        setActiveType(value);\r\n        let url;\r\n        if (reset === true || !nextPageUrl) {\r\n            url = `${baseURL.api}/observation/observation_collection/?type=${value}&page=1`;\r\n        } else {\r\n            url = process.env.NODE_ENV === \"development\" ? nextPageUrl : nextPageUrl.replace('http', 'https');\r\n        }\r\n        axios.get(`${url}`, {\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                Authorization: `Bearer ${auth?.token?.access}`,\r\n            },\r\n        }).then((success) => {\r\n            let data = success?.data?.results;\r\n            if (success?.data?.next) {\r\n                setNextPageUrl(success?.data?.next);\r\n            } else {\r\n                setNextPageUrl(null);\r\n            }\r\n\r\n            let records = data?.data;\r\n            let prevData;\r\n\r\n            if (observationListData?.list && !reset) {\r\n                prevData = [...observationListData.list];\r\n                prevData = [...prevData, ...records];\r\n            } else {\r\n                prevData = data?.data;\r\n            }\r\n\r\n            // Global State\r\n            setObservationListData((prev) => {\r\n                return {\r\n                    ...prev,\r\n                    list: prevData,\r\n                    count: {\r\n                        verified: data?.verified_count,\r\n                        unverified: data?.unverified_count,\r\n                        denied: data?.denied_count,\r\n                        draft: data?.draft_count,\r\n                        total:\r\n                            data?.verified_count +\r\n                            data?.unverified_count +\r\n                            data?.denied_count +\r\n                            data?.draft_count,\r\n                    },\r\n                };\r\n            });\r\n\r\n        })\r\n            .catch((error) => {\r\n                console.log(error.response);\r\n            });\r\n    };\r\n\r\n    const handleObservationDetailModal = (id) => {\r\n        setObservationDetailModal(!isObservationDetailModal);\r\n        setSelectedObservationId(id);\r\n    };\r\n\r\n    const handleTypeOfObservation = (type) => {\r\n        setActiveType(type);\r\n\r\n        setObservationListData((prev) => {\r\n            return {\r\n                ...prev,\r\n                list: [],\r\n            };\r\n        });\r\n\r\n        getObservationData(true, type);\r\n    };\r\n\r\n    const handleLoadMore = () => {\r\n        getObservationData(false, activeType);\r\n    };\r\n\r\n    useEffect(() => {\r\n        setObservationListData((prev) => {\r\n            return {\r\n                ...prev,\r\n                active: observationListData?.list?.[selectedObservationId],\r\n                activeType: activeType\r\n            };\r\n        });\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [isObservationDetailModal, activeType]);\r\n    useEffect(() => {\r\n        getObservationData(true, \"verified\");\r\n        return () => {\r\n            setObservationListData((prev) => {\r\n                return {\r\n                    ...prev,\r\n                    list: []\r\n                }\r\n            });\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, []);\r\n    useEffect(() => {\r\n        setLoading((prev) => {\r\n            return {\r\n                ...prev,\r\n                count: observationListData?.count\r\n            }\r\n        })\r\n    }, [observationListData?.count]);\r\n    useEffect(() => {\r\n        setLoadedState((prev) => {\r\n            return {\r\n                ...prev,\r\n                hasObservations: loading?.count?.total > 0,\r\n                hasVerifiedData: loading?.count?.verified > 0,\r\n                hasUnverifiedData: loading?.count?.unverified > 0,\r\n                hasDeniedData: loading?.count?.denied > 0,\r\n                hasDraftData: loading?.count?.draft > 0\r\n            }\r\n        })\r\n    }, [loading?.count]);\r\n\r\n\r\n    const showNotFound = activeType &&\r\n        ((activeType === obvType.verified && !loadedState?.hasVerifiedData) ||\r\n            (activeType === obvType.unverified && !loadedState?.hasUnverifiedData) ||\r\n            (activeType === obvType.denied && !loadedState?.hasDeniedData) ||\r\n            (activeType === obvType.draft && !loadedState?.hasDraftData))\r\n\r\n\r\n    return (\r\n        <>\r\n            <section className=\"my-observation-data\">\r\n                {loadedState?.hasObservations &&\r\n                    <Container>\r\n                        <div className=\"filtered-data_wrapper\">\r\n                            <Row>\r\n                                <Col sm={12} md={8} lg={6} className=\"order-2 order-md-1\">\r\n                                    <div\r\n                                        className=\"d-flex align-items-center justify-content-start h-100 text-truncate overflow-auto mb-3 mb-md-0\">\r\n                                <span\r\n                                    className={\r\n                                        activeType === obvType.verified\r\n                                            ? \"filter-link active\"\r\n                                            : \"filter-link \"\r\n                                    }\r\n                                    onClick={() => handleTypeOfObservation(obvType.verified)}\r\n                                >\r\n                                  Verified ({observationListData?.count?.verified})\r\n                                </span>\r\n                                        <span\r\n                                            className={\r\n                                                activeType === obvType.unverified\r\n                                                    ? \"filter-link active\"\r\n                                                    : \"filter-link \"\r\n                                            }\r\n                                            onClick={() => handleTypeOfObservation(obvType.unverified)}\r\n                                        >\r\n                                    Unverified ({observationListData?.count?.unverified})\r\n                                </span>\r\n                                        <span\r\n                                            className={\r\n                                                activeType === obvType.denied\r\n                                                    ? \"filter-link active\"\r\n                                                    : \"filter-link \"\r\n                                            }\r\n                                            onClick={() => handleTypeOfObservation(obvType.denied)}\r\n                                        >\r\n                                  Denied ({observationListData?.count?.denied})\r\n                                </span>\r\n                                        <span\r\n                                            className={\r\n                                                activeType === obvType.draft\r\n                                                    ? \"filter-link active\"\r\n                                                    : \"filter-link \"\r\n                                            }\r\n                                            onClick={() => handleTypeOfObservation(obvType.draft)}\r\n                                        >\r\n                                  Drafts ({observationListData?.count?.draft})\r\n                                </span>\r\n                                    </div>\r\n                                </Col>\r\n                                <Col sm={12} md={4} lg={6} className=\"text-end order-1 order-md-2\">\r\n                                    <div\r\n                                        className=\"d-flex align-items-center justify-content-end h-100  flex-wrap flex-lg-nowrap mb-2 mb-md-0\">\r\n                                        <Link\r\n                                            to={\"/\" + routeUrls.observationsAdd}\r\n                                            className=\"btn btn-secondary ms-2 ms-xl-4 shadow-none\"\r\n                                        >\r\n                                            <Icon\r\n                                                icon=\"heroicons-outline:upload\"\r\n                                                width=\"16\"\r\n                                                height=\"20\"\r\n                                            />\r\n                                            Upload Observations\r\n                                        </Link>\r\n                                    </div>\r\n                                </Col>\r\n                            </Row>\r\n                        </div>\r\n                    </Container>\r\n                }\r\n\r\n                {/*Data block*/}\r\n\r\n                <Container>\r\n                    {!loadedState?.hasObservations &&\r\n                        <Suspense fallback={''}>\r\n                            <InitialUploadObservations count={loading?.count}/>\r\n                        </Suspense>\r\n                    }\r\n\r\n                    <Suspense fallback={''}>\r\n                        <ObservationDetailPage\r\n                            activeType={activeType}\r\n                            observationList={observationListData?.list}\r\n                            isObservationDetailModal={isObservationDetailModal}\r\n                            setObservationDetailModal={setObservationDetailModal}\r\n                            setSelectedObservationId={setSelectedObservationId}\r\n                            loadedState={loadedState}\r\n\r\n                        />\r\n                        {nextPageUrl && observationListData?.list.length > 0 &&\r\n                            <LoadMore handleLoadMore={handleLoadMore}/>}\r\n                    </Suspense>\r\n\r\n                    {showNotFound && loadedState?.hasObservations &&\r\n                        <Suspense fallback={''}>\r\n                            <NotFound/>\r\n                        </Suspense>\r\n                    }\r\n\r\n                </Container>\r\n            </section>\r\n\r\n            {observationListData?.list?.length > 0 &&\r\n                <Suspense fallback={''}>\r\n                    <ObservationDetails\r\n                        data={observationListData?.active}\r\n                        activeType={activeType}\r\n                        modalClass=\"observation-details_modal\"\r\n                        open={isObservationDetailModal}\r\n                        handleClose={handleObservationDetailModal}\r\n                        handleContinueEdit={handleObservationEdit}\r\n                        handleApproveRejectEvent={getObservationData}\r\n                        refreshData={getObservationData}\r\n                    />\r\n                </Suspense>\r\n            }\r\n        </>\r\n    );\r\n};\r\nexport default MyObservations;","import { Outlet } from \"react-router-dom\";\r\nimport {createContext, useEffect, useState} from \"react\";\r\nimport { cameraSettingFields } from \"../../helpers/url\";\r\n\r\nexport const ObservationContext = createContext({});\r\n\r\nconst Observations = () => {\r\n    const [observationType, setObservationType] = useState({\r\n        image_type: 1\r\n    });\r\n\r\n    const [observationSteps, setObservationSteps] = useState({\r\n        total: 3,\r\n        active: 1,\r\n        mode: {\r\n            update: false\r\n        }\r\n    });\r\n    const [observationImages, setObservationImages] = useState([]);\r\n    const [cameraDetails, setCameraDetails] = useState(cameraSettingFields);\r\n    const [observationCategory, setObservationCategory] = useState([]);\r\n    const [observationData, setObservationData] = useState({});\r\n\r\n    useEffect(()=> {\r\n        let data = (observationImages?.data) ? [...observationImages?.data] : []\r\n        setObservationData({\r\n            // is_draft: observationSteps?.is_draft ? 1 : 0,\r\n            image_type: observationType?.image_type,\r\n            map_data: data,\r\n            elevation_angle: null,\r\n            video_url : ''\r\n        })\r\n    }, [observationImages?.data, observationSteps?.is_draft, observationType?.image_type])\r\n\r\n    return(\r\n        <ObservationContext.Provider value={\r\n            {\r\n                observationType,\r\n                setObservationType,\r\n                observationSteps,\r\n                setObservationSteps,\r\n                observationImages,\r\n                setObservationImages,\r\n                observationCategory,\r\n                setObservationCategory,\r\n                observationData,\r\n                setObservationData,\r\n                cameraDetails, \r\n                setCameraDetails\r\n            }\r\n        }>\r\n            <Outlet />\r\n        </ObservationContext.Provider>\r\n    )\r\n}\r\n\r\nexport default Observations;"],"names":["LoadMore","props","handleLoadMore","className","onClick","observationImages","useContext","ObservationContext","useDebugValue","data","observationListData","observationViewContext","NotFound","lazy","ObservationDetails","ObservationDetailPage","InitialUploadObservations","auth","useAuth","navigate","useNavigate","useObservations","setObservationData","setObservationSteps","setObservationImages","useObservationsData","setObservationListData","useState","isObservationDetailModal","setObservationDetailModal","activeType","setActiveType","selectedObservationId","setSelectedObservationId","nextPageUrl","setNextPageUrl","loading","setLoading","loadedState","setLoadedState","cleaningUpObservationDataForDraftSaving","updateStateForDraft","prev","total","active","mode","update","getObservationData","url","reset","value","replace","baseURL","axios","headers","Authorization","token","access","then","success","results","next","prevData","records","list","count","verified","verified_count","unverified","unverified_count","denied","denied_count","draft","draft_count","catch","error","console","log","response","handleTypeOfObservation","type","useEffect","hasObservations","hasVerifiedData","hasUnverifiedData","hasDeniedData","hasDraftData","showNotFound","obvType","sm","md","lg","to","routeUrls","icon","width","height","Suspense","fallback","observationList","length","modalClass","open","handleClose","id","handleContinueEdit","r","setTimeout","handleApproveRejectEvent","refreshData","createContext","image_type","observationType","setObservationType","observationSteps","cameraSettingFields","cameraDetails","setCameraDetails","observationCategory","setObservationCategory","observationData","map_data","elevation_angle","video_url","is_draft","Provider"],"sourceRoot":""}