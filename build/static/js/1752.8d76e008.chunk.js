"use strict";(self.webpackChunkspritacular_frontend=self.webpackChunkspritacular_frontend||[]).push([[1752,3417],{85423:function(e,n,t){var i=t(46883),a=t(80184);n.Z=function(){return(0,a.jsxs)("div",{className:"data-not-found",children:[(0,a.jsx)("img",{src:i.Z.NoDataFound,alt:"No data found",className:"mb-3"}),(0,a.jsxs)("p",{children:[(0,a.jsx)("b",{className:"text-secondary fw-bold",children:"Opps!"})," No Data Found"]})]})}},59122:function(e,n,t){t.d(n,{f:function(){return o}});var i=t(7788),a=t(80184),o=function(e){var n=e.handleLoadMore;return(0,a.jsx)(i.zx,{className:"gray-outline-btn d-block mx-auto px-4 fw-normal",onClick:function(){return n()},children:"Load more"})}},74405:function(e,n,t){t.d(n,{Ku:function(){return o},Nn:function(){return s},ZQ:function(){return d},mQ:function(){return i},tB:function(){return l},to:function(){return u},v1:function(){return a},wG:function(){return r}});var i={ObservationImages:"ObservationImages",DateTimeLocation:"DateTimeLocation",EquipmentDetails:"EquipmentDetails"},a={MultipleImages:"MultipleImages",ImageSequence:"ImageSequence"},o={Details:"Details",Equipment:"Equipment",Comments:"Comments"},r={default:"verified",verified:"verified",unverified:"unverified",denied:"denied",draft:"draft"},l=function(e,n,t,i){return{id:e,sameAsFirstMap:!1,sameAsFirstDate:!1,image:n,lastModified:null===t||void 0===t?void 0:t.lastModified,name:null===t||void 0===t?void 0:t.name,item:t,latitude:i?i.latitude:28.5204,longitude:i?i.longitude:25.8567,location:"Pune, Maharashtra, India",country_code:"IN",obs_date:null,obs_time:null,timezone:"Africa/Abidjan",azimuth:360,time_accuracy:"",is_precise_azimuth:0,category_map:{category:[],is_other:!1,other_value:""}}},s=[{name:"N",angle:360,default:!0},{name:"NE",angle:45,default:!1},{name:"E",angle:90,default:!1},{name:"SE",angle:135,default:!1},{name:"S",angle:180,default:!1},{name:"SW",angle:235,default:!1},{name:"W",angle:270,default:!1},{name:"NW",angle:315,default:!1}],d=function(e){var n;switch(e){case"N":n=360;break;case"NE":n=45;break;case"E":n=90;break;case"SE":n=135;break;case"S":n=180;break;case"SW":n=235;break;case"W":n=270;break;case"NW":n=315;break;default:n=e}return n},u=function(e){var n;switch(e){case 360:default:n="N";break;case 45:n="NE";break;case 90:n="E";break;case 135:n="SE";break;case 180:n="S";break;case 235:n="SW";break;case 270:n="W";break;case 315:n="NW"}return n}},77849:function(e,n,t){var i=t(72791),a=t(63417);n.Z=function(){var e=(0,i.useContext)(a.ObservationContext).observationImages;return(0,i.useDebugValue)(e,(function(e){return null!==e&&void 0!==e&&e.data?"Images set":"Images not set"})),(0,i.useContext)(a.ObservationContext)}},31752:function(e,n,t){t.r(n);var i=t(42982),a=t(1413),o=t(15861),r=t(70885),l=t(87757),s=t.n(l),d=(t(33505),t(7788)),u=t(16871),c=t(43504),v=t(62711),f=t(94677),m=t(72791),b=t(17834),p=t(40872),h=t(77849),x=t(59122),g=t(74405),j=t(74551),k=(t(46883),t(26022)),Z=t(85423),_=t(80184),S=(0,m.lazy)((function(){return t.e(7267).then(t.bind(t,27103))})),N=(0,m.lazy)((function(){return Promise.all([t.e(7244),t.e(3961),t.e(6755),t.e(3818)]).then(t.bind(t,82488))})),y=(0,m.lazy)((function(){return t.e(9410).then(t.bind(t,59410))}));n.default=function(){var e,n,t,l,w,C=(0,b.Z)().auth,D=(0,h.Z)(),O=D.setObservationData,E=D.setObservationSteps,I=D.setObservationImages,W=(0,p.Z)(),M=W.observationListData,T=W.setObservationListData,G=(0,m.useState)(!1),z=(0,r.Z)(G,2),L=z[0],A=z[1],q=(0,m.useState)(!0),P=(0,r.Z)(q,2),F=P[0],J=P[1],X=(0,m.useState)("verified"),U=(0,r.Z)(X,2),B=U[0],Q=U[1],V=(0,m.useState)(),K=(0,r.Z)(V,2),R=K[0],H=K[1],Y=(0,u.s0)(),$=(0,m.useState)("/observation/observation_collection/?type="),ee=(0,r.Z)($,2),ne=ee[0],te=ee[1],ie=(0,m.useState)(!1),ae=(0,r.Z)(ie,2),oe=ae[0],re=ae[1],le=function(){var e=(0,o.Z)(s().mark((function e(n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I([]),O([]),e.next=4,se(n);case 4:return e.abrupt("return",!0);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),se=function(e){E((function(n){return(0,a.Z)((0,a.Z)({},n),{},{total:3,active:1,mode:(0,a.Z)({update:!0},e)})}))},de=function(){var e,n,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"verified";Q(o),n=!0!==t&&ne?ne:"/observation/observation_collection/?type="+o+"&page=1",f.Z.get(j.v2.api+n,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(null===C||void 0===C||null===(e=C.token)||void 0===e?void 0:e.access)}}).then((function(e){var n,o,r,l=null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.results;null!==e&&void 0!==e&&null!==(o=e.data)&&void 0!==o&&o.next?te(null===e||void 0===e||null===(r=e.data)||void 0===r?void 0:r.next):te(null);var s,d=null===l||void 0===l?void 0:l.data;null!==M&&void 0!==M&&M.list&&!t?(s=(0,i.Z)(M.list),s=[].concat((0,i.Z)(s),(0,i.Z)(d))):s=null===l||void 0===l?void 0:l.data,T((function(e){return(0,a.Z)((0,a.Z)({},e),{},{list:s,count:{verified:null===l||void 0===l?void 0:l.verified_count,unverified:null===l||void 0===l?void 0:l.unverified_count,denied:null===l||void 0===l?void 0:l.denied_count,draft:null===l||void 0===l?void 0:l.draft_count,total:(null===l||void 0===l?void 0:l.verified_count)+(null===l||void 0===l?void 0:l.unverified_count)+(null===l||void 0===l?void 0:l.denied_count)+(null===l||void 0===l?void 0:l.draft_count)}})})),J(!1)})).catch((function(e){console.log(e.response)}))},ue=function(e){re(!0),Q(e),T((function(e){return(0,a.Z)((0,a.Z)({},e),{},{list:[]})})),de(!0,e),setTimeout((function(){re(!1)}),300)},ce=null===M||void 0===M?void 0:M.count;return(0,m.useEffect)((function(){T((function(e){var n;return(0,a.Z)((0,a.Z)({},e),{},{active:null===M||void 0===M||null===(n=M.list)||void 0===n?void 0:n[R],activeType:B})}))}),[L,B]),(0,m.useEffect)((function(){de(!0,"verified"),J(!1)}),[F]),(null===ce||void 0===ce?void 0:ce.total)>0?(0,_.jsxs)("section",{className:"my-observation-data",children:[(0,_.jsx)(d.W2,{children:(0,_.jsx)("div",{className:"filtered-data_wrapper",children:(0,_.jsxs)(d.X2,{children:[(0,_.jsx)(d.JX,{sm:12,md:8,lg:6,className:"order-2 order-md-1",children:(0,_.jsxs)("div",{className:"d-flex align-items-center justify-content-start h-100 text-truncate overflow-auto mb-3 mb-md-0",children:[(0,_.jsxs)("span",{className:B===g.wG.verified?"filter-link active":"filter-link ",onClick:function(){return ue(g.wG.verified)},children:["Verified (",null===M||void 0===M||null===(e=M.count)||void 0===e?void 0:e.verified,")"]}),(0,_.jsxs)("span",{className:B===g.wG.unverified?"filter-link active":"filter-link ",onClick:function(){return ue(g.wG.unverified)},children:["Unverified (",null===M||void 0===M||null===(n=M.count)||void 0===n?void 0:n.unverified,")"]}),(0,_.jsxs)("span",{className:B===g.wG.denied?"filter-link active":"filter-link ",onClick:function(){return ue(g.wG.denied)},children:["Denied (",null===M||void 0===M||null===(t=M.count)||void 0===t?void 0:t.denied,")"]}),(0,_.jsxs)("span",{className:B===g.wG.draft?"filter-link active":"filter-link ",onClick:function(){return ue(g.wG.draft)},children:["Drafts (",null===M||void 0===M||null===(l=M.count)||void 0===l?void 0:l.draft,")"]})]})}),(0,_.jsx)(d.JX,{sm:12,md:4,lg:6,className:"text-end order-1 order-md-2",children:(0,_.jsx)("div",{className:"d-flex align-items-center justify-content-end h-100  flex-wrap flex-lg-nowrap mb-2 mb-md-0",children:(0,_.jsxs)(c.rU,{to:"/"+j.X0.observationsAdd,className:"btn btn-secondary ms-2 ms-xl-4 shadow-none",children:[(0,_.jsx)(v.JO,{icon:"heroicons-outline:upload",width:"16",height:"20"}),"Upload Observations"]})})})]})})}),(0,_.jsxs)(d.W2,{children:[oe?(0,_.jsx)(k.Z,{}):(null===M||void 0===M||null===(w=M.list)||void 0===w?void 0:w.length)>0?(0,_.jsx)(m.Suspense,{fallback:(0,_.jsx)("div",{children:"Please wait..."}),children:(0,_.jsx)(N,{activeType:B,observationList:null===M||void 0===M?void 0:M.list,isObservationDetailModal:L,setObservationDetailModal:A,setSelectedObservationId:H})}):(0,_.jsx)(Z.Z,{}),ne&&(0,_.jsx)(x.f,{handleLoadMore:function(){de(!1,B)}})]}),(0,_.jsx)(m.Suspense,{fallback:(0,_.jsx)("div",{children:"Please wait..."}),children:(0,_.jsx)(S,{data:null===M||void 0===M?void 0:M.active,activeType:B,modalClass:"observation-details_modal",open:L,handleClose:function(e){A(!L),H(e)},handleContinueEdit:function(e){le(e).then((function(e){return e})),A(!1),setTimeout((function(){Y("/observations/update")}),100)},handleApproveRejectEvent:de,refreshData:de})})]}):(0,_.jsx)(m.Suspense,{fallback:(0,_.jsx)("div",{children:"Please wait..."}),children:(0,_.jsx)(y,{count:ce})})}},63417:function(e,n,t){t.r(n),t.d(n,{ObservationContext:function(){return d}});var i=t(42982),a=t(70885),o=t(16871),r=t(72791),l=t(74551),s=t(80184),d=(0,r.createContext)({});n.default=function(){var e=(0,r.useState)({image_type:1}),n=(0,a.Z)(e,2),t=n[0],u=n[1],c=(0,r.useState)({total:3,active:1,mode:{update:!1}}),v=(0,a.Z)(c,2),f=v[0],m=v[1],b=(0,r.useState)([]),p=(0,a.Z)(b,2),h=p[0],x=p[1],g=(0,r.useState)(l.pJ),j=(0,a.Z)(g,2),k=j[0],Z=j[1],_=(0,r.useState)([]),S=(0,a.Z)(_,2),N=S[0],y=S[1],w=(0,r.useState)({}),C=(0,a.Z)(w,2),D=C[0],O=C[1];return(0,r.useEffect)((function(){var e=null!==h&&void 0!==h&&h.data?(0,i.Z)(null===h||void 0===h?void 0:h.data):[];O({image_type:null===t||void 0===t?void 0:t.image_type,map_data:e,elevation_angle:null,video_url:""})}),[null===h||void 0===h?void 0:h.data,null===f||void 0===f?void 0:f.is_draft,null===t||void 0===t?void 0:t.image_type]),(0,s.jsx)(d.Provider,{value:{observationType:t,setObservationType:u,observationSteps:f,setObservationSteps:m,observationImages:h,setObservationImages:x,observationCategory:N,setObservationCategory:y,observationData:D,setObservationData:O,cameraDetails:k,setCameraDetails:Z},children:(0,s.jsx)(o.j3,{})})}},33505:function(){}}]);
//# sourceMappingURL=1752.8d76e008.chunk.js.map