{"version":3,"file":"static/js/2049.ef534f98.chunk.js","mappings":"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","sources":["components/Shared/LoadMore.jsx","pages/Gallery.jsx"],"sourcesContent":["import { Button} from 'reactstrap';\n\nexport const LoadMore = (props) => {\n    const {handleLoadMore} = props;\n    return (\n        <Button className='gray-outline-btn d-block mx-auto px-4 fw-normal' onClick={()=> handleLoadMore()}>Load more</Button>\n    )\n};","import \"../assets/scss/component/myObservation.scss\";\nimport \"../assets/scss/component/gallery.scss\";\nimport {lazy, Suspense, useEffect, useState} from \"react\";\nimport {Container, UncontrolledAlert} from \"reactstrap\";\nimport {Link} from \"react-router-dom\";\n\nimport useAuth from \"../hooks/useAuth\";\nimport axios from \"../api/axios\";\nimport {baseURL, routeUrls} from \"../helpers/url\";\nimport Images from \"./../static/images\";\nimport {LoadMore} from \"../components/Shared/LoadMore\";\nimport useObservationsData from \"../hooks/useObservationsData\";\n\nconst ObservationDetails = lazy(() =>\n    import(\"./Observation/ObservationDetails\")\n);\nconst FilterSelectMenu = lazy(() =>\n    import(\"../components/Shared/FilterSelectMenu\")\n);\nconst ObservationDetailPage = lazy(() =>\n    import(\"./Observation/ObservationDetailPage\")\n);\n\nconst Gallery = () => {\n    const [isObservationDetailModal, setObservationDetailModal] = useState(false);\n    const [isLoaded, setIsLoaded] = useState(true);\n    const [selectedObservationId, setSelectedObservationId] = useState();\n    const [searchCountry, setSearchCountry] = useState(\"\");\n    const [isFilterOpen, setIsFilterOpen] = useState({\n        isCountryOpen: false,\n        isTypeOpen: false,\n        isStatusOpen: false,\n    });\n    const [selectedFilterHorizontal, setSelectedFilterHorizontal] = useState({\n        country: {name: \"\", code: \"\"},\n        type: \"\",\n        status: \"\",\n    });\n\n    const {observationListData, setObservationListData} = useObservationsData();\n    const {auth} = useAuth();\n    const [loadMore, setLoadMore] = useState(10);\n    const [pageSize, setPageSize] = useState(10);\n    const [nextPageUrl, setNextPageUrl] = useState(\n        `${baseURL.api}/observation/gallery/?country=&category=&status=`\n    );\n    const normalUser = auth?.user?.is_user;\n    useEffect(() => {\n        setLoadMore(pageSize);\n        getObservationType(\n            true,\n            \"\",\n            selectedFilterHorizontal.type,\n            selectedFilterHorizontal.status\n        );\n        setIsLoaded(false);\n    }, [isLoaded]);\n\n    const findCountry = (e) => {\n        let value = e.target.value.toLowerCase();\n        setSearchCountry(value);\n    };\n\n    useEffect(() => {\n        if (isFilterOpen.isCountryOpen === false) {\n            setSearchCountry(\"\");\n        }\n    }, [isFilterOpen.isCountryOpen]);\n\n    useEffect(() => {\n        setObservationListData((prev) => {\n            return {\n                ...prev,\n                active: observationListData?.list?.[selectedObservationId],\n            };\n        });\n    }, [isObservationDetailModal]);\n\n    const handleLoadMoreData = () => {\n        getObservationType(\n            false,\n            selectedFilterHorizontal.country?.code,\n            selectedFilterHorizontal.type,\n            selectedFilterHorizontal.status\n        );\n    };\n    const getObservationType = (\n        reset = false,\n        country = `${selectedFilterHorizontal.country?.code}`,\n        category = `${selectedFilterHorizontal.type}`,\n        status = `${selectedFilterHorizontal.status}`\n    ) => {\n        let url;\n        if (reset === true || !nextPageUrl) {\n            url = `${baseURL.api}/observation/gallery/?country=${country}&category=${category}&status=${status}&page=1`;\n        } else {\n            url = nextPageUrl;\n        }\n\n        const headers = {};\n        headers[\"Content-Type\"] = \"application/json\";\n        if (auth.user) {\n            headers[\"Authorization\"] = `Bearer ${auth?.token?.access}`;\n        }\n        axios\n            .get(url, {\n                headers: headers,\n            })\n            .then((success) => {\n                if (success?.data?.results?.data !== undefined) {\n                    if (success?.data?.next) {\n                        setNextPageUrl(success?.data?.next);\n                    } else {\n                        setNextPageUrl(null);\n                    }\n                    let records = success?.data?.results?.data;\n                    let prevData;\n\n                    if (observationListData?.list?.length > 0 && reset === false) {\n                        prevData = [...observationListData?.list];\n                        prevData = [...prevData, ...records];\n                    } else {\n                        prevData = success?.data?.results?.data;\n                    }\n                    setObservationListData((prev) => {\n                        return {\n                            ...prev,\n                            list: prevData,\n                        };\n                    });\n                    setIsLoaded(false);\n                } else {\n                    setNextPageUrl(null);\n                    setObservationListData({list: [], active: {}});\n                }\n            })\n            .catch((error) => {\n                console.log(error.response);\n            });\n    };\n    const handleObservationDetailModal = (id) => {\n        setObservationDetailModal(!isObservationDetailModal);\n        setSelectedObservationId(id);\n    };\n\n    const handleFilterValue = (value, type) => {\n        setObservationListData([]);\n        // setLoadMore(pageSize);\n        if (type === \"status\") {\n            value = value.toLowerCase();\n            getObservationType(\n                true,\n                selectedFilterHorizontal.country?.code,\n                selectedFilterHorizontal.type,\n                value\n            );\n        } else if (type === \"category\") {\n            getObservationType(\n                true,\n                selectedFilterHorizontal.country?.code,\n                value,\n                selectedFilterHorizontal.status\n            );\n        } else if (type === \"country\") {\n            getObservationType(\n                true,\n                value.code,\n                selectedFilterHorizontal.type,\n                selectedFilterHorizontal.status\n            );\n        }\n    };\n\n\n    useEffect(() => {\n        setObservationListData((prev) => {\n            return {\n                ...prev,\n                activeType: \"\",\n                list: []\n            }\n        })\n        getObservationType(true, \"\", \"\", \"\");\n    }, [])\n\n    return (\n        <>\n            <Suspense fallback={<div>please wait...</div>}>\n                <FilterSelectMenu\n                    galleryFilter={true}\n                    isFilterOpen={isFilterOpen}\n                    setIsFilterOpen={setIsFilterOpen}\n                    selectedFilterHorizontal={selectedFilterHorizontal}\n                    setSelectedFilterHorizontal={setSelectedFilterHorizontal}\n                    searchCountry={searchCountry}\n                    findCountry={findCountry}\n                    handleFilterValue={handleFilterValue}\n                />\n            </Suspense>\n\n            <Container className=\"pt-5\">\n                {normalUser && (\n                    <UncontrolledAlert\n                        color=\"danger\"\n                        data-dismiss=\"alert\"\n                        dismissible=\"true\"\n                        className=\"text-center mb-5\"\n                    >\n                        Would you like to help us sift through observations and endorse\n                        their validity?\n                        <Link\n                            to={\"/\" + routeUrls.tutorials}\n                            className=\"btn btn-outline-primary\"\n                        >\n                            Get Trained\n                        </Link>\n                    </UncontrolledAlert>\n                )}\n                {observationListData?.list && (\n                    <div className=\"gallery-page\">\n                        <h4 className=\"text-black fw-bold\">Recent Observations</h4>\n                        <div>\n                            {observationListData?.list.length > 0 ? (\n                                <Suspense fallback={<div>please wait...</div>}>\n                                    <ObservationDetailPage\n                                        observationList={observationListData?.list}\n                                        isObservationDetailModal={isObservationDetailModal}\n                                        setObservationDetailModal={setObservationDetailModal}\n                                        setSelectedObservationId={setSelectedObservationId}\n                                    />\n                                </Suspense>\n                            ) : (\n                                <div className=\"data-not-found\">\n                                    <img\n                                        src={Images.NoDataFound}\n                                        alt=\"No data found\"\n                                        className=\"mb-3\"\n                                    />\n                                    <p>\n                                        <b className=\"text-secondary fw-bold\">Opps!</b> No Data\n                                        Found\n                                    </p>\n                                </div>\n                            )}\n                        </div>\n                        {nextPageUrl && <LoadMore handleLoadMore={handleLoadMoreData}/>}\n\n                        <Suspense fallback={<div>please wait...</div>}>\n                            <ObservationDetails\n                                data={observationListData?.active}\n                                activeType={\n                                    observationListData?.active?.is_verified\n                                        ? \"verified\"\n                                        : observationListData?.active?.is_reject\n                                            ? \"denied\"\n                                            : observationListData?.active?.is_submit\n                                                ? \"unverified\"\n                                                : \"draft\"\n                                }\n                                modalClass=\"observation-details_modal\"\n                                open={isObservationDetailModal}\n                                handleClose={handleObservationDetailModal}\n                                handleApproveRejectEvent={getObservationType}\n                                refreshData={getObservationType}\n                            />\n                        </Suspense>\n                    </div>\n                )}\n            </Container>\n        </>\n    );\n};\nexport default Gallery;\n"],"names":["LoadMore","props","handleLoadMore","className","onClick","ObservationDetails","lazy","FilterSelectMenu","ObservationDetailPage","useState","isObservationDetailModal","setObservationDetailModal","isLoaded","setIsLoaded","selectedObservationId","setSelectedObservationId","searchCountry","setSearchCountry","isCountryOpen","isTypeOpen","isStatusOpen","isFilterOpen","setIsFilterOpen","country","name","code","type","status","selectedFilterHorizontal","setSelectedFilterHorizontal","useObservationsData","observationListData","setObservationListData","auth","useAuth","setLoadMore","pageSize","baseURL","nextPageUrl","setNextPageUrl","normalUser","user","is_user","useEffect","getObservationType","prev","active","list","url","reset","category","headers","token","access","axios","then","success","undefined","data","results","next","prevData","records","length","catch","error","console","log","response","activeType","Suspense","fallback","galleryFilter","findCountry","e","value","target","toLowerCase","handleFilterValue","color","dismissible","to","routeUrls","observationList","src","Images","alt","is_verified","is_reject","is_submit","modalClass","open","handleClose","id","handleApproveRejectEvent","refreshData"],"sourceRoot":""}