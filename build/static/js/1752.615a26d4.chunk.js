"use strict";(self.webpackChunkspritacular_frontend=self.webpackChunkspritacular_frontend||[]).push([[1752,3417],{59122:function(e,n,t){t.d(n,{f:function(){return a}});var i=t(7788),o=t(80184),a=function(e){var n=e.handleLoadMore;return(0,o.jsx)(i.zx,{className:"gray-outline-btn d-block mx-auto px-4 fw-normal",onClick:function(){return n()},children:"Load more"})}},77849:function(e,n,t){var i=t(72791),o=t(63417);n.Z=function(){var e=(0,i.useContext)(o.ObservationContext).observationImages;return(0,i.useDebugValue)(e,(function(e){return null!==e&&void 0!==e&&e.data?"Images set":"Images not set"})),(0,i.useContext)(o.ObservationContext)}},40872:function(e,n,t){var i=t(72791),o=t(21353);n.Z=function(){var e=(0,i.useContext)(o.J).observationListData;return(0,i.useDebugValue)(e,(function(e){return e?"List data set":"Listing data not set"})),(0,i.useContext)(o.J)}},31752:function(e,n,t){t.r(n);var i=t(42982),o=t(1413),a=t(74165),l=t(15861),d=t(70885),r=(t(33505),t(7788)),s=t(16871),u=t(43504),v=t(62711),c=t(94677),f=t(72791),h=t(17834),b=t(40872),p=t(77849),m=t(59122),x=t(74405),Z=t(74551),j=t(80184),g=(0,f.lazy)((function(){return t.e(5423).then(t.bind(t,85423))})),D=(0,f.lazy)((function(){return t.e(7103).then(t.bind(t,27103))})),k=(0,f.lazy)((function(){return Promise.all([t.e(3961),t.e(9852),t.e(4577)]).then(t.bind(t,4577))})),y=(0,f.lazy)((function(){return t.e(1648).then(t.bind(t,11648))}));n.default=function(){var e,n,t,w,C,_=(0,h.Z)().auth,O=(0,s.s0)(),S=(0,p.Z)(),G=S.setObservationData,N=S.setObservationSteps,L=S.setObservationImages,E=(0,b.Z)(),I=E.observationListData,T=E.setObservationListData,z=(0,f.useState)(!1),J=(0,d.Z)(z,2),U=J[0],V=J[1],M=(0,f.useState)("verified"),X=(0,d.Z)(M,2),A=X[0],P=X[1],W=(0,f.useState)(),B=(0,d.Z)(W,2),F=B[0],R=B[1],q=(0,f.useState)("/observation/observation_collection/?type="),H=(0,d.Z)(q,2),K=H[0],Q=H[1],Y=(0,f.useState)({}),$=(0,d.Z)(Y,2),ee=$[0],ne=$[1],te=(0,f.useState)({}),ie=(0,d.Z)(te,2),oe=ie[0],ae=ie[1],le=function(){var e=(0,l.Z)((0,a.Z)().mark((function e(n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return L([]),G([]),e.next=4,de(n);case 4:return e.abrupt("return",!0);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),de=function(e){N((function(n){return(0,o.Z)((0,o.Z)({},n),{},{total:3,active:1,mode:(0,o.Z)({update:!0},e)})}))},re=function(){var e,n,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"verified";P(a),n=!0!==t&&K?K.replace("http","https"):"".concat(Z.v2.api,"/observation/observation_collection/?type=").concat(a,"&page=1"),c.Z.get("".concat(n),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(null===_||void 0===_||null===(e=_.token)||void 0===e?void 0:e.access)}}).then((function(e){var n,a,l,d=null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.results;null!==e&&void 0!==e&&null!==(a=e.data)&&void 0!==a&&a.next?Q(null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.next):Q(null);var r,s=null===d||void 0===d?void 0:d.data;null!==I&&void 0!==I&&I.list&&!t?(r=(0,i.Z)(I.list),r=[].concat((0,i.Z)(r),(0,i.Z)(s))):r=null===d||void 0===d?void 0:d.data,T((function(e){return(0,o.Z)((0,o.Z)({},e),{},{list:r,count:{verified:null===d||void 0===d?void 0:d.verified_count,unverified:null===d||void 0===d?void 0:d.unverified_count,denied:null===d||void 0===d?void 0:d.denied_count,draft:null===d||void 0===d?void 0:d.draft_count,total:(null===d||void 0===d?void 0:d.verified_count)+(null===d||void 0===d?void 0:d.unverified_count)+(null===d||void 0===d?void 0:d.denied_count)+(null===d||void 0===d?void 0:d.draft_count)}})}))})).catch((function(e){console.log(e.response)}))},se=function(e){P(e),T((function(e){return(0,o.Z)((0,o.Z)({},e),{},{list:[]})})),re(!0,e)};(0,f.useEffect)((function(){T((function(e){var n;return(0,o.Z)((0,o.Z)({},e),{},{active:null===I||void 0===I||null===(n=I.list)||void 0===n?void 0:n[F],activeType:A})}))}),[U,A]),(0,f.useEffect)((function(){return re(!0,"verified"),function(){T((function(e){return(0,o.Z)((0,o.Z)({},e),{},{list:[]})}))}}),[]),(0,f.useEffect)((function(){ne((function(e){return(0,o.Z)((0,o.Z)({},e),{},{count:null===I||void 0===I?void 0:I.count})}))}),[null===I||void 0===I?void 0:I.count]),(0,f.useEffect)((function(){ae((function(e){var n,t,i,a,l;return(0,o.Z)((0,o.Z)({},e),{},{hasObservations:(null===ee||void 0===ee||null===(n=ee.count)||void 0===n?void 0:n.total)>0,hasVerifiedData:(null===ee||void 0===ee||null===(t=ee.count)||void 0===t?void 0:t.verified)>0,hasUnverifiedData:(null===ee||void 0===ee||null===(i=ee.count)||void 0===i?void 0:i.unverified)>0,hasDeniedData:(null===ee||void 0===ee||null===(a=ee.count)||void 0===a?void 0:a.denied)>0,hasDraftData:(null===ee||void 0===ee||null===(l=ee.count)||void 0===l?void 0:l.draft)>0})}))}),[null===ee||void 0===ee?void 0:ee.count]);var ue=A&&(A===x.wG.verified&&!(null!==oe&&void 0!==oe&&oe.hasVerifiedData)||A===x.wG.unverified&&!(null!==oe&&void 0!==oe&&oe.hasUnverifiedData)||A===x.wG.denied&&!(null!==oe&&void 0!==oe&&oe.hasDeniedData)||A===x.wG.draft&&!(null!==oe&&void 0!==oe&&oe.hasDraftData));return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("section",{className:"my-observation-data",children:[(null===oe||void 0===oe?void 0:oe.hasObservations)&&(0,j.jsx)(r.W2,{children:(0,j.jsx)("div",{className:"filtered-data_wrapper",children:(0,j.jsxs)(r.X2,{children:[(0,j.jsx)(r.JX,{sm:12,md:8,lg:6,className:"order-2 order-md-1",children:(0,j.jsxs)("div",{className:"d-flex align-items-center justify-content-start h-100 text-truncate overflow-auto mb-3 mb-md-0",children:[(0,j.jsxs)("span",{className:A===x.wG.verified?"filter-link active":"filter-link ",onClick:function(){return se(x.wG.verified)},children:["Verified (",null===I||void 0===I||null===(e=I.count)||void 0===e?void 0:e.verified,")"]}),(0,j.jsxs)("span",{className:A===x.wG.unverified?"filter-link active":"filter-link ",onClick:function(){return se(x.wG.unverified)},children:["Unverified (",null===I||void 0===I||null===(n=I.count)||void 0===n?void 0:n.unverified,")"]}),(0,j.jsxs)("span",{className:A===x.wG.denied?"filter-link active":"filter-link ",onClick:function(){return se(x.wG.denied)},children:["Denied (",null===I||void 0===I||null===(t=I.count)||void 0===t?void 0:t.denied,")"]}),(0,j.jsxs)("span",{className:A===x.wG.draft?"filter-link active":"filter-link ",onClick:function(){return se(x.wG.draft)},children:["Drafts (",null===I||void 0===I||null===(w=I.count)||void 0===w?void 0:w.draft,")"]})]})}),(0,j.jsx)(r.JX,{sm:12,md:4,lg:6,className:"text-end order-1 order-md-2",children:(0,j.jsx)("div",{className:"d-flex align-items-center justify-content-end h-100  flex-wrap flex-lg-nowrap mb-2 mb-md-0",children:(0,j.jsxs)(u.rU,{to:"/"+Z.X0.observationsAdd,className:"btn btn-secondary ms-2 ms-xl-4 shadow-none",children:[(0,j.jsx)(v.JO,{icon:"heroicons-outline:upload",width:"16",height:"20"}),"Upload Observations"]})})})]})})}),(0,j.jsxs)(r.W2,{children:[!(null!==oe&&void 0!==oe&&oe.hasObservations)&&(0,j.jsx)(f.Suspense,{fallback:"",children:(0,j.jsx)(y,{count:null===ee||void 0===ee?void 0:ee.count})}),(0,j.jsxs)(f.Suspense,{fallback:"",children:[(0,j.jsx)(k,{activeType:A,observationList:null===I||void 0===I?void 0:I.list,isObservationDetailModal:U,setObservationDetailModal:V,setSelectedObservationId:R,loadedState:oe}),K&&(null===I||void 0===I?void 0:I.list.length)>0&&(0,j.jsx)(m.f,{handleLoadMore:function(){re(!1,A)}})]}),ue&&(null===oe||void 0===oe?void 0:oe.hasObservations)&&(0,j.jsx)(f.Suspense,{fallback:"",children:(0,j.jsx)(g,{})})]})]}),(null===I||void 0===I||null===(C=I.list)||void 0===C?void 0:C.length)>0&&(0,j.jsx)(f.Suspense,{fallback:"",children:(0,j.jsx)(D,{data:null===I||void 0===I?void 0:I.active,activeType:A,modalClass:"observation-details_modal",open:U,handleClose:function(e){V(!U),R(e)},handleContinueEdit:function(e){le(e).then((function(e){return e})),V(!1),setTimeout((function(){O("/observations/update")}),100)},handleApproveRejectEvent:re,refreshData:re})})]})}},63417:function(e,n,t){t.r(n),t.d(n,{ObservationContext:function(){return s}});var i=t(42982),o=t(70885),a=t(16871),l=t(72791),d=t(74551),r=t(80184),s=(0,l.createContext)({});n.default=function(){var e=(0,l.useState)({image_type:1}),n=(0,o.Z)(e,2),t=n[0],u=n[1],v=(0,l.useState)({total:3,active:1,mode:{update:!1}}),c=(0,o.Z)(v,2),f=c[0],h=c[1],b=(0,l.useState)([]),p=(0,o.Z)(b,2),m=p[0],x=p[1],Z=(0,l.useState)(d.pJ),j=(0,o.Z)(Z,2),g=j[0],D=j[1],k=(0,l.useState)([]),y=(0,o.Z)(k,2),w=y[0],C=y[1],_=(0,l.useState)({}),O=(0,o.Z)(_,2),S=O[0],G=O[1];return(0,l.useEffect)((function(){var e=null!==m&&void 0!==m&&m.data?(0,i.Z)(null===m||void 0===m?void 0:m.data):[];G({image_type:null===t||void 0===t?void 0:t.image_type,map_data:e,elevation_angle:null,video_url:""})}),[null===m||void 0===m?void 0:m.data,null===f||void 0===f?void 0:f.is_draft,null===t||void 0===t?void 0:t.image_type]),(0,r.jsx)(s.Provider,{value:{observationType:t,setObservationType:u,observationSteps:f,setObservationSteps:h,observationImages:m,setObservationImages:x,observationCategory:w,setObservationCategory:C,observationData:S,setObservationData:G,cameraDetails:g,setCameraDetails:D},children:(0,r.jsx)(a.j3,{})})}},33505:function(){}}]);
//# sourceMappingURL=1752.615a26d4.chunk.js.map