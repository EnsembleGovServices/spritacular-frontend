"use strict";(self.webpackChunkspritacular_frontend=self.webpackChunkspritacular_frontend||[]).push([[3562,3417],{59122:function(t,e,n){n.d(e,{f:function(){return o}});var a=n(7788),i=n(80184),o=function(t){var e=t.handleLoadMore;return(0,i.jsx)(a.zx,{className:"gray-outline-btn d-block mx-auto px-4 fw-normal",onClick:function(){return e()},children:"Load more"})}},77849:function(t,e,n){var a=n(72791),i=n(63417);e.Z=function(){var t=(0,a.useContext)(i.ObservationContext).observationImages;return(0,a.useDebugValue)(t,(function(t){return null!==t&&void 0!==t&&t.data?"Images set":"Images not set"})),(0,a.useContext)(i.ObservationContext)}},40872:function(t,e,n){var a=n(72791),i=n(21353);e.Z=function(){var t=(0,a.useContext)(i.J).observationListData;return(0,a.useDebugValue)(t,(function(t){return t?"List data set":"Listing data not set"})),(0,a.useContext)(i.J)}},73562:function(t,e,n){n.r(e),n.d(e,{default:function(){return k}});var a=n(4942),i=n(74165),o=n(1413),s=n(42982),r=n(15861),l=n(70885),u=n(72791),d=n(16871),c=n(17834),v=n(40872),f=n(77849),h=n(59122),b=n(94677),p=n(72426),m=n.n(p),_={isCountryOpen:!1,isTypeOpen:!1,isStatusOpen:!1,isRateOpen:!1,isFOVOpen:!1,isLensTypeOpen:!1},x={country:{name:"",code:""},type:"",status:""},Z={from_obs_data:null,to_obs_data:null,obs_start_date:null,obs_end_date:null,obs_start_time:null,obs_end_time:null,camera_type:"",fps:"",iso:"",fov:"",shutter_speed:"",lens_type:""},y="/observation/dashboard/?country=&category=&status=",g=n(74551),j=n(80184),S=(0,u.lazy)((function(){return n.e(5423).then(n.bind(n,85423))})),O=(0,u.lazy)((function(){return Promise.all([n.e(9136),n.e(6788)]).then(n.bind(n,66788))})),D=(0,u.lazy)((function(){return n.e(2945).then(n.bind(n,32945))})),C=(0,u.lazy)((function(){return Promise.all([n.e(3961),n.e(9852),n.e(4577)]).then(n.bind(n,4577))})),w=(0,u.lazy)((function(){return n.e(180).then(n.bind(n,90180))})),F=(0,u.lazy)((function(){return n.e(7103).then(n.bind(n,27103))})),k=function(){var t,e,n,p=(0,d.s0)(),k=(0,c.Z)().auth,L=(0,u.useState)(!1),M=(0,l.Z)(L,2),z=M[0],I=M[1],V=(0,u.useState)(),H=(0,l.Z)(V,2),N=H[0],T=H[1],E=(0,f.Z)(),Y=E.setObservationData,J=E.setObservationSteps,P=E.setObservationImages,A=(0,u.useState)(!0),R=(0,l.Z)(A,2),B=R[0],G=R[1],W=(0,u.useState)(!1),q=(0,l.Z)(W,2),K=q[0],Q=q[1],U=(0,u.useState)(!0),X=(0,l.Z)(U,2),$=X[0],tt=X[1],et=(0,u.useState)(""),nt=(0,l.Z)(et,2),at=nt[0],it=nt[1],ot=(0,u.useState)(_),st=(0,l.Z)(ot,2),rt=st[0],lt=st[1],ut=(0,u.useState)(x),dt=(0,l.Z)(ut,2),ct=dt[0],vt=dt[1],ft=(0,u.useState)(Z),ht=(0,l.Z)(ft,2),bt=ht[0],pt=ht[1],mt=(0,v.Z)(),_t=mt.observationListData,xt=mt.setObservationListData,Zt=(0,u.useState)(y),yt=(0,l.Z)(Zt,2),gt=yt[0],jt=yt[1],St=(0,u.useState)(!1),Ot=(0,l.Z)(St,2),Dt=Ot[0],Ct=Ot[1],wt=(0,u.useState)({loading:!0,hasData:!0}),Ft=(0,l.Z)(wt,2),kt=Ft[0],Lt=Ft[1],Mt=function(){var t=(0,r.Z)((0,i.Z)().mark((function t(){var e,n,a,r,l,u,d,c,v=arguments;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=v.length>0&&void 0!==v[0]&&v[0],r=v.length>1&&void 0!==v[1]?v[1]:"".concat(null===ct||void 0===ct||null===(e=ct.country)||void 0===e?void 0:e.code),l=v.length>2&&void 0!==v[2]?v[2]:"".concat(null===ct||void 0===ct?void 0:ct.type),u=v.length>3&&void 0!==v[3]?v[3]:"".concat(null===ct||void 0===ct?void 0:ct.status),null===k||void 0===k||null===(n=k.user)||void 0===n||!n.is_superuser){t.next=10;break}return c=!0!==a&&gt?gt.replace("http","https"):"".concat(g.v2.api,"/observation/dashboard/?country=").concat(r,"&category=").concat(l,"&status=").concat(u,"&page=1"),null!==bt.obs_start_date&&(null!==bt.obs_start_time?bt.from_obs_data=m()(bt.obs_start_date+" "+bt.obs_start_time).format("DD/MM/Y H:mm"):bt.from_obs_data=m()(bt.obs_start_date+" 00:00").format("DD/MM/Y HH:mm")),null!==bt.obs_end_date&&(null!==bt.obs_end_time?bt.to_obs_data=m()(bt.obs_end_date+" "+bt.obs_end_time).format("DD/MM/Y HH:mm"):bt.to_obs_data=m()(bt.obs_end_date+" 23:59").format("DD/MM/Y HH:mm")),t.next=10,b.Z.post(c,bt,{headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(null===k||void 0===k||null===(d=k.token)||void 0===d?void 0:d.access)}}).then((function(t){var e,n=null===t||void 0===t?void 0:t.data;if(Ct(!1),void 0!==(null===n||void 0===n||null===(e=n.results)||void 0===e?void 0:e.data)){var i,r,l;if(null!==n&&void 0!==n&&n.next)jt(null===t||void 0===t||null===(l=t.data)||void 0===l?void 0:l.next);else jt(null);var u,d,c=null===n||void 0===n||null===(i=n.results)||void 0===i?void 0:i.data;if((null===_t||void 0===_t||null===(r=_t.list)||void 0===r?void 0:r.length)>0&&!1===a)u=(0,s.Z)(null===_t||void 0===_t?void 0:_t.list),u=[].concat((0,s.Z)(u),(0,s.Z)(c));else u=null===n||void 0===n||null===(d=n.results)||void 0===d?void 0:d.data;xt((function(t){return(0,o.Z)((0,o.Z)({},t),{},{list:u})})),Lt((function(t){var e,a;return(0,o.Z)((0,o.Z)({},t),{},{loading:!1,hasData:(null===n||void 0===n||null===(e=n.results)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.length)>0})}))}else jt(null),xt({list:[],active:{}})})).catch((function(t){console.log(t.response)}));case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),zt=function(){Mt(!1).then((function(t){return t}))},It=function(){var t=(0,r.Z)((0,i.Z)().mark((function t(e){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return P([]),Y([]),t.next=4,Vt(e);case 4:return t.abrupt("return",!0);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Vt=function(t){J((function(e){return(0,o.Z)((0,o.Z)({},e),{},{total:3,active:1,mode:(0,o.Z)({update:!0},t)})}))},Ht=function(){G(!B)},Nt=function(t,e){var n,a;"status"===e&&(t=t.toLowerCase(),Mt(!0,null===(n=ct.country)||void 0===n?void 0:n.code,ct.type,t).then((function(t){return t})));"category"===e&&Mt(!0,null===(a=ct.country)||void 0===a?void 0:a.code,t,ct.status).then((function(t){return t}));"country"===e&&Mt(!0,t.code,ct.type,ct.status).then((function(t){return t})),"filter"===e&&Mt(!0,ct.country.code,ct.type,ct.status).then((function(t){return t}))};return(0,u.useEffect)((function(){Mt(!0,"","","").then((function(t){return t}))}),[Dt]),(0,u.useEffect)((function(){xt((function(t){return(0,o.Z)((0,o.Z)({},t),{},{activeType:"",list:[]})})),Mt(!0,"","","").then((function(t){return t})),window.innerWidth<768&&G(!1),console.clear()}),[]),(0,u.useEffect)((function(){xt((function(t){var e;return(0,o.Z)((0,o.Z)({},t),{},{active:null===_t||void 0===_t||null===(e=_t.list)||void 0===e?void 0:e[N]})}))}),[z]),(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(u.Suspense,{fallback:(0,j.jsx)("div",{}),children:(0,j.jsx)(O,{dashboardFilter:!0,galleryFilter:!0,filterShow:B,handleFilterOpen:Ht,handleListView:function(){Q(!0),tt(!1)},handleGridView:function(){tt(!0),Q(!1)},listView:K,gridView:$,isFilterOpen:rt,setIsFilterOpen:lt,selectedFilterHorizontal:ct,setSelectedFilterHorizontal:vt,searchCountry:at,findCountry:function(t){var e=t.target.value.toLowerCase();it(e)},handleFilterValue:Nt})}),(0,j.jsx)("div",{className:"observation-dashboard_content",children:(0,j.jsx)("div",{className:"container",children:(0,j.jsx)("div",{className:"row",children:(0,j.jsx)("div",{className:"col-sm-12",children:(0,j.jsxs)("div",{className:"set-dash-content",children:[B&&(0,j.jsx)(u.Suspense,{fallback:(0,j.jsx)("div",{}),children:(0,j.jsx)(D,{selectedFilterVertical:bt,setSelectedFilterVertical:pt,handleFilterValue:Nt,handleFilterOpen:Ht,isFilterOpen:rt,setIsFilterOpen:lt,resetFilters:function(){Ct(!0),vt(x),pt(Z)},handleFilterInput:function(t){var e=t.target.name,n=t.target.value;pt((0,o.Z)((0,o.Z)({},bt),{},(0,a.Z)({},e,n)))}})}),(0,j.jsxs)("div",{className:"dashboard-card overflow-hidden ".concat(B?"sm-card":"maximize-dash-content"),children:[K?(0,j.jsxs)(u.Suspense,{fallback:(0,j.jsx)("div",{}),children:[(0,j.jsx)(w,{observationList:null===_t||void 0===_t?void 0:_t.list,isObservationDetailModal:z,setObservationDetailModal:I,setSelectedObservationId:T}),gt&&(null===_t||void 0===_t?void 0:_t.list.length)>0&&(0,j.jsx)(h.f,{handleLoadMore:zt})]}):(0,j.jsxs)(u.Suspense,{fallback:(0,j.jsx)("div",{}),children:[(0,j.jsx)(C,{observationList:null===_t||void 0===_t?void 0:_t.list,isObservationDetailModal:z,setObservationDetailModal:I,setSelectedObservationId:T}),gt&&(null===_t||void 0===_t?void 0:_t.list.length)>0&&(0,j.jsx)(h.f,{handleLoadMore:zt})]}),!(null!==kt&&void 0!==kt&&kt.hasData)&&(0,j.jsx)(u.Suspense,{fallback:"",children:(0,j.jsx)(S,{})})]})]})})})})}),(0,j.jsx)(u.Suspense,{fallback:(0,j.jsx)("div",{}),children:(0,j.jsx)(F,{data:null===_t||void 0===_t?void 0:_t.active,modalClass:"observation-details_modal",open:z,handleClose:function(t){I(!z),T(t)},handleContinueEdit:function(t){It(t).then((function(t){return t})),I(!1),setTimeout((function(){p("/observations/update")}),100)},activeType:null!==_t&&void 0!==_t&&null!==(t=_t.active)&&void 0!==t&&t.is_verified?"verified":null!==_t&&void 0!==_t&&null!==(e=_t.active)&&void 0!==e&&e.is_reject?"denied":null!==_t&&void 0!==_t&&null!==(n=_t.active)&&void 0!==n&&n.is_submit?"unverified":"draft",handleApproveRejectEvent:Mt,refreshData:Mt})})]})}},63417:function(t,e,n){n.r(e),n.d(e,{ObservationContext:function(){return u}});var a=n(42982),i=n(70885),o=n(16871),s=n(72791),r=n(74551),l=n(80184),u=(0,s.createContext)({});e.default=function(){var t=(0,s.useState)({image_type:1}),e=(0,i.Z)(t,2),n=e[0],d=e[1],c=(0,s.useState)({total:3,active:1,mode:{update:!1}}),v=(0,i.Z)(c,2),f=v[0],h=v[1],b=(0,s.useState)([]),p=(0,i.Z)(b,2),m=p[0],_=p[1],x=(0,s.useState)(r.pJ),Z=(0,i.Z)(x,2),y=Z[0],g=Z[1],j=(0,s.useState)([]),S=(0,i.Z)(j,2),O=S[0],D=S[1],C=(0,s.useState)({}),w=(0,i.Z)(C,2),F=w[0],k=w[1];return(0,s.useEffect)((function(){var t=null!==m&&void 0!==m&&m.data?(0,a.Z)(null===m||void 0===m?void 0:m.data):[];k({image_type:null===n||void 0===n?void 0:n.image_type,map_data:t,elevation_angle:null,video_url:""})}),[null===m||void 0===m?void 0:m.data,null===f||void 0===f?void 0:f.is_draft,null===n||void 0===n?void 0:n.image_type]),(0,l.jsx)(u.Provider,{value:{observationType:n,setObservationType:d,observationSteps:f,setObservationSteps:h,observationImages:m,setObservationImages:_,observationCategory:O,setObservationCategory:D,observationData:F,setObservationData:k,cameraDetails:y,setCameraDetails:g},children:(0,l.jsx)(o.j3,{})})}}}]);
//# sourceMappingURL=3562.2fb74097.chunk.js.map