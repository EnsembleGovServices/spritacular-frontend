"use strict";(self.webpackChunkspritacular_frontend=self.webpackChunkspritacular_frontend||[]).push([[1752,3417],{85423:function(e,t,n){var i=n(47604),a=n(80184);t.Z=function(){return(0,a.jsxs)("div",{className:"data-not-found",children:[(0,a.jsx)("img",{src:i.Z.NoDataFound,alt:"No data found",className:"mb-3"}),(0,a.jsxs)("p",{children:[(0,a.jsx)("b",{className:"text-secondary fw-bold",children:"Opps!"})," No Data Found"]})]})}},59122:function(e,t,n){n.d(t,{f:function(){return o}});var i=n(7788),a=n(80184),o=function(e){var t=e.handleLoadMore;return(0,a.jsx)(i.zx,{className:"gray-outline-btn d-block mx-auto px-4 fw-normal",onClick:function(){return t()},children:"Load more"})}},74405:function(e,t,n){n.d(t,{Ku:function(){return o},Nn:function(){return l},ZQ:function(){return u},mQ:function(){return i},tB:function(){return s},to:function(){return d},v1:function(){return a},wG:function(){return r}});var i={ObservationImages:"ObservationImages",DateTimeLocation:"DateTimeLocation",EquipmentDetails:"EquipmentDetails"},a={MultipleImages:"MultipleImages",ImageSequence:"ImageSequence"},o={Details:"Details",Equipment:"Equipment",Comments:"Comments"},r={default:"verified",verified:"verified",unverified:"unverified",denied:"denied",draft:"draft"},s=function(e,t,n,i){return{id:e,sameAsFirstMap:!1,sameAsFirstDate:!1,image:t,lastModified:null===n||void 0===n?void 0:n.lastModified,name:null===n||void 0===n?void 0:n.name,item:n,latitude:i?i.latitude:28.5204,longitude:i?i.longitude:25.8567,location:"Pune, Maharashtra, India",country_code:"IN",obs_date:null,obs_time:null,timezone:"Africa/Abidjan",azimuth:360,time_accuracy:"",is_precise_azimuth:0,category_map:{category:[],is_other:!1,other_value:""}}},l=[{name:"N",angle:360,default:!0},{name:"NE",angle:45,default:!1},{name:"E",angle:90,default:!1},{name:"SE",angle:135,default:!1},{name:"S",angle:180,default:!1},{name:"SW",angle:235,default:!1},{name:"W",angle:270,default:!1},{name:"NW",angle:315,default:!1}],u=function(e){var t;switch(e){case"N":t=360;break;case"NE":t=45;break;case"E":t=90;break;case"SE":t=135;break;case"S":t=180;break;case"SW":t=235;break;case"W":t=270;break;case"NW":t=315;break;default:t=e}return t},d=function(e){var t;switch(e){case 360:default:t="N";break;case 45:t="NE";break;case 90:t="E";break;case 135:t="SE";break;case 180:t="S";break;case 235:t="SW";break;case 270:t="W";break;case 315:t="NW"}return t}},77849:function(e,t,n){var i=n(72791),a=n(63417);t.Z=function(){var e=(0,i.useContext)(a.ObservationContext).observationImages;return(0,i.useDebugValue)(e,(function(e){return null!==e&&void 0!==e&&e.data?"Images set":"Images not set"})),(0,i.useContext)(a.ObservationContext)}},40872:function(e,t,n){var i=n(72791),a=n(21353);t.Z=function(){var e=(0,i.useContext)(a.J).observationListData;return(0,i.useDebugValue)(e,(function(e){return e?"List data set":"Listing data not set"})),(0,i.useContext)(a.J)}},31752:function(e,t,n){n.r(t);var i=n(42982),a=n(1413),o=n(15861),r=n(70885),s=n(87757),l=n.n(s),u=(n(33505),n(7788)),d=n(16871),c=n(43504),v=n(62711),f=n(94677),m=n(72791),b=n(17834),p=n(40872),h=n(77849),x=n(59122),g=n(74405),j=n(74551),k=n(26022),Z=n(85423),_=n(80184),S=(0,m.lazy)((function(){return Promise.all([n.e(6652),n.e(7103),n.e(4375)]).then(n.bind(n,27103))})),N=(0,m.lazy)((function(){return Promise.all([n.e(2426),n.e(6652),n.e(2815),n.e(3674),n.e(1212),n.e(3465)]).then(n.bind(n,4577))})),y=(0,m.lazy)((function(){return n.e(9410).then(n.bind(n,59410))}));t.default=function(){var e,t,n,s,C,D=(0,b.Z)().auth,w=(0,h.Z)(),O=w.setObservationData,E=w.setObservationSteps,I=w.setObservationImages,L=(0,p.Z)(),W=L.observationListData,M=L.setObservationListData,T=(0,m.useState)(!1),G=(0,r.Z)(T,2),z=G[0],A=G[1],q=(0,m.useState)(!0),J=(0,r.Z)(q,2),F=J[0],P=J[1],X=(0,m.useState)("verified"),U=(0,r.Z)(X,2),V=U[0],B=U[1],Q=(0,m.useState)(),K=(0,r.Z)(Q,2),R=K[0],H=K[1],Y=(0,d.s0)(),$=(0,m.useState)("/observation/observation_collection/?type="),ee=(0,r.Z)($,2),te=ee[0],ne=ee[1],ie=(0,m.useState)(!1),ae=(0,r.Z)(ie,2),oe=ae[0],re=ae[1],se=function(){var e=(0,o.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I([]),O([]),e.next=4,le(t);case 4:return e.abrupt("return",!0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),le=function(e){E((function(t){return(0,a.Z)((0,a.Z)({},t),{},{total:3,active:1,mode:(0,a.Z)({update:!0},e)})}))},ue=function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"verified";B(o),t=!0!==n&&te?te.replace("http","https"):"".concat(j.v2.api,"/observation/observation_collection/?type=").concat(o,"&page=1"),f.Z.get("".concat(t),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(null===D||void 0===D||null===(e=D.token)||void 0===e?void 0:e.access)}}).then((function(e){var t,o,r,s=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.results;null!==e&&void 0!==e&&null!==(o=e.data)&&void 0!==o&&o.next?ne(null===e||void 0===e||null===(r=e.data)||void 0===r?void 0:r.next):ne(null);var l,u=null===s||void 0===s?void 0:s.data;null!==W&&void 0!==W&&W.list&&!n?(l=(0,i.Z)(W.list),l=[].concat((0,i.Z)(l),(0,i.Z)(u))):l=null===s||void 0===s?void 0:s.data,M((function(e){return(0,a.Z)((0,a.Z)({},e),{},{list:l,count:{verified:null===s||void 0===s?void 0:s.verified_count,unverified:null===s||void 0===s?void 0:s.unverified_count,denied:null===s||void 0===s?void 0:s.denied_count,draft:null===s||void 0===s?void 0:s.draft_count,total:(null===s||void 0===s?void 0:s.verified_count)+(null===s||void 0===s?void 0:s.unverified_count)+(null===s||void 0===s?void 0:s.denied_count)+(null===s||void 0===s?void 0:s.draft_count)}})})),P(!1)})).catch((function(e){console.log(e.response)}))},de=function(e){re(!0),B(e),M((function(e){return(0,a.Z)((0,a.Z)({},e),{},{list:[]})})),ue(!0,e),setTimeout((function(){re(!1)}),300)},ce=null===W||void 0===W?void 0:W.count;return(0,m.useEffect)((function(){M((function(e){var t;return(0,a.Z)((0,a.Z)({},e),{},{active:null===W||void 0===W||null===(t=W.list)||void 0===t?void 0:t[R],activeType:V})}))}),[z,V]),(0,m.useEffect)((function(){ue(!0,"verified"),P(!1)}),[F]),(null===ce||void 0===ce?void 0:ce.total)>0?(0,_.jsxs)("section",{className:"my-observation-data",children:[(0,_.jsx)(u.W2,{children:(0,_.jsx)("div",{className:"filtered-data_wrapper",children:(0,_.jsxs)(u.X2,{children:[(0,_.jsx)(u.JX,{sm:12,md:8,lg:6,className:"order-2 order-md-1",children:(0,_.jsxs)("div",{className:"d-flex align-items-center justify-content-start h-100 text-truncate overflow-auto mb-3 mb-md-0",children:[(0,_.jsxs)("span",{className:V===g.wG.verified?"filter-link active":"filter-link ",onClick:function(){return de(g.wG.verified)},children:["Verified (",null===W||void 0===W||null===(e=W.count)||void 0===e?void 0:e.verified,")"]}),(0,_.jsxs)("span",{className:V===g.wG.unverified?"filter-link active":"filter-link ",onClick:function(){return de(g.wG.unverified)},children:["Unverified (",null===W||void 0===W||null===(t=W.count)||void 0===t?void 0:t.unverified,")"]}),(0,_.jsxs)("span",{className:V===g.wG.denied?"filter-link active":"filter-link ",onClick:function(){return de(g.wG.denied)},children:["Denied (",null===W||void 0===W||null===(n=W.count)||void 0===n?void 0:n.denied,")"]}),(0,_.jsxs)("span",{className:V===g.wG.draft?"filter-link active":"filter-link ",onClick:function(){return de(g.wG.draft)},children:["Drafts (",null===W||void 0===W||null===(s=W.count)||void 0===s?void 0:s.draft,")"]})]})}),(0,_.jsx)(u.JX,{sm:12,md:4,lg:6,className:"text-end order-1 order-md-2",children:(0,_.jsx)("div",{className:"d-flex align-items-center justify-content-end h-100  flex-wrap flex-lg-nowrap mb-2 mb-md-0",children:(0,_.jsxs)(c.rU,{to:"/"+j.X0.observationsAdd,className:"btn btn-secondary ms-2 ms-xl-4 shadow-none",children:[(0,_.jsx)(v.JO,{icon:"heroicons-outline:upload",width:"16",height:"20"}),"Upload Observations"]})})})]})})}),(0,_.jsx)(u.W2,{children:oe?(0,_.jsx)(k.Z,{}):(null===W||void 0===W||null===(C=W.list)||void 0===C?void 0:C.length)>0?(0,_.jsxs)(m.Suspense,{fallback:(0,_.jsx)("div",{}),children:[(0,_.jsx)(N,{activeType:V,observationList:null===W||void 0===W?void 0:W.list,isObservationDetailModal:z,setObservationDetailModal:A,setSelectedObservationId:H}),te&&(0,_.jsx)(x.f,{handleLoadMore:function(){ue(!1,V)}})]}):(0,_.jsx)(Z.Z,{})}),(0,_.jsx)(m.Suspense,{fallback:(0,_.jsx)("div",{}),children:(0,_.jsx)(S,{data:null===W||void 0===W?void 0:W.active,activeType:V,modalClass:"observation-details_modal",open:z,handleClose:function(e){A(!z),H(e)},handleContinueEdit:function(e){se(e).then((function(e){return e})),A(!1),setTimeout((function(){Y("/observations/update")}),100)},handleApproveRejectEvent:ue,refreshData:ue})})]}):(0,_.jsx)(m.Suspense,{fallback:(0,_.jsx)("div",{}),children:(0,_.jsx)(y,{count:ce})})}},63417:function(e,t,n){n.r(t),n.d(t,{ObservationContext:function(){return u}});var i=n(42982),a=n(70885),o=n(16871),r=n(72791),s=n(74551),l=n(80184),u=(0,r.createContext)({});t.default=function(){var e=(0,r.useState)({image_type:1}),t=(0,a.Z)(e,2),n=t[0],d=t[1],c=(0,r.useState)({total:3,active:1,mode:{update:!1}}),v=(0,a.Z)(c,2),f=v[0],m=v[1],b=(0,r.useState)([]),p=(0,a.Z)(b,2),h=p[0],x=p[1],g=(0,r.useState)(s.pJ),j=(0,a.Z)(g,2),k=j[0],Z=j[1],_=(0,r.useState)([]),S=(0,a.Z)(_,2),N=S[0],y=S[1],C=(0,r.useState)({}),D=(0,a.Z)(C,2),w=D[0],O=D[1];return(0,r.useEffect)((function(){var e=null!==h&&void 0!==h&&h.data?(0,i.Z)(null===h||void 0===h?void 0:h.data):[];O({image_type:null===n||void 0===n?void 0:n.image_type,map_data:e,elevation_angle:null,video_url:""})}),[null===h||void 0===h?void 0:h.data,null===f||void 0===f?void 0:f.is_draft,null===n||void 0===n?void 0:n.image_type]),(0,l.jsx)(u.Provider,{value:{observationType:n,setObservationType:d,observationSteps:f,setObservationSteps:m,observationImages:h,setObservationImages:x,observationCategory:N,setObservationCategory:y,observationData:w,setObservationData:O,cameraDetails:k,setCameraDetails:Z},children:(0,l.jsx)(o.j3,{})})}},33505:function(){}}]);
//# sourceMappingURL=1752.557fcfda.chunk.js.map