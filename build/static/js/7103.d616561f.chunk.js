"use strict";(self.webpackChunkspritacular_frontend=self.webpackChunkspritacular_frontend||[]).push([[7103,7267],{74405:function(e,n,i){i.d(n,{Ku:function(){return l},Nn:function(){return d},ZQ:function(){return r},mQ:function(){return a},tB:function(){return o},to:function(){return c},v1:function(){return t},wG:function(){return s}});var a={ObservationImages:"ObservationImages",DateTimeLocation:"DateTimeLocation",EquipmentDetails:"EquipmentDetails"},t={MultipleImages:"MultipleImages",ImageSequence:"ImageSequence"},l={Details:"Details",Equipment:"Equipment",Comments:"Comments"},s={default:"verified",verified:"verified",unverified:"unverified",denied:"denied",draft:"draft"},o=function(e,n,i,a){return{id:e,sameAsFirstMap:!1,sameAsFirstDate:!1,image:n,lastModified:null===i||void 0===i?void 0:i.lastModified,name:null===i||void 0===i?void 0:i.name,item:i,latitude:a?a.latitude:28.5204,longitude:a?a.longitude:25.8567,location:"Pune, Maharashtra, India",country_code:"IN",obs_date:null,obs_time:null,timezone:"Africa/Abidjan",azimuth:360,time_accuracy:"",is_precise_azimuth:0,category_map:{category:[],is_other:!1,other_value:""}}},d=[{name:"N",angle:360,default:!0},{name:"NE",angle:45,default:!1},{name:"E",angle:90,default:!1},{name:"SE",angle:135,default:!1},{name:"S",angle:180,default:!1},{name:"SW",angle:235,default:!1},{name:"W",angle:270,default:!1},{name:"NW",angle:315,default:!1}],r=function(e){var n;switch(e){case"N":n=360;break;case"NE":n=45;break;case"E":n=90;break;case"SE":n=135;break;case"S":n=180;break;case"SW":n=235;break;case"W":n=270;break;case"NW":n=315;break;default:n=e}return n},c=function(e){var n;switch(e){case 360:default:n="N";break;case 45:n="NE";break;case 90:n="E";break;case 135:n="SE";break;case 180:n="S";break;case 235:n="SW";break;case 270:n="W";break;case 315:n="NW"}return n}},27103:function(e,n,i){i.r(n),i.d(n,{default:function(){return C}});var a=i(1413),t=i(15861),l=i(70885),s=i(87757),o=i.n(s),d=i(72791),r=i(7788),c=i(62711),u=i(36652),v=i(40872),m=i(46883),f=i(74405),h=i(26022),x=i(94677),p=i(74551),b=i(17834),g=i(16871),j=i(80184),N=(0,d.lazy)((function(){return i.e(8750).then(i.bind(i,58750))})),_=(0,d.lazy)((function(){return i.e(9035).then(i.bind(i,99035))})),k=(0,d.lazy)((function(){return i.e(7707).then(i.bind(i,77707))})),y=(0,d.lazy)((function(){return Promise.all([i.e(7244),i.e(2147)]).then(i.bind(i,72147))})),C=function(e){var n,i,s,C,E,w,D,S,I,Z,L,z,K=(0,b.Z)().auth,q=(0,g.TH)(),A=e.modalClass,J=e.open,O=e.handleClose,W=e.data,T=e.activeType,M=e.handleContinueEdit,P=e.handleApproveRejectEvent,X=e.refreshData,R=(0,d.useState)(f.Ku.Details),B=(0,l.Z)(R,2),F=B[0],Y=B[1],Q=(0,v.Z)(),G=Q.observationComments,H=Q.setObservationListData,$=Q.observationListData,U=(0,d.useRef)(null),V=(0,d.useState)(!0),ee=(0,l.Z)(V,2),ne=ee[0],ie=ee[1],ae=(0,d.useRef)(),te=function(e){F!==e&&Y(e)};(0,d.useEffect)((function(){Y(f.Ku.Details)}),[J,null===W||void 0===W?void 0:W.id]);var le=function(){var e=(0,t.Z)(o().mark((function e(){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.Z.post(p.v2.api+"/observation/get_observation_details/"+(null===W||void 0===W?void 0:W.id)+"/",null,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(null===K||void 0===K||null===(n=K.token)||void 0===n?void 0:n.access)}}).then((function(e){var n,i;ie(null===e||void 0===e||null===(n=e.data)||void 0===n||null===(i=n.data)||void 0===i?void 0:i.includes(null))})).catch((function(e){console.log(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,d.useEffect)((function(){var e,n;if(J&&null!==W&&void 0!==W&&W.id&&ne&&null!==K&&void 0!==K&&null!==(e=K.user)&&void 0!==e&&e.id)return ae.current=setInterval((function(){le().then((function(e){return e}))}),1e3),function(){clearInterval(ae.current)};J&&null!==W&&void 0!==W&&W.id&&ne&&(null===K||void 0===K||null===(n=K.user)||void 0===n||!n.id)&&setTimeout((function(){ie(!1)}),1e3)}),[null===W||void 0===W?void 0:W.id,ne,J,null===K||void 0===K?void 0:K.user]),(0,d.useEffect)((function(){ne||q.pathname!=="/".concat(p.X0.myObservations)||X(!0,T)}),[ne,q]),(0,d.useEffect)((function(){var e;ne||(null===$||void 0===$||null===(e=$.list)||void 0===e||e.filter((function(e){var n;return e.id===(null===$||void 0===$||null===(n=$.active)||void 0===n?void 0:n.id)})).map((function(e){return H((function(n){return(0,a.Z)((0,a.Z)({},n),{},{active:e})}))})))}),[$.list]),(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)(r.u_,{className:A||"",isOpen:J,backdrop:!0,keyboard:!1,scrollable:!1,size:"xl",toggle:O,ref:U,children:[(0,j.jsxs)(r.xB,{className:"d-flex justify-content-between align-items-center w-100",children:[(0,j.jsxs)("div",{children:[(0,j.jsx)(r.zx,{className:"close-icon bg-transparent rounded-0 border-0 shadow-none p-0 me-3",onClick:function(){return O()},children:(0,j.jsx)("img",{src:m.Z.Modalcloseicon,alt:"close-icon"})}),null!==W&&void 0!==W&&null!==(n=W.category_data)&&void 0!==n&&n[0]?null===W||void 0===W||null===(i=W.category_data)||void 0===i||null===(s=i[0])||void 0===s?void 0:s.name:null,(0,j.jsxs)(r.Ct,{className:"text-uppercase ".concat("verified"===T?"badge-success":""),children:["verified"===T&&(0,j.jsx)(c.JO,{icon:"mdi:check-decagram",color:"#27ae60",className:"me-1",width:"13",height:"13"}),T]})]}),"draft"===T&&(0,j.jsx)("div",{children:(0,j.jsx)(r.zx,{variant:"primary",onClick:function(){return M({id:null===W||void 0===W?void 0:W.id,type:T})},children:"Continue Editing"})})]}),(0,j.jsx)(r.fe,{children:(0,j.jsxs)(r.X2,{children:[(0,j.jsx)(r.JX,{md:6,children:(0,j.jsxs)("div",{className:"mb-4 mb-md-0 h-100",children:[(0,j.jsxs)("div",{className:"preview-detail mb-3 mb-md-2",children:[!(3===(null===W||void 0===W?void 0:W.image_type))&&(0===(null===W||void 0===W||null===(C=W.images)||void 0===C?void 0:C.length)?(0,j.jsx)("img",{src:m.Z.NotAvailable,alt:"No available",className:"object-contain img-fluid"}):ne?(0,j.jsxs)("div",{className:"d-flex flex-column h-100 align-items-center justify-content-center bg-gradient bg-light",children:[(0,j.jsx)(r.$j,{color:"primary",size:"20px"}),(0,j.jsx)("h5",{className:"mt-3",children:"Processing image..."})]}):(0,j.jsx)("img",{src:null===W||void 0===W||null===(E=W.images)||void 0===E||null===(w=E[0])||void 0===w?void 0:w.image,alt:"card details",className:"img-fluid"})),3===(null===W||void 0===W?void 0:W.image_type)&&(0,j.jsx)(d.Suspense,{fallback:(0,j.jsx)(h.Z,{fixContent:!0}),children:(0,j.jsx)(y,{carouselData:null===W||void 0===W?void 0:W.images,detail:!0})})]}),(0,j.jsxs)(r.X2,{children:[(0,j.jsx)(r.JX,{sm:6,className:"justify-content-start d-flex align-items-center mb-2 mb-sm-0",children:(0,j.jsxs)("div",{className:"d-flex card-user_details align-items-center overflow-hidden",children:[(0,j.jsx)("i",{className:"profile-icon rounded-circle",children:(0,j.jsx)("img",{width:"100%",height:"100%",src:null!==W&&void 0!==W&&null!==(D=W.user_data)&&void 0!==D&&D.profile_image?null===W||void 0===W||null===(S=W.user_data)||void 0===S?void 0:S.profile_image:m.Z.DefaultProfile,alt:"Profile",className:"rounded-circle"})}),(0,j.jsx)("h5",{className:"pe-2 mb-0 text-truncate fw-normal text-black",children:(null===W||void 0===W||null===(I=W.user_data)||void 0===I?void 0:I.first_name)+" "+(null===W||void 0===W||null===(Z=W.user_data)||void 0===Z?void 0:Z.last_name)})]})}),(0,j.jsx)(r.JX,{sm:6,className:"justify-content-end d-flex align-items-center",children:(0,j.jsx)("div",{className:"observation_type d-flex align-items-center",children:(null===W||void 0===W||null===(L=W.category_data)||void 0===L?void 0:L.length)>0&&(null===W||void 0===W||null===(z=W.category_data)||void 0===z?void 0:z.map((function(e,n){var i,a;return(0,j.jsx)("i",{id:null===e||void 0===e||null===(i=e.name)||void 0===i?void 0:i.toLowerCase().replaceAll(" ",""),className:"rounded-circle bg-white ms-2 cursor-pointer",children:(0,j.jsx)(u.ZP,{animation:"perspective",content:null===e||void 0===e?void 0:e.name,children:(0,j.jsx)("img",{src:"/assets/images/category/".concat(null===e||void 0===e||null===(a=e.name)||void 0===a?void 0:a.toLowerCase().replaceAll(" ",""),".png"),alt:null===e||void 0===e?void 0:e.name})})},n)})))})})]})]})}),(0,j.jsxs)(r.JX,{md:6,children:[(0,j.jsxs)(r.JL,{tabs:!0,children:[(0,j.jsx)(r.LY,{children:(0,j.jsx)(r.OL,{className:F===f.Ku.Details?"active":"",onClick:function(){te(f.Ku.Details)},children:"Details"})}),(0,j.jsx)(r.LY,{children:(0,j.jsx)(r.OL,{className:F===f.Ku.Equipment?"active":"",onClick:function(){te(f.Ku.Equipment)},children:"Equipment"})}),(0,j.jsx)(r.LY,{children:(0,j.jsxs)(r.OL,{className:F===f.Ku.Comments?"active":"",onClick:function(){te(f.Ku.Comments)},children:["Comments"," ",0===(null===G||void 0===G?void 0:G.comment_count)?"":"(".concat(null===G||void 0===G?void 0:G.comment_count,")")]})})]}),(0,j.jsxs)(r.I5,{activeTab:F,children:[(0,j.jsx)(r.Jm,{tabId:f.Ku.Details,children:(0,j.jsx)(d.Suspense,{fallback:(0,j.jsx)("div",{children:"please wait..."}),children:(0,j.jsx)(N,{handlePopup:O,approveRejectEvent:P,obvCommentCount:null===G||void 0===G?void 0:G.comment_count,data:W,activeType:T})})}),(0,j.jsx)(r.Jm,{tabId:f.Ku.Equipment,children:(0,j.jsx)(d.Suspense,{fallback:(0,j.jsx)("div",{children:"please wait..."}),children:(0,j.jsx)(_,{obvCommentCount:null===G||void 0===G?void 0:G.comment_count,data:null===W||void 0===W?void 0:W.camera_data})})}),(0,j.jsx)(r.Jm,{tabId:f.Ku.Comments,children:(0,j.jsx)(d.Suspense,{fallback:(0,j.jsx)("div",{children:"please wait..."}),children:(0,j.jsx)(k,{obvId:null===W||void 0===W?void 0:W.id})})})]})]})]})})]})})}}}]);
//# sourceMappingURL=7103.d616561f.chunk.js.map