{"version":3,"file":"static/js/2049.b795e252.chunk.js","mappings":"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","sources":["components/Shared/LoadMore.jsx","hooks/useObservationsData.js","pages/Gallery.jsx"],"sourcesContent":["import { Button} from 'reactstrap';\n\nexport const LoadMore = (props) => {\n    const {handleLoadMore} = props;\n    return (\n        <Button className='gray-outline-btn d-block mx-auto px-4 fw-normal' onClick={()=> handleLoadMore()}>Load more</Button>\n    )\n};","import {useContext, useDebugValue} from \"react\";\nimport {observationViewContext} from \"../layouts/PersistLogin\";\n\nconst useObservationsData = () => {\n    const { observationListData } = useContext(observationViewContext);\n    useDebugValue(observationListData, observationListData => observationListData ? 'List data set' : \"Listing data not set\")\n    return useContext(observationViewContext);\n}\n\nexport default useObservationsData;","import \"../assets/scss/component/myObservation.scss\";\nimport \"../assets/scss/component/gallery.scss\";\nimport {lazy, Suspense, useEffect, useState} from \"react\";\nimport {Container, UncontrolledAlert} from \"reactstrap\";\nimport {Link} from \"react-router-dom\";\n\nimport useAuth from \"../hooks/useAuth\";\nimport axios from \"../api/axios\";\nimport {baseURL, routeUrls} from \"../helpers/url\";\nimport Images from \"./../static/images\";\nimport {LoadMore} from \"../components/Shared/LoadMore\";\nimport useObservationsData from \"../hooks/useObservationsData\";\n\nconst ObservationDetails = lazy(() =>\n    import(\"./Observation/ObservationDetails\")\n);\nconst FilterSelectMenu = lazy(() =>\n    import(\"../components/Shared/FilterSelectMenu\")\n);\nconst ObservationDetailPage = lazy(() =>\n    import(\"./Observation/ObservationListPage\")\n);\n\nconst Gallery = () => {\n    const [isObservationDetailModal, setObservationDetailModal] = useState(false);\n    const [isLoaded, setIsLoaded] = useState(true);\n    const [selectedObservationId, setSelectedObservationId] = useState();\n    const [searchCountry, setSearchCountry] = useState(\"\");\n    const [isFilterOpen, setIsFilterOpen] = useState({\n        isCountryOpen: false,\n        isTypeOpen: false,\n        isStatusOpen: false,\n    });\n    const [selectedFilterHorizontal, setSelectedFilterHorizontal] = useState({\n        country: {name: \"\", code: \"\"},\n        type: \"\",\n        status: \"\",\n    });\n\n    const {observationListData, setObservationListData} = useObservationsData();\n    const {auth} = useAuth();\n    const [loadMore, setLoadMore] = useState(10);\n    const [pageSize, setPageSize] = useState(10);\n    const [nextPageUrl, setNextPageUrl] = useState(\n        `${baseURL.api}/observation/gallery/?country=&category=&status=`\n    );\n    const normalUser = auth?.user?.is_user;\n    useEffect(() => {\n        setLoadMore(pageSize);\n        getObservationType(\n            true,\n            \"\",\n            selectedFilterHorizontal.type,\n            selectedFilterHorizontal.status\n        );\n        setIsLoaded(false);\n    }, [isLoaded]);\n\n    const findCountry = (e) => {\n        let value = e.target.value.toLowerCase();\n        setSearchCountry(value);\n    };\n\n    useEffect(() => {\n        if (isFilterOpen.isCountryOpen === false) {\n            setSearchCountry(\"\");\n        }\n    }, [isFilterOpen.isCountryOpen]);\n\n    useEffect(() => {\n        setObservationListData((prev) => {\n            return {\n                ...prev,\n                active: observationListData?.list?.[selectedObservationId],\n            };\n        });\n    }, [isObservationDetailModal]);\n\n    const handleLoadMoreData = () => {\n        getObservationType(\n            false,\n            selectedFilterHorizontal.country?.code,\n            selectedFilterHorizontal.type,\n            selectedFilterHorizontal.status\n        );\n    };\n    const getObservationType = (\n        reset = false,\n        country = `${selectedFilterHorizontal.country?.code}`,\n        category = `${selectedFilterHorizontal.type}`,\n        status = `${selectedFilterHorizontal.status}`\n    ) => {\n        let url;\n        if (reset === true || !nextPageUrl) {\n            url = `${baseURL.api}/observation/gallery/?country=${country}&category=${category}&status=${status}&page=1`;\n        } else {\n            url = process.env.NODE_ENV === \"development\" ? nextPageUrl : nextPageUrl.replace('http', 'https');\n        }\n\n        const headers = {};\n        headers[\"Content-Type\"] = \"application/json\";\n        if (auth.user) {\n            headers[\"Authorization\"] = `Bearer ${auth?.token?.access}`;\n        }\n        axios\n            .get(url, {\n                headers: headers,\n            })\n            .then((success) => {\n                if (success?.data?.results?.data !== undefined) {\n                    if (success?.data?.next) {\n                        setNextPageUrl(success?.data?.next);\n                    } else {\n                        setNextPageUrl(null);\n                    }\n                    let records = success?.data?.results?.data;\n                    let prevData;\n\n                    if (observationListData?.list?.length > 0 && reset === false) {\n                        prevData = [...observationListData?.list];\n                        prevData = [...prevData, ...records];\n                    } else {\n                        prevData = success?.data?.results?.data;\n                    }\n                    setObservationListData((prev) => {\n                        return {\n                            ...prev,\n                            list: prevData,\n                        };\n                    });\n                    setIsLoaded(false);\n                } else {\n                    setNextPageUrl(null);\n                    setObservationListData({list: [], active: {}});\n                }\n            })\n            .catch((error) => {\n                console.log(error.response);\n            });\n    };\n\n    const handleObservationDetailModal = (id) => {\n        setObservationDetailModal(!isObservationDetailModal);\n        setSelectedObservationId(id);\n    };\n\n    const handleFilterValue = (value, type) => {\n        setObservationListData([]);\n        // setLoadMore(pageSize);\n        if (type === \"status\") {\n            value = value.toLowerCase();\n            getObservationType(\n                true,\n                selectedFilterHorizontal.country?.code,\n                selectedFilterHorizontal.type,\n                value\n            );\n        } else if (type === \"category\") {\n            getObservationType(\n                true,\n                selectedFilterHorizontal.country?.code,\n                value,\n                selectedFilterHorizontal.status\n            );\n        } else if (type === \"country\") {\n            getObservationType(\n                true,\n                value.code,\n                selectedFilterHorizontal.type,\n                selectedFilterHorizontal.status\n            );\n        }\n    };\n\n\n    useEffect(() => {\n        setObservationListData((prev) => {\n            return {\n                ...prev,\n                activeType: \"\",\n                list: []\n            }\n        })\n        getObservationType(true, \"\", \"\", \"\");\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        // console.clear();\n    }, [])\n\n    return (\n        <>\n            <Suspense fallback={<div></div>}>\n                <FilterSelectMenu\n                    galleryFilter={true}\n                    isFilterOpen={isFilterOpen}\n                    setIsFilterOpen={setIsFilterOpen}\n                    selectedFilterHorizontal={selectedFilterHorizontal}\n                    setSelectedFilterHorizontal={setSelectedFilterHorizontal}\n                    searchCountry={searchCountry}\n                    findCountry={findCountry}\n                    handleFilterValue={handleFilterValue}\n                />\n            </Suspense>\n\n            <Container className=\"pt-5\">\n                {normalUser && (\n                    <UncontrolledAlert\n                        color=\"danger\"\n                        data-dismiss=\"alert\"\n                        dismissible=\"true\"\n                        className=\"text-center mb-5\"\n                    >\n                        Would you like to help us sift through observations and endorse\n                        their validity?\n                        <Link\n                            to={\"/\" + routeUrls.quiz.home}\n                            className=\"btn btn-outline-primary\"\n                        >\n                            Get Trained\n                        </Link>\n                    </UncontrolledAlert>\n                )}\n                {observationListData?.list && (\n                    <div className=\"gallery-page\">\n                        <h4 className=\"text-black fw-bold\">Recent Observations</h4>\n                        <div>\n                            {observationListData?.list.length > 0 ? (\n                                <Suspense fallback={<div></div>}>\n                                    <ObservationDetailPage\n                                        observationList={observationListData?.list}\n                                        isObservationDetailModal={isObservationDetailModal}\n                                        setObservationDetailModal={setObservationDetailModal}\n                                        setSelectedObservationId={setSelectedObservationId}\n                                    />\n                                    {nextPageUrl && <LoadMore handleLoadMore={handleLoadMoreData}/>}\n                                </Suspense>\n                            ) : (\n                                <div className=\"data-not-found\">\n                                    <img\n                                        src={Images.NoDataFound}\n                                        alt=\"No data found\"\n                                        className=\"mb-3\"\n                                    />\n                                    <p>\n                                        <b className=\"text-secondary fw-bold\">Opps!</b> No Data\n                                        Found\n                                    </p>\n                                </div>\n                            )}\n                        </div>\n\n\n                        <ObservationDetails\n                            data={observationListData?.active}\n                            activeType={\n                                observationListData?.active?.is_verified\n                                    ? \"verified\"\n                                    : observationListData?.active?.is_reject\n                                        ? \"denied\"\n                                        : observationListData?.active?.is_submit\n                                            ? \"unverified\"\n                                            : \"draft\"\n                            }\n                            modalClass=\"observation-details_modal\"\n                            open={isObservationDetailModal}\n                            handleClose={handleObservationDetailModal}\n                            handleApproveRejectEvent={getObservationType}\n                            refreshData={getObservationType}\n                        />\n                    </div>\n                )}\n            </Container>\n        </>\n    );\n};\nexport default Gallery;\n"],"names":["LoadMore","props","handleLoadMore","className","onClick","observationListData","useContext","observationViewContext","useDebugValue","ObservationDetails","lazy","FilterSelectMenu","ObservationDetailPage","useState","isObservationDetailModal","setObservationDetailModal","isLoaded","setIsLoaded","selectedObservationId","setSelectedObservationId","searchCountry","setSearchCountry","isCountryOpen","isTypeOpen","isStatusOpen","isFilterOpen","setIsFilterOpen","country","name","code","type","status","selectedFilterHorizontal","setSelectedFilterHorizontal","useObservationsData","setObservationListData","auth","useAuth","setLoadMore","pageSize","baseURL","nextPageUrl","setNextPageUrl","normalUser","user","is_user","useEffect","getObservationType","prev","active","list","url","reset","category","replace","headers","token","access","axios","then","success","undefined","data","results","next","prevData","records","length","catch","error","console","log","response","activeType","Suspense","fallback","galleryFilter","findCountry","e","value","target","toLowerCase","handleFilterValue","color","dismissible","to","routeUrls","observationList","src","Images","alt","is_verified","is_reject","is_submit","modalClass","open","handleClose","id","handleApproveRejectEvent","refreshData"],"sourceRoot":""}