"use strict";(self.webpackChunkspritacular_frontend=self.webpackChunkspritacular_frontend||[]).push([[3562,3417],{59122:function(e,t,n){n.d(t,{f:function(){return o}});var a=n(7788),i=n(80184),o=function(e){var t=e.handleLoadMore;return(0,i.jsx)(a.zx,{className:"gray-outline-btn d-block mx-auto px-4 fw-normal",onClick:function(){return t()},children:"Load more"})}},77849:function(e,t,n){var a=n(72791),i=n(63417);t.Z=function(){var e=(0,a.useContext)(i.ObservationContext).observationImages;return(0,a.useDebugValue)(e,(function(e){return null!==e&&void 0!==e&&e.data?"Images set":"Images not set"})),(0,a.useContext)(i.ObservationContext)}},73562:function(e,t,n){n.r(t),n.d(t,{default:function(){return k}});var a=n(4942),i=n(15861),o=n(1413),s=n(42982),l=n(70885),r=n(87757),d=n.n(r),u=n(72791),c=n(16871),v=n(17834),f=n(40872),b=n(77849),p=n(59122),h=n(94677),m=n(72426),_=n.n(m),x=n(46883),y={isCountryOpen:!1,isTypeOpen:!1,isStatusOpen:!1,isRateOpen:!1,isFOVOpen:!1,isLensTypeOpen:!1},Z={country:{name:"",code:""},type:"",status:""},g={from_obs_data:null,to_obs_data:null,obs_start_date:null,obs_end_date:null,obs_start_time:null,obs_end_time:null,camera_type:"",fps:"",iso:"",fov:"",shutter_speed:"",lens_type:""},j="/observation/dashboard/?country=&category=&status=",O=n(74551),S=n(80184),D=(0,u.lazy)((function(){return Promise.all([n.e(9136),n.e(6788)]).then(n.bind(n,66788))})),w=(0,u.lazy)((function(){return n.e(2945).then(n.bind(n,32945))})),C=(0,u.lazy)((function(){return Promise.all([n.e(7244),n.e(3961),n.e(6755),n.e(3555)]).then(n.bind(n,82488))})),F=(0,u.lazy)((function(){return Promise.all([n.e(7244),n.e(180)]).then(n.bind(n,90180))})),M=(0,u.lazy)((function(){return n.e(7103).then(n.bind(n,27103))})),k=function(){var e,t,n,r,m,k=(0,c.s0)(),N=(0,v.Z)().auth,I=(0,u.useState)(!1),L=(0,l.Z)(I,2),z=L[0],V=L[1],H=(0,u.useState)(),T=(0,l.Z)(H,2),E=T[0],P=T[1],Y=(0,b.Z)(),A=Y.setObservationData,R=Y.setObservationSteps,B=Y.setObservationImages,G=(0,u.useState)(!0),J=(0,l.Z)(G,2),W=J[0],q=J[1],K=(0,u.useState)(!1),Q=(0,l.Z)(K,2),U=Q[0],X=Q[1],$=(0,u.useState)(!0),ee=(0,l.Z)($,2),te=ee[0],ne=ee[1],ae=(0,u.useState)(""),ie=(0,l.Z)(ae,2),oe=ie[0],se=ie[1],le=(0,u.useState)(y),re=(0,l.Z)(le,2),de=re[0],ue=re[1],ce=(0,u.useState)(Z),ve=(0,l.Z)(ce,2),fe=ve[0],be=ve[1],pe=(0,u.useState)(g),he=(0,l.Z)(pe,2),me=he[0],_e=he[1],xe=(0,u.useState)(!1),ye=(0,l.Z)(xe,2),Ze=(ye[0],ye[1]),ge=(0,f.Z)(),je=ge.observationListData,Oe=ge.setObservationListData,Se=(0,u.useState)(j),De=(0,l.Z)(Se,2),we=De[0],Ce=De[1],Fe=(0,u.useState)(!1),Me=(0,l.Z)(Fe,2),ke=Me[0],Ne=Me[1],Ie=function(){var e,t,n,a,i=arguments.length>0&&void 0!==arguments[0]&&arguments[0],l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"".concat(null===fe||void 0===fe||null===(e=fe.country)||void 0===e?void 0:e.code),r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"".concat(null===fe||void 0===fe?void 0:fe.type),d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"".concat(null===fe||void 0===fe?void 0:fe.status);null!==N&&void 0!==N&&null!==(t=N.user)&&void 0!==t&&t.is_superuser&&(a=!0!==i&&we?we:"".concat(O.v2.api,"/observation/dashboard/?country=").concat(l,"&category=").concat(r,"&status=").concat(d,"&page=1"),null!==me.obs_start_date&&(null!==me.obs_start_time?me.from_obs_data=_()(me.obs_start_date+" "+me.obs_start_time).format("DD/MM/Y H:mm"):me.from_obs_data=_()(me.obs_start_date+" 00:00").format("DD/MM/Y HH:mm")),null!==me.obs_end_date&&(null!==me.obs_end_time?me.to_obs_data=_()(me.obs_end_date+" "+me.obs_end_time).format("DD/MM/Y HH:mm"):me.to_obs_data=_()(me.obs_end_date+" 23:59").format("DD/MM/Y HH:mm")),h.Z.post(a,me,{headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(null===N||void 0===N||null===(n=N.token)||void 0===n?void 0:n.access)}}).then((function(e){var t,n;if(Ne(!1),void 0!==(null===e||void 0===e||null===(t=e.data)||void 0===t||null===(n=t.results)||void 0===n?void 0:n.data)){var a,l,r,d,u;if(null!==e&&void 0!==e&&null!==(a=e.data)&&void 0!==a&&a.next)Ce(null===e||void 0===e||null===(u=e.data)||void 0===u?void 0:u.next);else Ce(null);var c,v,f,b=null===e||void 0===e||null===(l=e.data)||void 0===l||null===(r=l.results)||void 0===r?void 0:r.data;if((null===je||void 0===je||null===(d=je.list)||void 0===d?void 0:d.length)>0&&!1===i)c=(0,s.Z)(null===je||void 0===je?void 0:je.list),c=[].concat((0,s.Z)(c),(0,s.Z)(b));else c=null===e||void 0===e||null===(v=e.data)||void 0===v||null===(f=v.results)||void 0===f?void 0:f.data;Oe((function(e){return(0,o.Z)((0,o.Z)({},e),{},{list:c})})),Ze(!0)}else Ce(null),Oe({list:[],active:{}})})).catch((function(e){console.log(e.response)})))},Le=function(){var e=(0,i.Z)(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return B([]),A([]),e.next=4,ze(t);case 4:return e.abrupt("return",!0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ze=function(e){R((function(t){return(0,o.Z)((0,o.Z)({},t),{},{total:3,active:1,mode:(0,o.Z)({update:!0},e)})}))},Ve=function(){q(!W)},He=function(e,t){var n,a;"status"===t&&(e=e.toLowerCase(),Ie(!0,null===(n=fe.country)||void 0===n?void 0:n.code,fe.type,e));"category"===t&&Ie(!0,null===(a=fe.country)||void 0===a?void 0:a.code,e,fe.status);"country"===t&&Ie(!0,e.code,fe.type,fe.status),"filter"===t&&Ie(!0,fe.country.code,fe.type,fe.status)};return(0,u.useEffect)((function(){Ie(!0)}),[ke]),(0,u.useEffect)((function(){Oe((function(e){return(0,o.Z)((0,o.Z)({},e),{},{activeType:"",list:[]})})),Ie(!0,"","",""),window.innerWidth<768&&q(!1)}),[]),(0,u.useEffect)((function(){Oe((function(e){var t;return(0,o.Z)((0,o.Z)({},e),{},{active:null===je||void 0===je||null===(t=je.list)||void 0===t?void 0:t[E]})}))}),[z]),(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(u.Suspense,{fallback:(0,S.jsx)("div",{children:"please wait..."}),children:(0,S.jsx)(D,{dashboardFilter:!0,galleryFilter:!0,filterShow:W,handleFilterOpen:Ve,handleListView:function(){X(!0),ne(!1)},handleGridView:function(){ne(!0),X(!1)},listView:U,gridView:te,isFilterOpen:de,setIsFilterOpen:ue,selectedFilterHorizontal:fe,setSelectedFilterHorizontal:be,searchCountry:oe,findCountry:function(e){var t=e.target.value.toLowerCase();se(t)},handleFilterValue:He})}),(0,S.jsx)("div",{className:"observation-dashboard_content",children:(0,S.jsx)("div",{className:"container",children:(0,S.jsx)("div",{className:"row",children:(0,S.jsx)("div",{className:"col-sm-12",children:(0,S.jsxs)("div",{className:"set-dash-content",children:[W&&(0,S.jsx)(u.Suspense,{fallback:(0,S.jsx)("div",{children:"please wait..."}),children:(0,S.jsx)(w,{selectedFilterVertical:me,setSelectedFilterVertical:_e,handleFilterValue:He,handleFilterOpen:Ve,isFilterOpen:de,setIsFilterOpen:ue,resetFilters:function(){Ne(!0),be(Z),_e(g),Ie(!0,"","","")},handleFilterInput:function(e){var t=e.target.name,n=e.target.value;console.log(t,n),_e((0,o.Z)((0,o.Z)({},me),{},(0,a.Z)({},t,n)))}})}),(0,S.jsxs)("div",{className:"dashboard-card overflow-hidden ".concat(W?"sm-card":"maximize-dash-content"),children:[(null===je||void 0===je||null===(e=je.list)||void 0===e?void 0:e.length)>0?U?(0,S.jsx)(u.Suspense,{fallback:(0,S.jsx)("div",{children:"please wait..."}),children:(0,S.jsx)(F,{observationList:null===je||void 0===je?void 0:je.list,isObservationDetailModal:z,setObservationDetailModal:V,setSelectedObservationId:P})}):(0,S.jsx)(u.Suspense,{fallback:(0,S.jsx)("div",{children:"please wait..."}),children:(0,S.jsx)(C,{observationList:null===je||void 0===je?void 0:je.list,isObservationDetailModal:z,setObservationDetailModal:V,setSelectedObservationId:P})}):(0,S.jsxs)("div",{className:"data-not-found",children:[(0,S.jsx)("img",{src:x.Z.NoDataFound,alt:"No data found",className:"mb-3"}),(0,S.jsxs)("p",{children:[(0,S.jsx)("b",{className:"text-secondary fw-bold",children:"Opps!"})," No Data Found"]})]}),we&&(null===je||void 0===je||null===(t=je.list)||void 0===t?void 0:t.length)>0&&(0,S.jsx)(p.f,{handleLoadMore:function(){Ie(!1)}})]}),(0,S.jsx)(u.Suspense,{fallback:(0,S.jsx)("div",{children:"please wait..."}),children:(0,S.jsx)(M,{data:null===je||void 0===je?void 0:je.active,modalClass:"observation-details_modal",open:z,handleClose:function(e){V(!z),P(e)},handleContinueEdit:function(e){Le(e).then((function(e){return e})),V(!1),setTimeout((function(){k("/observations/update")}),100)},activeType:null!==je&&void 0!==je&&null!==(n=je.active)&&void 0!==n&&n.is_verified?"verified":null!==je&&void 0!==je&&null!==(r=je.active)&&void 0!==r&&r.is_reject?"denied":null!==je&&void 0!==je&&null!==(m=je.active)&&void 0!==m&&m.is_submit?"unverified":"draft",handleApproveRejectEvent:Ie,refreshData:Ie})})]})})})})})]})}},63417:function(e,t,n){n.r(t),n.d(t,{ObservationContext:function(){return d}});var a=n(42982),i=n(70885),o=n(16871),s=n(72791),l=n(74551),r=n(80184),d=(0,s.createContext)({});t.default=function(){var e=(0,s.useState)({image_type:1}),t=(0,i.Z)(e,2),n=t[0],u=t[1],c=(0,s.useState)({total:3,active:1,mode:{update:!1}}),v=(0,i.Z)(c,2),f=v[0],b=v[1],p=(0,s.useState)([]),h=(0,i.Z)(p,2),m=h[0],_=h[1],x=(0,s.useState)(l.pJ),y=(0,i.Z)(x,2),Z=y[0],g=y[1],j=(0,s.useState)([]),O=(0,i.Z)(j,2),S=O[0],D=O[1],w=(0,s.useState)({}),C=(0,i.Z)(w,2),F=C[0],M=C[1];return(0,s.useEffect)((function(){var e=null!==m&&void 0!==m&&m.data?(0,a.Z)(null===m||void 0===m?void 0:m.data):[];M({image_type:null===n||void 0===n?void 0:n.image_type,map_data:e,elevation_angle:null,video_url:""})}),[null===m||void 0===m?void 0:m.data,null===f||void 0===f?void 0:f.is_draft,null===n||void 0===n?void 0:n.image_type]),(0,r.jsx)(d.Provider,{value:{observationType:n,setObservationType:u,observationSteps:f,setObservationSteps:b,observationImages:m,setObservationImages:_,observationCategory:S,setObservationCategory:D,observationData:F,setObservationData:M,cameraDetails:Z,setCameraDetails:g},children:(0,r.jsx)(o.j3,{})})}}}]);
//# sourceMappingURL=3562.f44a11aa.chunk.js.map